(()=>{"use strict";var e={20:(e,n,t)=>{var r=t(540),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,a={},u=null,c=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)o.call(n,r)&&!l.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===a[r]&&(a[r]=n[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}n.Fragment=a,n.jsx=u,n.jsxs=u},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],u=r.base?l[0]+r.base:l[0],c=a[u]||0,d="".concat(u," ").concat(c);a[u]=c+1;var m=t(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)n[m].references++,n[m].updater(p);else{var h=i(p,r);r.byIndex=s,n.splice(s,0,{identifier:d,updater:h,references:1})}o.push(d)}return o}function i(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=t(a[o]);n[s].references--}for(var l=r(e,i),u=0;u<a.length;u++){var c=t(a[u]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}a=l}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},159:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},249:(e,n,t)=>{t.d(n,{A:()=>m});var r=t(601),i=t.n(r),a=t(314),o=t.n(a),s=t(417),l=t.n(s),u=new URL(t(796),t.b),c=o()(i()),d=l()(u);c.push([e.id,`/* ========================================\n   Lumiverse Helper - React UI Styles\n   Apple-esque minimal design with dark theme\n   Inspired by oldLumiverseCode/style.css\n   ======================================== */\n\n/* CSS Custom Properties - Purple accent color scheme */\n:root {\n    /* Primary purple accent (matching old design) */\n    --lumiverse-primary: rgba(147, 112, 219, 0.9);\n    --lumiverse-primary-hover: rgba(167, 132, 239, 0.95);\n    --lumiverse-primary-light: rgba(147, 112, 219, 0.1);\n    --lumiverse-primary-muted: rgba(147, 112, 219, 0.6);\n    --lumiverse-primary-text: rgba(186, 135, 255, 0.95);\n\n    /* Secondary gray tones */\n    --lumiverse-secondary: rgba(128, 128, 128, 0.15);\n    --lumiverse-secondary-hover: rgba(128, 128, 128, 0.25);\n    --lumiverse-secondary-border: rgba(128, 128, 128, 0.25);\n\n    /* Status colors */\n    --lumiverse-danger: #ef4444;\n    --lumiverse-danger-hover: #dc2626;\n    --lumiverse-success: #22c55e;\n    --lumiverse-warning: #f59e0b;\n\n    /* Dark purple-tinted backgrounds (matching old design) */\n    --lumiverse-bg: rgba(28, 24, 38, 0.95);\n    --lumiverse-bg-elevated: rgba(35, 30, 48, 0.9);\n    --lumiverse-bg-hover: rgba(45, 40, 58, 0.9);\n    --lumiverse-bg-dark: rgba(0, 0, 0, 0.15);\n    --lumiverse-bg-darker: rgba(0, 0, 0, 0.25);\n\n    /* Subtle purple-tinted borders */\n    --lumiverse-border: rgba(147, 112, 219, 0.12);\n    --lumiverse-border-hover: rgba(147, 112, 219, 0.25);\n    --lumiverse-border-light: rgba(128, 128, 128, 0.12);\n\n    /* Text colors with proper opacity */\n    --lumiverse-text: rgba(255, 255, 255, 0.9);\n    --lumiverse-text-muted: rgba(255, 255, 255, 0.65);\n    --lumiverse-text-dim: rgba(255, 255, 255, 0.4);\n    --lumiverse-text-hint: rgba(255, 255, 255, 0.3);\n\n    /* Consistent border radii */\n    --lumiverse-radius-sm: 5px;\n    --lumiverse-radius: 8px;\n    --lumiverse-radius-md: 10px;\n    --lumiverse-radius-lg: 12px;\n    --lumiverse-radius-xl: 16px;\n\n    /* Shadows */\n    --lumiverse-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);\n    --lumiverse-shadow-lg: 0 24px 80px rgba(0, 0, 0, 0.5), 0 0 1px rgba(147, 112, 219, 0.3);\n\n    /* Smooth transitions (200ms like old design) */\n    --lumiverse-transition: 200ms ease;\n    --lumiverse-transition-fast: 150ms ease;\n\n    /* Typography */\n    --lumiverse-font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;\n    --lumiverse-font-mono: "SF Mono", "Menlo", "Monaco", "Consolas", monospace;\n}\n\n/* ========================================\n   LUMIA SETTINGS PANEL - Exact replica\n   Modern Apple-esque minimal design\n   (from oldLumiverseCode/style.css)\n   ======================================== */\n\n.lumia-injector-settings {\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;\n}\n\n/* Panel Container */\n.lumia-panel {\n    margin-bottom: 12px;\n    background: linear-gradient(\n        165deg,\n        rgba(28, 24, 38, 0.6) 0%,\n        rgba(35, 30, 48, 0.5) 100%\n    );\n    border: 1px solid rgba(147, 112, 219, 0.12);\n    border-radius: 12px;\n    overflow: hidden;\n    transition: border-color 0.2s ease;\n}\n\n.lumia-panel:hover {\n    border-color: rgba(147, 112, 219, 0.25);\n}\n\n/* Panel Header */\n.lumia-panel-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 12px 14px;\n    background: linear-gradient(\n        180deg,\n        rgba(147, 112, 219, 0.08) 0%,\n        transparent 100%\n    );\n    border-bottom: 1px solid rgba(147, 112, 219, 0.08);\n}\n\n.lumia-panel-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    flex-shrink: 0;\n}\n\n.lumia-panel-icon svg {\n    width: 18px;\n    height: 18px;\n    stroke: rgba(147, 112, 219, 0.8);\n}\n\n.lumia-panel-title {\n    font-size: 13px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.9);\n    letter-spacing: -0.1px;\n    flex-grow: 1;\n}\n\n/* Collapsible Panel */\n.lumia-panel-collapsible {\n    cursor: default;\n}\n\n.lumia-panel-header-clickable {\n    cursor: pointer;\n    list-style: none;\n    user-select: none;\n}\n\n.lumia-panel-header-clickable::-webkit-details-marker {\n    display: none;\n}\n\n.lumia-panel-chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    transition: transform 0.2s ease;\n}\n\n.lumia-panel-chevron svg {\n    width: 16px;\n    height: 16px;\n    stroke: rgba(255, 255, 255, 0.4);\n}\n\ndetails.lumia-panel[open] .lumia-panel-chevron {\n    transform: rotate(180deg);\n}\n\n/* Panel Content */\n.lumia-panel-content {\n    padding: 14px;\n}\n\n/* Status Badge */\n.lumia-status-badge {\n    display: inline-flex;\n    align-items: center;\n    padding: 6px 12px;\n    margin-bottom: 12px;\n    background: rgba(147, 112, 219, 0.1);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 20px;\n    font-size: 12px;\n    font-weight: 500;\n    color: rgba(186, 135, 255, 0.9);\n    letter-spacing: 0.1px;\n}\n\n/* Input Row */\n.lumia-input-row {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 10px;\n}\n\n.lumia-input {\n    flex: 1;\n    padding: 10px 14px;\n    background: rgba(0, 0, 0, 0.25);\n    border: 1px solid rgba(128, 128, 128, 0.2);\n    border-radius: 8px;\n    font-size: 13px;\n    color: rgba(255, 255, 255, 0.9);\n    transition: all 0.2s ease;\n    font-family: inherit;\n}\n\n.lumia-input::placeholder {\n    color: rgba(255, 255, 255, 0.35);\n}\n\n.lumia-input:focus {\n    outline: none;\n    border-color: rgba(147, 112, 219, 0.5);\n    background: rgba(0, 0, 0, 0.35);\n}\n\n/* Source Actions - centered buttons with dividers */\n.lumia-source-actions {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.lumia-source-actions .lumia-btn-full {\n    width: 100%;\n    max-width: 100%;\n}\n\n/* Divider Text */\n.lumia-divider-text {\n    text-align: center;\n    font-size: 11px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.3);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    margin: 12px 0;\n    position: relative;\n}\n\n.lumia-divider-text::before,\n.lumia-divider-text::after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    width: calc(50% - 20px);\n    height: 1px;\n    background: rgba(128, 128, 128, 0.2);\n}\n\n.lumia-divider-text::before {\n    left: 0;\n}\n\n.lumia-divider-text::after {\n    right: 0;\n}\n\n/* Buttons */\n.lumia-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 10px 16px;\n    border: none;\n    border-radius: 8px;\n    font-size: 13px;\n    font-weight: 500;\n    font-family: inherit;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n}\n\n.lumia-btn svg {\n    width: 16px;\n    height: 16px;\n    flex-shrink: 0;\n}\n\n.lumia-btn-primary {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.9) 0%,\n        rgba(123, 95, 196, 0.9) 100%\n    );\n    color: white;\n}\n\n.lumia-btn-primary:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(167, 132, 239, 0.95) 0%,\n        rgba(143, 115, 216, 0.95) 100%\n    );\n    transform: translateY(-1px);\n}\n\n.lumia-btn-secondary {\n    background: rgba(128, 128, 128, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.25);\n    color: rgba(255, 255, 255, 0.85);\n}\n\n.lumia-btn-secondary:hover {\n    background: rgba(128, 128, 128, 0.25);\n    border-color: rgba(147, 112, 219, 0.3);\n}\n\n.lumia-btn-full {\n    width: 100%;\n}\n\n.lumia-btn-sm {\n    padding: 6px 12px;\n    font-size: 12px;\n    background: rgba(147, 112, 219, 0.15);\n    border: 1px solid rgba(147, 112, 219, 0.25);\n    color: rgba(186, 135, 255, 0.95);\n}\n\n.lumia-btn-sm:hover {\n    background: rgba(147, 112, 219, 0.25);\n    border-color: rgba(147, 112, 219, 0.4);\n}\n\n.lumia-btn-icon {\n    padding: 6px;\n    background: transparent;\n    border: none;\n}\n\n.lumia-btn-icon:hover {\n    background: rgba(147, 112, 219, 0.15);\n}\n\n.lumia-btn-icon svg {\n    width: 14px;\n    height: 14px;\n    stroke: rgba(186, 135, 255, 0.8);\n}\n\n/* Selector Group */\n.lumia-selector-group {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.lumia-selector {\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: 10px;\n    padding: 12px 14px;\n    transition: all 0.2s ease;\n}\n\n.lumia-selector:hover {\n    border-color: rgba(147, 112, 219, 0.2);\n    background: rgba(0, 0, 0, 0.2);\n}\n\n.lumia-selector-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n}\n\n.lumia-selector-label {\n    font-size: 12px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.8);\n    letter-spacing: 0.1px;\n}\n\n.lumia-selector-hint {\n    font-size: 10px;\n    font-weight: 500;\n    color: rgba(147, 112, 219, 0.6);\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.lumia-selector-row {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.lumia-selector-value {\n    flex: 1;\n    font-size: 13px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.65);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    min-width: 0;\n}\n\n/* Tools Row */\n.lumia-tools-row {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 10px;\n}\n\n.lumia-tool-btn {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 16px 12px;\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: 10px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.lumia-tool-btn svg {\n    width: 22px;\n    height: 22px;\n    stroke: rgba(147, 112, 219, 0.7);\n    transition: stroke 0.2s ease;\n}\n\n.lumia-tool-btn span {\n    font-size: 12px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.75);\n    font-family: inherit;\n}\n\n.lumia-tool-btn:hover {\n    background: rgba(147, 112, 219, 0.1);\n    border-color: rgba(147, 112, 219, 0.25);\n}\n\n.lumia-tool-btn:hover svg {\n    stroke: rgba(186, 135, 255, 0.9);\n}\n\n.lumia-tool-btn-accent {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.2) 0%,\n        rgba(123, 95, 196, 0.15) 100%\n    );\n    border-color: rgba(147, 112, 219, 0.35);\n}\n\n.lumia-tool-btn-accent svg {\n    stroke: rgba(186, 135, 255, 0.9);\n}\n\n.lumia-tool-btn-accent span {\n    color: rgba(186, 135, 255, 0.95);\n}\n\n.lumia-tool-btn-accent:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.3) 0%,\n        rgba(123, 95, 196, 0.25) 100%\n    );\n    border-color: rgba(147, 112, 219, 0.5);\n}\n\n/* Macro Reference */\n.lumia-macro-reference {\n    display: flex;\n    flex-direction: column;\n    gap: 14px;\n}\n\n.lumia-macro-group {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n\n.lumia-macro-group-title {\n    font-size: 10px;\n    font-weight: 600;\n    color: rgba(147, 112, 219, 0.7);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    margin-bottom: 2px;\n}\n\n.lumia-macro-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.lumia-macro {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 6px 0;\n    cursor: pointer;\n    transition: opacity 0.2s ease;\n}\n\n.lumia-macro:hover {\n    opacity: 0.85;\n}\n\n.lumia-macro--copied {\n    opacity: 1;\n}\n\n.lumia-macro--copied code {\n    background: rgba(147, 112, 219, 0.25);\n    border-color: rgba(147, 112, 219, 0.4);\n}\n\n.lumia-macro code {\n    font-family: "SF Mono", "Menlo", "Monaco", "Consolas", monospace;\n    font-size: 11px;\n    padding: 4px 8px;\n    background: rgba(0, 0, 0, 0.3);\n    border: 1px solid rgba(128, 128, 128, 0.15);\n    border-radius: 5px;\n    color: rgba(186, 135, 255, 0.95);\n    white-space: nowrap;\n    transition: all 0.2s ease;\n}\n\n.lumia-macro span {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.55);\n}\n\n/* Custom Packs */\n.lumia-custom-packs {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumia-pack-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: 8px;\n    transition: all 0.2s ease;\n}\n\n.lumia-pack-item:hover {\n    border-color: rgba(147, 112, 219, 0.2);\n    background: rgba(0, 0, 0, 0.2);\n}\n\n.lumia-pack-name {\n    flex: 1;\n    font-size: 13px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.85);\n}\n\n.lumia-pack-count {\n    font-size: 11px;\n    color: rgba(147, 112, 219, 0.7);\n    padding: 2px 8px;\n    background: rgba(147, 112, 219, 0.1);\n    border-radius: 10px;\n}\n\n/* Expandable Pack Container */\n.lumia-pack-item-container {\n    border-radius: 8px;\n    overflow: hidden;\n}\n\n.lumia-pack-item-container--expanded {\n    background: rgba(0, 0, 0, 0.08);\n    border: 1px solid rgba(147, 112, 219, 0.15);\n}\n\n.lumia-pack-item-container--expanded .lumia-pack-item {\n    border-bottom: 1px solid rgba(128, 128, 128, 0.1);\n    border-radius: 8px 8px 0 0;\n}\n\n/* Expand button */\n.lumia-pack-expand-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 24px;\n    height: 24px;\n    padding: 0;\n    background: transparent;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    color: rgba(255, 255, 255, 0.5);\n    transition: all 0.2s ease;\n}\n\n.lumia-pack-expand-btn:hover {\n    background: rgba(147, 112, 219, 0.15);\n    color: rgba(255, 255, 255, 0.8);\n}\n\n/* Chevron rotation */\n.lumia-pack-chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.2s ease;\n}\n\n.lumia-pack-chevron svg {\n    width: 14px;\n    height: 14px;\n}\n\n.lumia-pack-chevron--expanded {\n    transform: rotate(180deg);\n}\n\n/* Expanded Lumia items list */\n.lumia-pack-items-list {\n    display: flex;\n    flex-direction: column;\n    padding: 4px 8px 8px 8px;\n    overflow: hidden;\n}\n\n/* Individual Lumia item in expanded list */\n.lumia-pack-lumia-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 8px 10px;\n    margin-top: 4px;\n    background: rgba(0, 0, 0, 0.12);\n    border: 1px solid rgba(128, 128, 128, 0.08);\n    border-radius: 6px;\n    transition: all 0.15s ease;\n}\n\n.lumia-pack-lumia-item:hover {\n    background: rgba(0, 0, 0, 0.18);\n    border-color: rgba(147, 112, 219, 0.2);\n}\n\n/* Lumia avatar in expanded list */\n.lumia-pack-lumia-avatar {\n    width: 28px;\n    height: 28px;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    flex-shrink: 0;\n}\n\n/* Lumia name in expanded list */\n.lumia-pack-lumia-name {\n    flex: 1;\n    font-size: 12px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.8);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n/* Small icon button */\n.lumia-btn-icon-sm {\n    width: 24px !important;\n    height: 24px !important;\n    padding: 0 !important;\n    font-size: 12px;\n}\n\n.lumia-btn-icon-sm svg {\n    width: 12px;\n    height: 12px;\n}\n\n/* Empty state for expanded pack */\n.lumia-pack-items-empty {\n    padding: 12px;\n    text-align: center;\n    overflow: hidden;\n}\n\n.lumia-pack-items-empty span {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.4);\n    font-style: italic;\n}\n\n/* ----------------------------------------\n   Base App Container\n   ---------------------------------------- */\n.lumiverse-app {\n    font-family: var(--lumiverse-font-family);\n    color: var(--lumiverse-text);\n    font-size: 14px;\n    line-height: 1.5;\n}\n\n.lumiverse-react-root {\n    margin: 0;\n    padding: 0;\n}\n\n/* ----------------------------------------\n   Settings Panel - Main container with gradient background\n   ---------------------------------------- */\n.lumiverse-settings-panel {\n    background: linear-gradient(\n        165deg,\n        rgba(28, 24, 38, 0.95) 0%,\n        rgba(35, 30, 48, 0.9) 100%\n    );\n    border-radius: var(--lumiverse-radius-lg);\n    border: 1px solid var(--lumiverse-border);\n    overflow: hidden;\n    transition: border-color var(--lumiverse-transition);\n}\n\n.lumiverse-settings-panel:hover {\n    border-color: var(--lumiverse-border-hover);\n}\n\n.lumiverse-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 14px;\n    background: linear-gradient(\n        180deg,\n        rgba(147, 112, 219, 0.08) 0%,\n        transparent 100%\n    );\n    border-bottom: 1px solid rgba(147, 112, 219, 0.08);\n}\n\n.lumiverse-header-badge {\n    font-size: 10px;\n    font-weight: 500;\n    padding: 4px 8px;\n    background: var(--lumiverse-primary-light);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 12px;\n    color: var(--lumiverse-primary-text);\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.lumiverse-title {\n    margin: 0;\n    font-size: 13px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    letter-spacing: -0.1px;\n}\n\n/* ----------------------------------------\n   Sections (Collapsible) - Panel-like sections\n   ---------------------------------------- */\n.lumiverse-section {\n    margin-bottom: 0;\n    background: linear-gradient(\n        165deg,\n        rgba(28, 24, 38, 0.6) 0%,\n        rgba(35, 30, 48, 0.5) 100%\n    );\n    border-bottom: 1px solid var(--lumiverse-border);\n    transition: border-color var(--lumiverse-transition);\n}\n\n.lumiverse-section:last-child {\n    border-bottom: none;\n}\n\n.lumiverse-section:hover {\n    border-color: var(--lumiverse-border-hover);\n}\n\n.lumiverse-section-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    width: 100%;\n    padding: 12px 14px;\n    background: linear-gradient(\n        180deg,\n        rgba(147, 112, 219, 0.08) 0%,\n        transparent 100%\n    );\n    border: none;\n    border-bottom: 1px solid rgba(147, 112, 219, 0.08);\n    color: var(--lumiverse-text);\n    font-size: 13px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: background var(--lumiverse-transition);\n    letter-spacing: -0.1px;\n}\n\n.lumiverse-section-header:hover {\n    background: linear-gradient(\n        180deg,\n        rgba(147, 112, 219, 0.12) 0%,\n        rgba(147, 112, 219, 0.04) 100%\n    );\n}\n\n.lumiverse-section-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    flex-shrink: 0;\n    font-size: 16px;\n}\n\n.lumiverse-section-title {\n    flex: 1;\n    text-align: left;\n}\n\n.lumiverse-section-chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    font-size: 10px;\n    color: var(--lumiverse-text-dim);\n    transition: transform var(--lumiverse-transition);\n}\n\n.lumiverse-section-chevron.rotated {\n    transform: rotate(180deg);\n}\n\n.lumiverse-section-content {\n    padding: 14px;\n    background: transparent;\n}\n\n/* ----------------------------------------\n   Toggle Switch\n   ---------------------------------------- */\n.lumiverse-toggle-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 0;\n    cursor: pointer;\n}\n\n.lumiverse-toggle-text {\n    flex: 1;\n    margin-right: 12px;\n}\n\n.lumiverse-toggle-label {\n    display: block;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-toggle-description {\n    display: block;\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 2px;\n}\n\n.lumiverse-toggle {\n    position: relative;\n    width: 44px;\n    height: 24px;\n    background: var(--lumiverse-secondary);\n    border-radius: 12px;\n    transition: background var(--lumiverse-transition);\n}\n\n.lumiverse-toggle--on {\n    background: var(--lumiverse-primary);\n}\n\n.lumiverse-toggle-input {\n    position: absolute;\n    opacity: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n}\n\n.lumiverse-toggle-slider {\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    width: 20px;\n    height: 20px;\n    background: white;\n    border-radius: 50%;\n    transition: transform var(--lumiverse-transition);\n    pointer-events: none;\n}\n\n.lumiverse-toggle--on .lumiverse-toggle-slider {\n    transform: translateX(20px);\n}\n\n/* Drawer toggle container (settings panel) */\n.lumia-drawer-toggle-container {\n    margin-bottom: 12px;\n    padding: 12px 14px;\n    background: linear-gradient(\n        165deg,\n        rgba(28, 24, 38, 0.6) 0%,\n        rgba(35, 30, 48, 0.5) 100%\n    );\n    border: 1px solid rgba(147, 112, 219, 0.12);\n    border-radius: 12px;\n    transition: border-color 0.2s ease;\n}\n\n.lumia-drawer-toggle-container:hover {\n    border-color: rgba(147, 112, 219, 0.25);\n}\n\n/* ----------------------------------------\n   Buttons - Apple-esque with gradients\n   ---------------------------------------- */\n.lumiverse-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 10px 16px;\n    font-size: 13px;\n    font-weight: 500;\n    font-family: inherit;\n    border-radius: var(--lumiverse-radius);\n    border: none;\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n    white-space: nowrap;\n}\n\n.lumiverse-btn svg {\n    width: 16px;\n    height: 16px;\n    flex-shrink: 0;\n}\n\n.lumiverse-btn--primary {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.9) 0%,\n        rgba(123, 95, 196, 0.9) 100%\n    );\n    color: white;\n}\n\n.lumiverse-btn--primary:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(167, 132, 239, 0.95) 0%,\n        rgba(143, 115, 216, 0.95) 100%\n    );\n    transform: translateY(-1px);\n}\n\n.lumiverse-btn--secondary {\n    background: rgba(128, 128, 128, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.25);\n    color: rgba(255, 255, 255, 0.85);\n}\n\n.lumiverse-btn--secondary:hover {\n    background: rgba(128, 128, 128, 0.25);\n    border-color: rgba(147, 112, 219, 0.3);\n}\n\n.lumiverse-btn--danger {\n    background: linear-gradient(\n        135deg,\n        rgba(239, 68, 68, 0.9) 0%,\n        rgba(220, 38, 38, 0.9) 100%\n    );\n    color: white;\n}\n\n.lumiverse-btn--danger:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(248, 113, 113, 0.95) 0%,\n        rgba(239, 68, 68, 0.95) 100%\n    );\n    transform: translateY(-1px);\n}\n\n.lumiverse-btn--icon {\n    padding: 6px;\n    min-width: auto;\n    background: transparent;\n    border: none;\n}\n\n.lumiverse-btn--icon:hover {\n    background: rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-btn-full {\n    width: 100%;\n}\n\n.lumiverse-btn-sm {\n    padding: 6px 12px;\n    font-size: 12px;\n    background: rgba(147, 112, 219, 0.15);\n    border: 1px solid rgba(147, 112, 219, 0.25);\n    color: var(--lumiverse-primary-text);\n}\n\n.lumiverse-btn-sm:hover {\n    background: rgba(147, 112, 219, 0.25);\n    border-color: rgba(147, 112, 219, 0.4);\n}\n\n/* ----------------------------------------\n   Selection Row\n   ---------------------------------------- */\n.lumiverse-selection-row {\n    display: flex;\n    align-items: center;\n    margin-bottom: 12px;\n}\n\n.lumiverse-selection-label {\n    width: 100px;\n    flex-shrink: 0;\n    font-weight: 500;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-selection-button {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    padding: 10px 14px;\n    background: var(--lumiverse-bg-elevated);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    color: var(--lumiverse-text);\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-selection-button:hover {\n    background: var(--lumiverse-bg-hover);\n    border-color: var(--lumiverse-border-light);\n}\n\n.lumiverse-selection-text {\n    flex: 1;\n    text-align: left;\n}\n\n.lumiverse-selection-dominant {\n    font-size: 12px;\n    color: var(--lumiverse-warning);\n    margin-left: 8px;\n}\n\n.lumiverse-selection-arrow {\n    margin-left: 8px;\n    color: var(--lumiverse-text-muted);\n}\n\n/* ----------------------------------------\n   Stats Bar\n   ---------------------------------------- */\n.lumiverse-stats {\n    display: flex;\n    align-items: center;\n    padding: 8px 12px;\n    margin-bottom: 16px;\n    background: var(--lumiverse-primary-light);\n    border-radius: var(--lumiverse-radius);\n    font-size: 13px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-stats-divider {\n    margin: 0 8px;\n}\n\n/* ----------------------------------------\n   Radio Group\n   ---------------------------------------- */\n.lumiverse-radio-group {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 12px;\n}\n\n.lumiverse-radio {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    cursor: pointer;\n}\n\n.lumiverse-radio input[type="radio"] {\n    accent-color: var(--lumiverse-primary);\n}\n\n/* ----------------------------------------\n   Number Input\n   ---------------------------------------- */\n.lumiverse-number-wrapper {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    margin-top: 12px;\n}\n\n.lumiverse-number-label {\n    font-weight: 500;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-number-input {\n    width: 80px;\n    padding: 8px 12px;\n    background: var(--lumiverse-bg-elevated);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    color: var(--lumiverse-text);\n    font-size: 14px;\n}\n\n.lumiverse-number-input:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n/* ----------------------------------------\n   Pack Actions & List\n   ---------------------------------------- */\n.lumiverse-pack-actions {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 16px;\n}\n\n.lumiverse-custom-packs h4 {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    font-weight: 600;\n    color: var(--lumiverse-text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.lumiverse-pack-item {\n    display: flex;\n    align-items: center;\n    padding: 10px 12px;\n    background: var(--lumiverse-bg-elevated);\n    border-radius: var(--lumiverse-radius);\n    margin-bottom: 8px;\n}\n\n.lumiverse-pack-name {\n    flex: 1;\n    font-weight: 500;\n}\n\n.lumiverse-pack-count {\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n    margin-right: 8px;\n}\n\n/* ----------------------------------------\n   Loom Selections\n   ---------------------------------------- */\n.lumiverse-loom-selections {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 12px;\n}\n\n/* ----------------------------------------\n   Modal Styles\n   ---------------------------------------- */\n.lumiverse-modal-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    padding: 20px;\n}\n\n.lumiverse-modal {\n    background: var(--lumiverse-bg);\n    border-radius: var(--lumiverse-radius-lg);\n    border: 1px solid var(--lumiverse-border);\n    box-shadow: var(--lumiverse-shadow-lg);\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.lumiverse-modal--small {\n    width: 400px;\n}\n\n.lumiverse-modal--medium {\n    width: 560px;\n}\n\n.lumiverse-modal--large {\n    width: 800px;\n    max-width: 90vw;\n}\n\n.lumiverse-modal-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16px 20px;\n    background: var(--lumiverse-bg-elevated);\n    border-bottom: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-modal-title {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n}\n\n.lumiverse-modal-close {\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text-muted);\n    font-size: 18px;\n    cursor: pointer;\n    padding: 4px 8px;\n    border-radius: var(--lumiverse-radius-sm);\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-modal-close:hover {\n    background: var(--lumiverse-bg-hover);\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-modal-body {\n    flex: 1;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n}\n\n/* ----------------------------------------\n   Selection Modal\n   ---------------------------------------- */\n.lumiverse-selection-modal {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.lumiverse-selection-toolbar {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 16px;\n    background: var(--lumiverse-bg-elevated);\n    border-bottom: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-selection-count {\n    font-size: 13px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-dominant-indicator {\n    margin-left: 8px;\n    color: var(--lumiverse-warning);\n}\n\n.lumiverse-selection-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px;\n}\n\n.lumiverse-selection-footer {\n    padding: 12px 16px;\n    background: var(--lumiverse-bg-elevated);\n    border-top: 1px solid var(--lumiverse-border);\n    display: flex;\n    justify-content: flex-end;\n}\n\n/* ----------------------------------------\n   Search Input\n   ---------------------------------------- */\n.lumiverse-search {\n    display: flex;\n    align-items: center;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    padding: 0 12px;\n    flex: 1;\n    max-width: 300px;\n}\n\n.lumiverse-search-icon {\n    font-size: 14px;\n    margin-right: 8px;\n}\n\n.lumiverse-search-input {\n    flex: 1;\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text);\n    padding: 8px 0;\n    font-size: 14px;\n}\n\n.lumiverse-search-input:focus {\n    outline: none;\n}\n\n.lumiverse-search-input::placeholder {\n    color: var(--lumiverse-text-dim);\n}\n\n.lumiverse-search-clear {\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text-muted);\n    cursor: pointer;\n    padding: 2px 6px;\n}\n\n/* ----------------------------------------\n   Pack Section (in modals)\n   ---------------------------------------- */\n.lumiverse-pack-section {\n    margin-bottom: 16px;\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n}\n\n.lumiverse-pack-header {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    padding: 12px 14px;\n    background: var(--lumiverse-bg-elevated);\n    border: none;\n    color: var(--lumiverse-text);\n    cursor: pointer;\n    transition: background var(--lumiverse-transition);\n}\n\n.lumiverse-pack-header:hover {\n    background: var(--lumiverse-bg-hover);\n}\n\n.lumiverse-pack-cover {\n    width: 40px;\n    height: 40px;\n    border-radius: var(--lumiverse-radius-sm);\n    object-fit: cover;\n    margin-right: 12px;\n}\n\n.lumiverse-pack-info {\n    flex: 1;\n    text-align: left;\n}\n\n.lumiverse-pack-meta {\n    display: flex;\n    gap: 12px;\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 2px;\n}\n\n.lumiverse-pack-chevron {\n    font-size: 10px;\n    color: var(--lumiverse-text-muted);\n    transition: transform var(--lumiverse-transition);\n}\n\n.lumiverse-pack-chevron.rotated {\n    transform: rotate(180deg);\n}\n\n.lumiverse-pack-items {\n    padding: 8px;\n    background: var(--lumiverse-bg);\n}\n\n/* ----------------------------------------\n   Selectable Item\n   ---------------------------------------- */\n.lumiverse-selectable-item {\n    display: flex;\n    align-items: flex-start;\n    padding: 12px;\n    background: var(--lumiverse-bg-elevated);\n    border: 1px solid transparent;\n    border-radius: var(--lumiverse-radius);\n    margin-bottom: 8px;\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-selectable-item:hover {\n    background: var(--lumiverse-bg-hover);\n}\n\n.lumiverse-selectable-item--selected {\n    border-color: var(--lumiverse-primary);\n    background: var(--lumiverse-primary-light);\n}\n\n.lumiverse-selectable-item--dominant {\n    border-color: var(--lumiverse-warning);\n}\n\n.lumiverse-item-image {\n    width: 48px;\n    height: 48px;\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n    margin-right: 12px;\n    flex-shrink: 0;\n    background: var(--lumiverse-bg);\n}\n\n.lumiverse-item-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.lumiverse-item-content {\n    flex: 1;\n    min-width: 0;\n}\n\n.lumiverse-item-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.lumiverse-item-name {\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-dominant-btn {\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text-dim);\n    font-size: 14px;\n    cursor: pointer;\n    padding: 2px 4px;\n    transition: color var(--lumiverse-transition);\n}\n\n.lumiverse-dominant-btn:hover {\n    color: var(--lumiverse-warning);\n}\n\n.lumiverse-dominant-btn--active {\n    color: var(--lumiverse-warning);\n}\n\n.lumiverse-item-description {\n    margin: 4px 0 0 0;\n    font-size: 13px;\n    color: var(--lumiverse-text-muted);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n}\n\n.lumiverse-item-checkbox {\n    margin-left: 12px;\n    flex-shrink: 0;\n}\n\n.lumiverse-checkbox {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    border: 2px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius-sm);\n    color: transparent;\n    font-size: 12px;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-checkbox.checked {\n    background: var(--lumiverse-primary);\n    border-color: var(--lumiverse-primary);\n    color: white;\n}\n\n.lumiverse-radio-dot {\n    width: 20px;\n    height: 20px;\n    border: 2px solid var(--lumiverse-border);\n    border-radius: 50%;\n    position: relative;\n}\n\n.lumiverse-radio-dot.checked::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 10px;\n    height: 10px;\n    background: var(--lumiverse-primary);\n    border-radius: 50%;\n}\n\n/* ----------------------------------------\n   Empty State\n   ---------------------------------------- */\n.lumiverse-empty-state {\n    text-align: center;\n    padding: 40px 20px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-empty-icon {\n    font-size: 48px;\n    display: block;\n    margin-bottom: 16px;\n}\n\n.lumiverse-empty-state p {\n    margin: 0 0 8px 0;\n}\n\n.lumiverse-empty-hint {\n    font-size: 13px;\n    color: var(--lumiverse-text-dim);\n}\n\n/* ----------------------------------------\n   Pack Editor Modal\n   ---------------------------------------- */\n.lumiverse-pack-editor-modal {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.lumiverse-pack-editor-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n}\n\n.lumiverse-pack-metadata {\n    margin-bottom: 24px;\n}\n\n.lumiverse-pack-metadata h3,\n.lumiverse-pack-items-header h3 {\n    margin: 0 0 16px 0;\n    font-size: 16px;\n    font-weight: 600;\n}\n\n.lumiverse-pack-items-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n}\n\n.lumiverse-pack-items-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.lumiverse-pack-editor-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16px 20px;\n    background: var(--lumiverse-bg-elevated);\n    border-top: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-pack-editor-actions {\n    display: flex;\n    gap: 8px;\n}\n\n/* ----------------------------------------\n   Form Fields\n   ---------------------------------------- */\n.lumiverse-form-field {\n    margin-bottom: 16px;\n}\n\n.lumiverse-form-field--error .lumiverse-input,\n.lumiverse-form-field--error .lumiverse-textarea {\n    border-color: var(--lumiverse-danger);\n}\n\n.lumiverse-form-label {\n    display: block;\n    margin-bottom: 6px;\n    font-weight: 500;\n    font-size: 13px;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-required {\n    color: var(--lumiverse-danger);\n    margin-left: 2px;\n}\n\n.lumiverse-form-error {\n    display: block;\n    margin-top: 4px;\n    font-size: 12px;\n    color: var(--lumiverse-danger);\n}\n\n.lumiverse-input,\n.lumiverse-textarea,\n.lumiverse-select {\n    width: 100%;\n    padding: 10px 12px;\n    background: var(--lumiverse-bg-elevated);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    color: var(--lumiverse-text);\n    font-size: 14px;\n    font-family: inherit;\n    transition: border-color var(--lumiverse-transition);\n}\n\n.lumiverse-input:focus,\n.lumiverse-textarea:focus,\n.lumiverse-select:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-textarea {\n    resize: vertical;\n    min-height: 80px;\n}\n\n.lumiverse-select {\n    cursor: pointer;\n}\n\n/* ----------------------------------------\n   Image Input\n   ---------------------------------------- */\n.lumiverse-image-input {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-image-preview {\n    width: 100px;\n    height: 100px;\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n    background: var(--lumiverse-bg);\n}\n\n.lumiverse-image-preview img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.lumiverse-image-error {\n    font-size: 12px;\n    color: var(--lumiverse-danger);\n}\n\n/* ----------------------------------------\n   Lumia Item Editor\n   ---------------------------------------- */\n.lumiverse-lumia-editor {\n    background: var(--lumiverse-bg-elevated);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    padding: 16px;\n}\n\n.lumiverse-lumia-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n    border-bottom: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-lumia-type {\n    font-size: 12px;\n    font-weight: 600;\n    text-transform: uppercase;\n    color: var(--lumiverse-primary);\n    background: var(--lumiverse-primary-light);\n    padding: 4px 8px;\n    border-radius: var(--lumiverse-radius-sm);\n}\n\n.lumiverse-lumia-fields {\n    display: grid;\n    gap: 12px;\n}\n\n/* ----------------------------------------\n   Loading & Error States\n   ---------------------------------------- */\n.lumiverse-loading-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10001;\n}\n\n.lumiverse-spinner {\n    width: 40px;\n    height: 40px;\n    border: 3px solid var(--lumiverse-border);\n    border-top-color: var(--lumiverse-primary);\n    border-radius: 50%;\n    animation: lumiverse-spin 0.8s linear infinite;\n}\n\n@keyframes lumiverse-spin {\n    to {\n        transform: rotate(360deg);\n    }\n}\n\n.lumiverse-error-toast {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 12px 16px;\n    background: var(--lumiverse-danger);\n    color: white;\n    border-radius: var(--lumiverse-radius);\n    box-shadow: var(--lumiverse-shadow-lg);\n    z-index: 10002;\n    cursor: pointer;\n}\n\n.lumiverse-error-dismiss {\n    background: rgba(255, 255, 255, 0.2);\n    border: none;\n    color: white;\n    padding: 4px 8px;\n    border-radius: var(--lumiverse-radius-sm);\n    font-size: 12px;\n    cursor: pointer;\n}\n\n/* ----------------------------------------\n   Header Badge\n   ---------------------------------------- */\n.lumiverse-header-badge {\n    font-size: 10px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    padding: 4px 8px;\n    background: var(--lumiverse-primary-light);\n    color: var(--lumiverse-primary);\n    border-radius: var(--lumiverse-radius-sm);\n}\n\n/* ----------------------------------------\n   Selector Components - Matching old lumia-selector pattern\n   ---------------------------------------- */\n.lumiverse-selector {\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: var(--lumiverse-radius-md);\n    padding: 12px 14px;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-selector:hover {\n    border-color: rgba(147, 112, 219, 0.2);\n    background: rgba(0, 0, 0, 0.2);\n}\n\n.lumiverse-selector-group {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.lumiverse-selector-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8px;\n}\n\n.lumiverse-selector-label {\n    font-size: 12px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.8);\n    letter-spacing: 0.1px;\n}\n\n.lumiverse-selector-hint {\n    font-size: 10px;\n    font-weight: 500;\n    color: rgba(147, 112, 219, 0.6);\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.lumiverse-selector-row {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.lumiverse-selector-value {\n    flex: 1;\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--lumiverse-text-muted);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    min-width: 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.lumiverse-dominant-badge {\n    font-size: 11px;\n    color: var(--lumiverse-warning);\n    background: rgba(245, 158, 11, 0.15);\n    padding: 3px 8px;\n    border-radius: var(--lumiverse-radius-sm);\n    border: 1px solid rgba(245, 158, 11, 0.25);\n}\n\n/* ----------------------------------------\n   Tool Buttons - Grid layout with accent styling\n   ---------------------------------------- */\n.lumiverse-tools-row {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 10px;\n}\n\n.lumiverse-tool-btn {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 16px 12px;\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: var(--lumiverse-radius-md);\n    color: rgba(255, 255, 255, 0.75);\n    font-size: 12px;\n    font-weight: 500;\n    font-family: inherit;\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-tool-icon {\n    font-size: 18px;\n    transition: transform var(--lumiverse-transition);\n}\n\n.lumiverse-tool-btn:hover {\n    background: rgba(147, 112, 219, 0.1);\n    border-color: rgba(147, 112, 219, 0.25);\n}\n\n.lumiverse-tool-btn:hover .lumiverse-tool-icon {\n    transform: scale(1.1);\n}\n\n.lumiverse-tool-btn-accent {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.2) 0%,\n        rgba(123, 95, 196, 0.15) 100%\n    );\n    border-color: rgba(147, 112, 219, 0.35);\n    color: var(--lumiverse-primary-text);\n}\n\n.lumiverse-tool-btn-accent:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.3) 0%,\n        rgba(123, 95, 196, 0.25) 100%\n    );\n    border-color: rgba(147, 112, 219, 0.5);\n}\n\n.lumiverse-tool-icon {\n    font-size: 16px;\n}\n\n/* ----------------------------------------\n   Macro Reference - Matching old lumia-macro pattern\n   ---------------------------------------- */\n.lumiverse-macro-reference {\n    display: flex;\n    flex-direction: column;\n    gap: 14px;\n}\n\n.lumiverse-macro-group {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n\n.lumiverse-macro-group-title {\n    font-size: 10px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: rgba(147, 112, 219, 0.7);\n    margin-bottom: 2px;\n}\n\n.lumiverse-macro-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.lumiverse-macro {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 6px 0;\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-macro:hover {\n    opacity: 0.85;\n}\n\n.lumiverse-macro--copied {\n    opacity: 1;\n}\n\n.lumiverse-macro--copied code {\n    background: rgba(147, 112, 219, 0.25);\n    border-color: rgba(147, 112, 219, 0.4);\n}\n\n.lumiverse-macro code {\n    font-family: var(--lumiverse-font-mono);\n    font-size: 11px;\n    padding: 4px 8px;\n    background: rgba(0, 0, 0, 0.3);\n    border: 1px solid rgba(128, 128, 128, 0.15);\n    border-radius: var(--lumiverse-radius-sm);\n    color: var(--lumiverse-primary-text);\n    white-space: nowrap;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-macro span {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.55);\n}\n\n/* ----------------------------------------\n   Status Badge - Pack count indicator\n   ---------------------------------------- */\n.lumiverse-status-badge {\n    display: inline-flex;\n    align-items: center;\n    padding: 6px 12px;\n    margin-bottom: 12px;\n    background: rgba(147, 112, 219, 0.1);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 20px;\n    font-size: 12px;\n    font-weight: 500;\n    color: var(--lumiverse-primary-text);\n    letter-spacing: 0.1px;\n}\n\n/* ----------------------------------------\n   Divider - Matching old lumia-divider-text\n   ---------------------------------------- */\n.lumiverse-divider-text {\n    text-align: center;\n    font-size: 11px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.3);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    margin: 12px 0;\n    position: relative;\n}\n\n.lumiverse-divider-text::before,\n.lumiverse-divider-text::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    width: calc(50% - 20px);\n    height: 1px;\n    background: rgba(128, 128, 128, 0.2);\n}\n\n.lumiverse-divider-text::before {\n    left: 0;\n}\n\n.lumiverse-divider-text::after {\n    right: 0;\n}\n\n/* ----------------------------------------\n   Input Row and Input Styling\n   ---------------------------------------- */\n.lumiverse-input-row {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 10px;\n}\n\n.lumiverse-input {\n    flex: 1;\n    padding: 10px 14px;\n    background: rgba(0, 0, 0, 0.25);\n    border: 1px solid rgba(128, 128, 128, 0.2);\n    border-radius: var(--lumiverse-radius);\n    font-size: 13px;\n    color: var(--lumiverse-text);\n    font-family: inherit;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-input::placeholder {\n    color: rgba(255, 255, 255, 0.35);\n}\n\n.lumiverse-input:focus {\n    outline: none;\n    border-color: rgba(147, 112, 219, 0.5);\n    background: rgba(0, 0, 0, 0.35);\n}\n\n/* ----------------------------------------\n   Custom Packs List\n   ---------------------------------------- */\n.lumiverse-custom-packs {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n/* ----------------------------------------\n   Loom Selection Modal\n   ---------------------------------------- */\n.lumiverse-loom-selection-modal {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.lumiverse-selection-actions {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n}\n\n.lumiverse-loom-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 16px;\n    background: var(--lumiverse-bg-tertiary);\n    border-radius: var(--lumiverse-radius-sm);\n    cursor: pointer;\n    transition: all var(--lumiverse-transition);\n    border: 1px solid transparent;\n}\n\n.lumiverse-loom-item:hover {\n    background: var(--lumiverse-bg-secondary);\n    border-color: var(--lumiverse-border-light);\n}\n\n.lumiverse-loom-item--selected {\n    background: rgba(var(--lumiverse-primary-rgb, 147, 112, 219), 0.15);\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-loom-item-content {\n    flex: 1;\n}\n\n.lumiverse-loom-item-name {\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-loom-item-toggle {\n    margin-left: 12px;\n}\n\n.lumiverse-toggle-switch {\n    position: relative;\n    width: 40px;\n    height: 22px;\n}\n\n.lumiverse-toggle-track {\n    width: 100%;\n    height: 100%;\n    background: var(--lumiverse-bg-secondary);\n    border: 2px solid var(--lumiverse-border);\n    border-radius: 11px;\n    transition: all var(--lumiverse-transition);\n}\n\n.lumiverse-toggle-switch.checked .lumiverse-toggle-track {\n    background: var(--lumiverse-primary);\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-toggle-thumb {\n    position: absolute;\n    top: 3px;\n    left: 3px;\n    width: 16px;\n    height: 16px;\n    background: white;\n    border-radius: 50%;\n    transition: transform var(--lumiverse-transition);\n}\n\n.lumiverse-toggle-switch.checked .lumiverse-toggle-thumb {\n    transform: translateX(18px);\n}\n\n/* Selection footer for Loom modals */\n.lumiverse-selection-footer {\n    display: flex;\n    justify-content: flex-end;\n    padding: 16px;\n    border-top: 1px solid var(--lumiverse-border);\n    margin-top: auto;\n}\n\n/* Text button style */\n.lumiverse-btn--text {\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text-muted);\n    padding: 4px 8px;\n}\n\n.lumiverse-btn--text:hover {\n    color: var(--lumiverse-text);\n    background: var(--lumiverse-bg-tertiary);\n}\n\n/* Pack section improvements for Loom modal */\n.lumiverse-pack-icon {\n    margin-right: 8px;\n}\n\n/* Ensure pack items have proper spacing */\n.lumiverse-pack-items {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    padding: 12px;\n    background: var(--lumiverse-bg-secondary);\n    border-radius: 0 0 var(--lumiverse-radius) var(--lumiverse-radius);\n}\n\n/* ----------------------------------------\n   Pack Editor Modal\n   ---------------------------------------- */\n.lumiverse-pack-editor-modal {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.lumiverse-pack-editor-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n}\n\n.lumiverse-pack-metadata h3,\n.lumiverse-pack-items-section h3 {\n    margin: 0 0 16px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-pack-items-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n}\n\n.lumiverse-pack-items-header h3 {\n    margin: 0;\n}\n\n.lumiverse-pack-items-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n/* Lumia Item Editor */\n.lumiverse-lumia-editor {\n    background: var(--lumiverse-bg-tertiary);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n}\n\n.lumiverse-lumia-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 12px 16px;\n    background: var(--lumiverse-bg-secondary);\n    border-bottom: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-lumia-type {\n    font-size: 12px;\n    font-weight: 600;\n    text-transform: uppercase;\n    color: var(--lumiverse-text-muted);\n    background: var(--lumiverse-bg-primary);\n    padding: 4px 8px;\n    border-radius: var(--lumiverse-radius-sm);\n}\n\n.lumiverse-lumia-fields {\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n/* Pack Editor Footer */\n.lumiverse-pack-editor-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px;\n    border-top: 1px solid var(--lumiverse-border);\n    background: var(--lumiverse-bg-secondary);\n}\n\n.lumiverse-pack-editor-footer-left {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n}\n\n.lumiverse-pack-editor-actions {\n    display: flex;\n    gap: 8px;\n    margin-left: auto;\n}\n\n/* Pack Editor Title */\n.lumiverse-pack-editor-title {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 20px;\n}\n\n.lumiverse-pack-editor-title h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-pack-editor-title svg {\n    color: var(--lumiverse-primary-text);\n}\n\n/* Pack Lumias Info Section */\n.lumiverse-pack-lumias-info {\n    background: var(--lumiverse-bg-tertiary);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    padding: 16px;\n}\n\n.lumiverse-pack-lumias-header {\n    margin-bottom: 8px;\n}\n\n.lumiverse-pack-lumias-count {\n    font-size: 14px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-pack-lumias-hint {\n    font-size: 13px;\n    color: var(--lumiverse-text-muted);\n    margin: 0 0 12px 0;\n}\n\n/* Full width button modifier */\n.lumiverse-btn--full {\n    width: 100%;\n    justify-content: center;\n}\n\n/* Form hint text */\n.lumiverse-form-hint {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 4px;\n    font-style: italic;\n}\n\n/* Lumia editor row (side-by-side fields) */\n.lumiverse-lumia-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n}\n\n.lumiverse-lumia-row .lumiverse-form-field {\n    margin-bottom: 0;\n}\n\n/* Lumia name in header */\n.lumiverse-lumia-name {\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    font-size: 14px;\n}\n\n/* Clickable Lumia name (for opening full editor) */\n.lumiverse-lumia-name--clickable {\n    cursor: pointer;\n    transition: color 0.15s ease;\n}\n\n.lumiverse-lumia-name--clickable:hover {\n    color: var(--lumiverse-primary-text);\n}\n\n/* Header actions container */\n.lumiverse-lumia-header-actions {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n}\n\n/* Expand button in header */\n.lumiverse-btn--expand {\n    background: rgba(147, 112, 219, 0.1);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    color: var(--lumiverse-primary-text);\n    opacity: 0.7;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-btn--expand:hover {\n    background: rgba(147, 112, 219, 0.2);\n    opacity: 1;\n}\n\n/* Image Input */\n.lumiverse-image-input {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-image-preview {\n    width: 100px;\n    height: 100px;\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n    border: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-image-preview img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.lumiverse-image-error {\n    color: var(--lumiverse-danger);\n    font-size: 12px;\n}\n\n/* Danger button */\n.lumiverse-btn--danger {\n    background: transparent;\n    border: 1px solid var(--lumiverse-danger);\n    color: var(--lumiverse-danger);\n}\n\n.lumiverse-btn--danger:hover {\n    background: var(--lumiverse-danger);\n    color: white;\n}\n\n.lumiverse-btn--icon {\n    padding: 6px 8px;\n}\n\n/* Select input */\n.lumiverse-select {\n    width: 100%;\n    padding: 10px 12px;\n    background: var(--lumiverse-bg-tertiary);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius-sm);\n    color: var(--lumiverse-text);\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.lumiverse-select:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n/* Required asterisk */\n.lumiverse-required {\n    color: var(--lumiverse-danger);\n    margin-left: 4px;\n}\n\n/* ----------------------------------------\n   Pack Selector Modal\n   ---------------------------------------- */\n.lumia-modal-pack-selector {\n    max-width: 480px;\n    width: 90%;\n}\n\n.lumiverse-pack-selector-modal {\n    display: flex;\n    flex-direction: column;\n    max-height: 70vh;\n}\n\n.lumiverse-pack-selector-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px;\n}\n\n.lumiverse-pack-selector-section {\n    margin-bottom: 16px;\n}\n\n.lumiverse-pack-selector-heading {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    font-size: 13px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    margin: 0 0 12px 0;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.lumiverse-pack-selector-empty {\n    padding: 20px;\n    text-align: center;\n    color: var(--lumiverse-text-muted);\n    font-size: 13px;\n    background: var(--lumiverse-bg-tertiary);\n    border-radius: var(--lumiverse-radius);\n}\n\n.lumiverse-pack-selector-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-pack-selector-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 12px 14px;\n    background: var(--lumiverse-bg-tertiary);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    cursor: pointer;\n    transition: all 0.15s ease;\n    text-align: left;\n    width: 100%;\n}\n\n.lumiverse-pack-selector-item:hover {\n    background: var(--lumiverse-bg-hover);\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-pack-selector-item-icon {\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-pack-selector-item-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n}\n\n.lumiverse-pack-selector-item-name {\n    font-weight: 500;\n    color: var(--lumiverse-text);\n    font-size: 14px;\n}\n\n.lumiverse-pack-selector-item-meta {\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-pack-selector-item-arrow {\n    color: var(--lumiverse-text-muted);\n    opacity: 0;\n    transition: opacity 0.15s ease;\n}\n\n.lumiverse-pack-selector-item:hover .lumiverse-pack-selector-item-arrow {\n    opacity: 1;\n}\n\n.lumiverse-pack-selector-divider {\n    display: flex;\n    align-items: center;\n    margin: 16px 0;\n    color: var(--lumiverse-text-muted);\n    font-size: 12px;\n}\n\n.lumiverse-pack-selector-divider::before,\n.lumiverse-pack-selector-divider::after {\n    content: '';\n    flex: 1;\n    height: 1px;\n    background: var(--lumiverse-border);\n}\n\n.lumiverse-pack-selector-divider span {\n    padding: 0 12px;\n}\n\n.lumiverse-pack-selector-create-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    width: 100%;\n    padding: 14px;\n    background: transparent;\n    border: 2px dashed var(--lumiverse-border);\n    border-radius: var(--lumiverse-radius);\n    color: var(--lumiverse-text-muted);\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-pack-selector-create-btn:hover {\n    border-color: var(--lumiverse-primary);\n    color: var(--lumiverse-primary);\n    background: rgba(var(--lumiverse-primary-rgb), 0.05);\n}\n\n.lumiverse-pack-selector-form {\n    background: var(--lumiverse-bg-tertiary);\n    border-radius: var(--lumiverse-radius);\n    padding: 16px;\n}\n\n.lumiverse-pack-selector-field {\n    margin-bottom: 12px;\n}\n\n.lumiverse-pack-selector-field:last-of-type {\n    margin-bottom: 0;\n}\n\n.lumiverse-pack-selector-error {\n    color: var(--lumiverse-danger);\n    font-size: 12px;\n    margin: 8px 0;\n}\n\n.lumiverse-pack-selector-form-actions {\n    display: flex;\n    gap: 8px;\n    justify-content: flex-end;\n    margin-top: 16px;\n}\n\n.lumiverse-pack-selector-footer {\n    display: flex;\n    justify-content: flex-end;\n    padding: 12px 16px;\n    border-top: 1px solid var(--lumiverse-border);\n    background: var(--lumiverse-bg-secondary);\n}\n\n/* Pack Selector - Expandable Item Wrapper */\n.lumiverse-pack-selector-item-wrapper {\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-pack-selector-item-wrapper--expanded {\n    background: rgba(0, 0, 0, 0.15);\n    border: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-pack-selector-item-wrapper--expanded .lumiverse-pack-selector-item {\n    border-color: transparent;\n    border-radius: var(--lumiverse-radius) var(--lumiverse-radius) 0 0;\n}\n\n.lumiverse-pack-selector-item-wrapper--expanded .lumiverse-pack-selector-item-arrow {\n    opacity: 1;\n}\n\n/* Pack Selector - Expanded Lumias List */\n.lumiverse-pack-selector-lumias {\n    padding: 8px 12px 12px;\n    border-top: 1px solid var(--lumiverse-border-light);\n}\n\n.lumiverse-pack-selector-add-lumia {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 6px;\n    width: 100%;\n    padding: 10px 12px;\n    margin-bottom: 8px;\n    background: rgba(147, 112, 219, 0.1);\n    border: 1px dashed rgba(147, 112, 219, 0.3);\n    border-radius: var(--lumiverse-radius-sm);\n    color: var(--lumiverse-primary-text);\n    font-size: 13px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-pack-selector-add-lumia:hover {\n    background: rgba(147, 112, 219, 0.2);\n    border-color: rgba(147, 112, 219, 0.5);\n}\n\n.lumiverse-pack-selector-lumia-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.lumiverse-pack-selector-lumia-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 8px 10px;\n    background: rgba(0, 0, 0, 0.1);\n    border: 1px solid rgba(128, 128, 128, 0.08);\n    border-radius: var(--lumiverse-radius-sm);\n    transition: all 0.15s ease;\n}\n\n.lumiverse-pack-selector-lumia-item:hover {\n    background: rgba(0, 0, 0, 0.18);\n    border-color: rgba(147, 112, 219, 0.2);\n}\n\n.lumiverse-pack-selector-lumia-avatar {\n    width: 28px;\n    height: 28px;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    flex-shrink: 0;\n}\n\n.lumiverse-pack-selector-lumia-name {\n    flex: 1;\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-pack-selector-lumia-edit {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 28px;\n    height: 28px;\n    padding: 0;\n    background: rgba(147, 112, 219, 0.15);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: var(--lumiverse-radius-sm);\n    color: var(--lumiverse-primary-text);\n    cursor: pointer;\n    transition: all 0.15s ease;\n    flex-shrink: 0;\n}\n\n.lumiverse-pack-selector-lumia-edit:hover {\n    background: rgba(147, 112, 219, 0.3);\n    border-color: rgba(147, 112, 219, 0.4);\n}\n\n.lumiverse-pack-selector-lumia-empty {\n    padding: 12px;\n    text-align: center;\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n    font-style: italic;\n}\n\n/* ----------------------------------------\n   Lumia Editor Modal\n   ---------------------------------------- */\n.lumia-modal-lumia-editor {\n    max-width: 640px;\n    width: 90%;\n}\n\n.lumiverse-editor-modal {\n    display: flex;\n    flex-direction: column;\n    max-height: 80vh;\n}\n\n.lumiverse-editor-content {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px;\n}\n\n.lumiverse-editor-section {\n    margin-bottom: 20px;\n    background: var(--lumiverse-bg-tertiary);\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n}\n\n.lumiverse-editor-section:last-child {\n    margin-bottom: 0;\n}\n\n.lumiverse-editor-section-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 12px 14px;\n    background: var(--lumiverse-bg-secondary);\n    border-bottom: 1px solid var(--lumiverse-border);\n    font-weight: 600;\n    font-size: 13px;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-editor-section-content {\n    padding: 14px;\n}\n\n.lumiverse-editor-field {\n    margin-bottom: 14px;\n}\n\n.lumiverse-editor-field:last-child {\n    margin-bottom: 0;\n}\n\n.lumiverse-editor-field--error .lumiverse-input,\n.lumiverse-editor-field--error .lumiverse-textarea {\n    border-color: var(--lumiverse-danger);\n}\n\n.lumiverse-editor-label {\n    display: block;\n    font-size: 12px;\n    font-weight: 500;\n    color: var(--lumiverse-text-muted);\n    margin-bottom: 6px;\n}\n\n.lumiverse-editor-hint {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 4px;\n    font-style: italic;\n}\n\n.lumiverse-editor-error {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-danger);\n    margin-top: 4px;\n}\n\n.lumiverse-editor-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n}\n\n.lumiverse-editor-row .lumiverse-editor-field {\n    margin-bottom: 0;\n}\n\n.lumiverse-editor-avatar-preview {\n    width: 80px;\n    height: 80px;\n    border-radius: var(--lumiverse-radius);\n    overflow: hidden;\n    border: 1px solid var(--lumiverse-border);\n    margin-top: 8px;\n    position: relative;\n}\n\n.lumiverse-editor-avatar-preview img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n}\n\n.lumiverse-editor-avatar-preview.loaded img {\n    opacity: 1;\n}\n\n.lumiverse-editor-avatar-spinner {\n    position: absolute;\n    inset: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: var(--lumiverse-bg-tertiary);\n}\n\n.lumiverse-editor-avatar-spinner::after {\n    content: '';\n    width: 20px;\n    height: 20px;\n    border: 2px solid var(--lumiverse-border);\n    border-top-color: var(--lumiverse-primary);\n    border-radius: 50%;\n    animation: spin 0.8s linear infinite;\n}\n\n.lumiverse-editor-avatar-preview.loaded .lumiverse-editor-avatar-spinner {\n    display: none;\n}\n\n.lumiverse-editor-footer {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 12px 16px;\n    border-top: 1px solid var(--lumiverse-border);\n    background: var(--lumiverse-bg-secondary);\n}\n\n.lumiverse-editor-footer-spacer {\n    flex: 1;\n}\n\n/* ----------------------------------------\n   Viewport Panel (Dockable Sidebar)\n   ---------------------------------------- */\n\n/* Container for the viewport panel - mounted to document.body */\n.lumiverse-viewport-container {\n    /* Inline styles handle positioning, this is for any additional styling */\n    margin: 0;\n    padding: 0;\n}\n\n/* Wrapper that slides in/out - contains both toggle and panel */\n.lumiverse-viewport-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    height: 100vh;\n    height: 100dvh;\n}\n\n/* Container for the toggle button - positioned to left of panel */\n.lumiverse-toggle-container {\n    position: absolute;\n    top: 12px;\n    right: 100%; /* Position to the left of the wrapper */\n    margin-right: 12px;\n    pointer-events: auto;\n}\n\n.lumiverse-viewport-panel {\n    height: 100%;\n    display: flex;\n    flex-direction: row;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    pointer-events: auto;\n}\n\n.lumiverse-viewport-panel--collapsed {\n    /* Just show the tab bar when collapsed */\n}\n\n/* Tab sidebar */\n.lumiverse-vp-tabs {\n    display: flex;\n    flex-direction: column;\n    width: 56px;\n    background: linear-gradient(180deg, rgba(28, 24, 38, 0.98) 0%, rgba(20, 17, 28, 0.98) 100%);\n    border-left: 1px solid rgba(147, 112, 219, 0.2);\n    padding: 8px 0; /* Minimal padding - panel is at top of screen */\n    gap: 4px;\n}\n\n.lumiverse-vp-tab {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 52px;\n    height: 52px;\n    margin: 0 2px;\n    background: transparent;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-vp-tab:hover {\n    background: rgba(147, 112, 219, 0.15);\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-vp-tab--active {\n    background: rgba(147, 112, 219, 0.25);\n    color: var(--lumiverse-primary);\n    box-shadow: inset 2px 0 0 var(--lumiverse-primary);\n}\n\n.lumiverse-vp-tab-icon {\n    font-size: 18px;\n    line-height: 1;\n}\n\n.lumiverse-vp-tab-label {\n    font-size: 10px;\n    margin-top: 4px;\n    white-space: nowrap;\n    overflow: visible;\n    text-overflow: clip;\n    max-width: none;\n}\n\n.lumiverse-vp-tabs-spacer {\n    flex: 1;\n}\n\n.lumiverse-vp-collapse-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 52px;\n    height: 40px;\n    margin: 0 2px;\n    background: transparent;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    color: var(--lumiverse-text-muted);\n    font-size: 14px;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-vp-collapse-btn:hover {\n    background: rgba(147, 112, 219, 0.15);\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-vp-collapse-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.2s ease;\n}\n\n.lumiverse-vp-collapse-icon--rotated {\n    transform: rotate(180deg);\n}\n\n/* Main panel area */\n.lumiverse-vp-main {\n    display: flex;\n    flex-direction: column;\n    background: linear-gradient(180deg, rgba(28, 24, 38, 0.98) 0%, rgba(20, 17, 28, 0.98) 100%);\n    border-left: 1px solid rgba(147, 112, 219, 0.15);\n    overflow: hidden;\n}\n\n.lumiverse-vp-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 12px 16px;\n    background: rgba(147, 112, 219, 0.08);\n    border-bottom: 1px solid rgba(147, 112, 219, 0.15);\n    min-height: 48px;\n}\n\n.lumiverse-vp-header-icon {\n    font-size: 18px;\n}\n\n.lumiverse-vp-header-title {\n    flex: 1;\n    font-size: 14px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-vp-close-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 28px;\n    height: 28px;\n    background: transparent;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    color: var(--lumiverse-text-muted);\n    font-size: 14px;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-vp-close-btn:hover {\n    background: rgba(255, 100, 100, 0.2);\n    color: #ff6464;\n}\n\n.lumiverse-vp-content {\n    flex: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\n.lumiverse-vp-tab-content {\n    min-height: 100%;\n}\n\n/* Placeholder content */\n.lumiverse-vp-placeholder {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 40px 20px;\n    text-align: center;\n    min-height: 300px;\n}\n\n.lumiverse-vp-placeholder-icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n    opacity: 0.6;\n}\n\n.lumiverse-vp-placeholder h3 {\n    margin: 0 0 8px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-vp-placeholder p {\n    margin: 0 0 16px 0;\n    font-size: 13px;\n    color: var(--lumiverse-text-muted);\n    max-width: 240px;\n}\n\n.lumiverse-vp-placeholder-badge {\n    display: inline-block;\n    padding: 4px 12px;\n    background: rgba(147, 112, 219, 0.15);\n    border: 1px solid rgba(147, 112, 219, 0.3);\n    border-radius: 12px;\n    font-size: 11px;\n    font-weight: 600;\n    color: var(--lumiverse-primary);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n/* ----------------------------------------\n   Character Lumia Profile\n   ---------------------------------------- */\n.lumiverse-character-profile {\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n/* Profile Header */\n.lumiverse-profile-header {\n    display: flex;\n    align-items: center;\n    gap: 14px;\n    padding-bottom: 16px;\n    border-bottom: 1px solid rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-profile-avatar {\n    width: 56px;\n    height: 56px;\n    border-radius: 12px;\n    overflow: hidden;\n    background: rgba(147, 112, 219, 0.1);\n    flex-shrink: 0;\n    border: 2px solid rgba(147, 112, 219, 0.3);\n}\n\n.lumiverse-profile-avatar img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.lumiverse-profile-avatar-placeholder {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    font-size: 24px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-profile-info {\n    flex: 1;\n    min-width: 0;\n}\n\n.lumiverse-profile-name {\n    margin: 0 0 8px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-profile-stats {\n    display: flex;\n    gap: 12px;\n}\n\n.lumiverse-stat {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 4px 8px;\n    background: rgba(147, 112, 219, 0.08);\n    border-radius: 8px;\n    min-width: 50px;\n}\n\n.lumiverse-stat-value {\n    font-size: 16px;\n    font-weight: 700;\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-stat-label {\n    font-size: 9px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 1px;\n}\n\n/* Profile Sections */\n.lumiverse-profile-section {\n    background: rgba(147, 112, 219, 0.05);\n    border-radius: 10px;\n    padding: 12px;\n}\n\n.lumiverse-profile-section-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 10px;\n}\n\n.lumiverse-profile-section-icon {\n    font-size: 14px;\n}\n\n.lumiverse-profile-section-title {\n    font-size: 12px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--lumiverse-text-muted);\n    flex: 1;\n}\n\n.lumiverse-profile-section-count {\n    font-size: 11px;\n    font-weight: 600;\n    color: var(--lumiverse-primary);\n    background: rgba(147, 112, 219, 0.15);\n    padding: 2px 8px;\n    border-radius: 10px;\n}\n\n/* Trait Cards */\n.lumiverse-traits-list {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n\n.lumiverse-trait-card {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    border-radius: 8px;\n    border: 1px solid transparent;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-trait-card:hover {\n    transform: translateX(2px);\n}\n\n.lumiverse-trait-card--dominant {\n    box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.4), 0 2px 8px rgba(245, 158, 11, 0.15);\n}\n\n.lumiverse-trait-icon {\n    font-size: 14px;\n    flex-shrink: 0;\n}\n\n.lumiverse-trait-info {\n    flex: 1;\n    min-width: 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.lumiverse-trait-name {\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-trait-dominant-badge {\n    font-size: 10px;\n    font-weight: 600;\n    color: var(--lumiverse-warning);\n    background: rgba(245, 158, 11, 0.15);\n    padding: 2px 6px;\n    border-radius: 4px;\n    white-space: nowrap;\n}\n\n.lumiverse-trait-remove {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 22px;\n    height: 22px;\n    background: transparent;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    color: var(--lumiverse-text-muted);\n    font-size: 12px;\n    opacity: 0;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-trait-card:hover .lumiverse-trait-remove {\n    opacity: 1;\n}\n\n.lumiverse-trait-remove:hover {\n    background: rgba(239, 68, 68, 0.15);\n    color: var(--lumiverse-danger);\n}\n\n/* Empty Section */\n.lumiverse-profile-empty {\n    padding: 16px;\n    text-align: center;\n    color: var(--lumiverse-text-dim);\n    font-size: 12px;\n    font-style: italic;\n}\n\n/* Loom Summary */\n.lumiverse-loom-summary {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-loom-group {\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    font-size: 12px;\n}\n\n.lumiverse-loom-label {\n    font-weight: 600;\n    color: var(--lumiverse-text-muted);\n    flex-shrink: 0;\n    min-width: 60px;\n}\n\n.lumiverse-loom-items {\n    color: var(--lumiverse-text);\n    line-height: 1.4;\n}\n\n/* ----------------------------------------\n   Visual Pack Browser\n   ---------------------------------------- */\n.lumiverse-pack-browser {\n    padding: 12px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    height: 100%;\n}\n\n/* Stats Bar */\n.lumiverse-browser-stats {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px 12px;\n    background: rgba(147, 112, 219, 0.08);\n    border-radius: 10px;\n    gap: 8px;\n}\n\n.lumiverse-browser-stat {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    flex: 1;\n}\n\n.lumiverse-browser-stat-value {\n    font-size: 16px;\n    font-weight: 700;\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-browser-stat-label {\n    font-size: 9px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--lumiverse-text-muted);\n}\n\n/* Search */\n.lumiverse-pack-search {\n    display: flex;\n    align-items: center;\n    background: rgba(30, 30, 46, 0.8);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 8px;\n    padding: 0 12px;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-pack-search:focus-within {\n    border-color: var(--lumiverse-primary);\n    box-shadow: 0 0 0 2px rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-pack-search-icon {\n    font-size: 14px;\n    margin-right: 8px;\n    opacity: 0.6;\n}\n\n.lumiverse-pack-search-input {\n    flex: 1;\n    background: transparent;\n    border: none;\n    padding: 10px 0;\n    color: var(--lumiverse-text);\n    font-size: 13px;\n}\n\n.lumiverse-pack-search-input:focus {\n    outline: none;\n}\n\n.lumiverse-pack-search-input::placeholder {\n    color: var(--lumiverse-text-dim);\n}\n\n.lumiverse-pack-search-clear {\n    background: transparent;\n    border: none;\n    color: var(--lumiverse-text-muted);\n    cursor: pointer;\n    padding: 4px;\n    font-size: 12px;\n    opacity: 0.6;\n    transition: opacity 0.15s ease;\n}\n\n.lumiverse-pack-search-clear:hover {\n    opacity: 1;\n}\n\n/* Filter Tabs */\n.lumiverse-pack-filters {\n    display: flex;\n    gap: 4px;\n    padding: 4px;\n    background: rgba(30, 30, 46, 0.6);\n    border-radius: 8px;\n}\n\n.lumiverse-pack-filter {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 6px 4px;\n    background: transparent;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.15s ease;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-pack-filter:hover {\n    background: rgba(147, 112, 219, 0.1);\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-pack-filter--active {\n    background: rgba(147, 112, 219, 0.2);\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-pack-filter-icon {\n    font-size: 14px;\n    line-height: 1;\n}\n\n.lumiverse-pack-filter-label {\n    font-size: 9px;\n    margin-top: 2px;\n    white-space: nowrap;\n}\n\n/* Pack List */\n.lumiverse-browser-packs {\n    flex: 1;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-browser-pack {\n    background: rgba(30, 30, 46, 0.6);\n    border-radius: 10px;\n    overflow: hidden;\n    border: 1px solid rgba(147, 112, 219, 0.1);\n}\n\n/* Pack Header */\n.lumiverse-browser-pack-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    width: 100%;\n    padding: 10px 12px;\n    background: transparent;\n    border: none;\n    cursor: pointer;\n    transition: background 0.15s ease;\n    text-align: left;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-browser-pack-header:hover {\n    background: rgba(147, 112, 219, 0.08);\n}\n\n.lumiverse-browser-pack-header--expanded {\n    background: rgba(147, 112, 219, 0.1);\n    border-bottom: 1px solid rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-browser-pack-cover {\n    width: 36px;\n    height: 36px;\n    border-radius: 6px;\n    object-fit: cover;\n    flex-shrink: 0;\n}\n\n.lumiverse-browser-pack-cover-placeholder {\n    width: 36px;\n    height: 36px;\n    border-radius: 6px;\n    background: rgba(147, 112, 219, 0.15);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 18px;\n    flex-shrink: 0;\n}\n\n.lumiverse-browser-pack-info {\n    flex: 1;\n    min-width: 0;\n    display: flex;\n    flex-direction: column;\n}\n\n.lumiverse-browser-pack-name {\n    font-size: 13px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-browser-pack-meta {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 2px;\n}\n\n.lumiverse-browser-pack-custom-badge {\n    font-size: 9px;\n    font-weight: 600;\n    text-transform: uppercase;\n    color: var(--lumiverse-warning);\n    background: rgba(245, 158, 11, 0.15);\n    padding: 1px 4px;\n    border-radius: 3px;\n}\n\n.lumiverse-browser-pack-chevron {\n    font-size: 10px;\n    color: var(--lumiverse-text-muted);\n    transition: transform 0.2s ease;\n}\n\n.lumiverse-browser-pack-chevron--rotated {\n    transform: rotate(180deg);\n}\n\n/* Pack Items */\n.lumiverse-browser-pack-items {\n    overflow: hidden;\n}\n\n.lumiverse-browser-items-container {\n    padding: 8px 10px;\n}\n\n.lumiverse-browser-items-container::-webkit-scrollbar {\n    width: 6px;\n}\n\n.lumiverse-browser-items-container::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.lumiverse-browser-items-container::-webkit-scrollbar-thumb {\n    background: rgba(147, 112, 219, 0.3);\n    border-radius: 3px;\n}\n\n/* Item Card */\n.lumiverse-browser-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 8px 10px;\n    border-radius: 6px;\n    border: 1px solid transparent;\n    cursor: pointer;\n    transition: all 0.15s ease;\n}\n\n.lumiverse-browser-item:hover {\n    transform: translateX(2px);\n}\n\n.lumiverse-browser-item-image {\n    width: 32px;\n    height: 32px;\n    border-radius: 4px;\n    object-fit: cover;\n    flex-shrink: 0;\n}\n\n.lumiverse-browser-item-content {\n    flex: 1;\n    min-width: 0;\n}\n\n.lumiverse-browser-item-header {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n}\n\n.lumiverse-browser-item-icon {\n    font-size: 12px;\n}\n\n.lumiverse-browser-item-name {\n    font-size: 12px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.lumiverse-browser-item-desc {\n    margin: 2px 0 0 0;\n    font-size: 10px;\n    color: var(--lumiverse-text-muted);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n\n/* Empty States */\n.lumiverse-browser-empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 40px 20px;\n    text-align: center;\n}\n\n.lumiverse-browser-empty-icon {\n    font-size: 40px;\n    margin-bottom: 12px;\n    opacity: 0.5;\n}\n\n.lumiverse-browser-empty p {\n    margin: 0 0 4px 0;\n    font-size: 14px;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-browser-empty-hint {\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-browser-empty-items {\n    padding: 16px;\n    text-align: center;\n    color: var(--lumiverse-text-dim);\n    font-size: 12px;\n    font-style: italic;\n}\n\n/* ----------------------------------------\n   OOC Analytics Dashboard\n   ---------------------------------------- */\n.lumiverse-ooc-analytics {\n    padding: 12px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.lumiverse-analytics-section {\n    background: rgba(30, 30, 46, 0.6);\n    border-radius: 10px;\n    padding: 12px;\n}\n\n.lumiverse-analytics-section-title {\n    margin: 0 0 12px 0;\n    font-size: 11px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--lumiverse-text-muted);\n}\n\n/* Stats Grid */\n.lumiverse-analytics-stats-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 8px;\n}\n\n.lumiverse-analytics-stat {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    background: rgba(147, 112, 219, 0.08);\n    border-radius: 8px;\n    border: 1px solid rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-analytics-stat-icon {\n    font-size: 20px;\n    flex-shrink: 0;\n}\n\n.lumiverse-analytics-stat-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.lumiverse-analytics-stat-value {\n    font-size: 18px;\n    font-weight: 700;\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-analytics-stat-label {\n    font-size: 10px;\n    color: var(--lumiverse-text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.lumiverse-analytics-stat-trend {\n    font-size: 14px;\n    padding: 2px 6px;\n    border-radius: 4px;\n    background: rgba(147, 112, 219, 0.15);\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-analytics-stat-trend--up {\n    background: rgba(34, 197, 94, 0.15);\n    color: var(--lumiverse-success);\n}\n\n.lumiverse-analytics-stat-trend--down {\n    background: rgba(239, 68, 68, 0.15);\n    color: var(--lumiverse-danger);\n}\n\n/* Type Distribution */\n.lumiverse-analytics-distribution {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-analytics-bars {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.lumiverse-analytics-bar-item {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.lumiverse-analytics-bar-label {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 12px;\n}\n\n.lumiverse-analytics-bar-icon {\n    font-size: 12px;\n}\n\n.lumiverse-analytics-bar-name {\n    flex: 1;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-analytics-bar-count {\n    color: var(--lumiverse-text-muted);\n    font-weight: 600;\n}\n\n.lumiverse-analytics-bar-track {\n    height: 6px;\n    background: rgba(147, 112, 219, 0.1);\n    border-radius: 3px;\n    overflow: hidden;\n}\n\n.lumiverse-analytics-bar-fill {\n    height: 100%;\n    border-radius: 3px;\n    transition: width 0.5s ease-out;\n}\n\n/* Insights */\n.lumiverse-analytics-insights {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-analytics-insight {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    background: rgba(147, 112, 219, 0.05);\n    border-radius: 8px;\n}\n\n.lumiverse-analytics-insight-icon {\n    font-size: 18px;\n    flex-shrink: 0;\n}\n\n.lumiverse-analytics-insight-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.lumiverse-analytics-insight-title {\n    font-size: 10px;\n    color: var(--lumiverse-text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.lumiverse-analytics-insight-value {\n    font-size: 14px;\n    font-weight: 600;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-analytics-insight-desc {\n    font-size: 11px;\n    color: var(--lumiverse-text-dim);\n}\n\n/* Timeline */\n.lumiverse-analytics-timeline {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-analytics-comment {\n    display: flex;\n    align-items: flex-start;\n    gap: 10px;\n    padding: 8px 10px;\n    background: rgba(147, 112, 219, 0.05);\n    border-radius: 6px;\n    border-left: 2px solid var(--lumiverse-primary);\n}\n\n.lumiverse-analytics-comment-icon {\n    font-size: 14px;\n    flex-shrink: 0;\n    margin-top: 2px;\n}\n\n.lumiverse-analytics-comment-content {\n    flex: 1;\n    min-width: 0;\n}\n\n.lumiverse-analytics-comment-text {\n    margin: 0;\n    font-size: 12px;\n    color: var(--lumiverse-text);\n    line-height: 1.4;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n}\n\n.lumiverse-analytics-comment-time {\n    font-size: 10px;\n    color: var(--lumiverse-text-dim);\n}\n\n/* Quick Controls */\n.lumiverse-analytics-controls {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n/* Empty state */\n.lumiverse-analytics-empty {\n    padding: 20px;\n    text-align: center;\n    color: var(--lumiverse-text-dim);\n    font-size: 12px;\n    font-style: italic;\n}\n\n/* ----------------------------------------\n   Panel Toggle Button\n   ---------------------------------------- */\n.lumiverse-panel-toggle {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 8px 14px;\n    background: linear-gradient(135deg, rgba(147, 112, 219, 0.95) 0%, rgba(123, 88, 195, 0.95) 100%);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 20px;\n    cursor: pointer;\n    box-shadow: 0 4px 12px rgba(147, 112, 219, 0.4), 0 0 20px rgba(147, 112, 219, 0.2);\n    white-space: nowrap;\n}\n\n.lumiverse-panel-toggle:hover {\n    box-shadow: 0 6px 16px rgba(147, 112, 219, 0.5), 0 0 30px rgba(147, 112, 219, 0.3);\n    transform: scale(1.05);\n}\n\n.lumiverse-panel-toggle--active {\n    background: linear-gradient(135deg, rgba(100, 80, 180, 0.95) 0%, rgba(80, 60, 160, 0.95) 100%);\n    /* Position is now controlled by transform (x) for sync with panel animation */\n}\n\n.lumiverse-panel-toggle-icon {\n    font-size: 16px;\n    line-height: 1;\n}\n\n.lumiverse-panel-toggle-label {\n    font-size: 12px;\n    font-weight: 600;\n    color: white;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n/* ----------------------------------------\n   Viewport Panel - Settings Panels\n   ---------------------------------------- */\n\n/* General settings panel styles */\n.lumiverse-vp-settings-panel {\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.lumiverse-vp-settings-section {\n    background: rgba(147, 112, 219, 0.05);\n    border: 1px solid rgba(147, 112, 219, 0.15);\n    border-radius: 10px;\n    padding: 14px;\n}\n\n.lumiverse-vp-settings-section-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 10px;\n    color: var(--lumiverse-text);\n    font-weight: 600;\n    font-size: 13px;\n}\n\n.lumiverse-vp-settings-desc {\n    font-size: 12px;\n    color: var(--lumiverse-text-muted);\n    margin: 0 0 12px 0;\n    line-height: 1.4;\n}\n\n/* Toggle row */\n.lumiverse-vp-toggle-row {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    padding: 8px 0;\n    gap: 12px;\n}\n\n.lumiverse-vp-toggle-label {\n    flex: 1;\n    cursor: pointer;\n}\n\n.lumiverse-vp-toggle-text {\n    display: block;\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-vp-toggle-hint {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    margin-top: 2px;\n}\n\n.lumiverse-vp-toggle-switch-wrapper {\n    flex-shrink: 0;\n}\n\n.lumiverse-vp-toggle-input {\n    display: none !important;\n    position: absolute !important;\n    opacity: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n    pointer-events: none !important;\n}\n\n.lumiverse-vp-toggle-track {\n    position: relative;\n    width: 40px;\n    height: 22px;\n    background: var(--lumiverse-secondary);\n    border-radius: 11px;\n    cursor: pointer;\n    transition: background 0.2s ease;\n}\n\n.lumiverse-vp-toggle-track--on {\n    background: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-toggle-thumb {\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    width: 18px;\n    height: 18px;\n    background: white;\n    border-radius: 50%;\n    transition: transform 0.2s ease;\n}\n\n.lumiverse-vp-toggle-track--on .lumiverse-vp-toggle-thumb {\n    transform: translateX(18px);\n}\n\n/* Field input */\n.lumiverse-vp-field {\n    margin-bottom: 12px;\n}\n\n.lumiverse-vp-field--inline {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 8px;\n}\n\n.lumiverse-vp-field-label {\n    display: block;\n    font-size: 12px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n    margin-bottom: 6px;\n}\n\n.lumiverse-vp-field--inline .lumiverse-vp-field-label {\n    margin-bottom: 0;\n    flex: 1;\n}\n\n.lumiverse-vp-field-input {\n    width: 100%;\n    padding: 8px 12px;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: 6px;\n    color: var(--lumiverse-text);\n    font-size: 13px;\n    transition: border-color 0.2s ease;\n}\n\n.lumiverse-vp-field-input:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-field-input--small {\n    width: 70px;\n    text-align: center;\n}\n\n.lumiverse-vp-field-hint {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-text-dim);\n    margin-top: 4px;\n}\n\n.lumiverse-vp-field--inline .lumiverse-vp-field-hint {\n    flex-basis: 100%;\n}\n\n/* Style options (radio buttons) */\n.lumiverse-vp-style-options {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.lumiverse-vp-style-option {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-vp-style-option:hover {\n    border-color: var(--lumiverse-border-light);\n    background: var(--lumiverse-bg-hover);\n}\n\n.lumiverse-vp-style-option--selected {\n    border-color: var(--lumiverse-primary);\n    background: rgba(147, 112, 219, 0.1);\n}\n\n.lumiverse-vp-style-option input[type="radio"] {\n    display: none !important;\n    position: absolute !important;\n    opacity: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n    pointer-events: none !important;\n}\n\n.lumiverse-vp-style-option-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    background: rgba(147, 112, 219, 0.15);\n    border-radius: 6px;\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-style-option-text {\n    flex: 1;\n}\n\n.lumiverse-vp-style-option-title {\n    display: block;\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n.lumiverse-vp-style-option-desc {\n    display: block;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n}\n\n/* Save button */\n.lumiverse-vp-save-btn {\n    width: 100%;\n    padding: 10px 16px;\n    background: var(--lumiverse-primary);\n    border: none;\n    border-radius: 8px;\n    color: white;\n    font-size: 13px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: background 0.2s ease;\n}\n\n.lumiverse-vp-save-btn:hover {\n    background: var(--lumiverse-primary-hover);\n}\n\n/* Collapsible sections */\n.lumiverse-vp-collapsible {\n    background: rgba(147, 112, 219, 0.05);\n    border: 1px solid rgba(147, 112, 219, 0.15);\n    border-radius: 10px;\n    overflow: hidden;\n}\n\n.lumiverse-vp-collapsible-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    width: 100%;\n    padding: 12px 14px;\n    background: transparent;\n    border: none;\n    cursor: pointer;\n    color: var(--lumiverse-text);\n    font-size: 13px;\n    font-weight: 600;\n    text-align: left;\n    transition: background 0.2s ease;\n}\n\n.lumiverse-vp-collapsible-header:hover {\n    background: rgba(147, 112, 219, 0.08);\n}\n\n.lumiverse-vp-collapsible-chevron {\n    display: flex;\n    color: var(--lumiverse-text-muted);\n    transition: transform 0.2s ease;\n}\n\n.lumiverse-vp-collapsible-chevron--open {\n    transform: rotate(180deg);\n}\n\n.lumiverse-vp-collapsible-icon {\n    display: flex;\n    color: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-collapsible-title {\n    flex: 1;\n}\n\n.lumiverse-vp-collapsible-status {\n    padding: 2px 8px;\n    background: rgba(100, 100, 100, 0.2);\n    border-radius: 10px;\n    font-size: 10px;\n    font-weight: 600;\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-vp-collapsible-status--active {\n    background: rgba(34, 197, 94, 0.2);\n    color: var(--lumiverse-success);\n}\n\n.lumiverse-vp-collapsible-content {\n    overflow: hidden;\n}\n\n.lumiverse-vp-collapsible-inner {\n    padding: 0 14px 14px 14px;\n}\n\n/* Info box */\n.lumiverse-vp-info-box {\n    background: rgba(147, 112, 219, 0.08);\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 8px;\n    padding: 12px;\n    margin-top: 12px;\n}\n\n.lumiverse-vp-info-box--muted {\n    opacity: 0.5;\n}\n\n.lumiverse-vp-info-box-header {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 11px;\n    font-weight: 600;\n    color: var(--lumiverse-primary);\n    margin-bottom: 8px;\n}\n\n.lumiverse-vp-info-box-list {\n    margin: 0;\n    padding: 0 0 0 16px;\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    line-height: 1.5;\n}\n\n.lumiverse-vp-info-box-list code {\n    background: rgba(147, 112, 219, 0.15);\n    padding: 1px 4px;\n    border-radius: 3px;\n    font-size: 10px;\n}\n\n/* Filter items */\n.lumiverse-vp-filter-item {\n    padding: 8px 0;\n    border-bottom: 1px solid rgba(147, 112, 219, 0.1);\n}\n\n.lumiverse-vp-filter-item:last-child {\n    border-bottom: none;\n}\n\n.lumiverse-vp-filter-options {\n    padding: 8px 0 0 24px;\n    overflow: hidden;\n}\n\n.lumiverse-vp-filter-sub {\n    padding-left: 16px;\n    border-left: 2px solid rgba(147, 112, 219, 0.2);\n    margin-left: 8px;\n}\n\n/* ----------------------------------------\n   Viewport Panel - Summary Editor\n   ---------------------------------------- */\n.lumiverse-vp-summary-editor {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    padding: 12px;\n    gap: 12px;\n}\n\n.lumiverse-vp-summary-status {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 10px 12px;\n    border-radius: 8px;\n    font-size: 12px;\n    font-weight: 500;\n}\n\n.lumiverse-vp-summary-status--exists {\n    background: rgba(34, 197, 94, 0.1);\n    border: 1px solid rgba(34, 197, 94, 0.3);\n    color: var(--lumiverse-success);\n}\n\n.lumiverse-vp-summary-status--empty {\n    background: rgba(245, 158, 11, 0.1);\n    border: 1px solid rgba(245, 158, 11, 0.3);\n    color: var(--lumiverse-warning);\n}\n\n.lumiverse-vp-summary-status--no-chat {\n    background: rgba(100, 100, 100, 0.1);\n    border: 1px solid rgba(100, 100, 100, 0.3);\n    color: var(--lumiverse-text-muted);\n}\n\n.lumiverse-vp-summary-textarea-wrapper {\n    flex: 1;\n    min-height: 200px;\n}\n\n.lumiverse-vp-summary-textarea {\n    width: 100%;\n    height: 100%;\n    min-height: 200px;\n    padding: 12px;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: 8px;\n    color: var(--lumiverse-text);\n    font-size: 12px;\n    font-family: inherit;\n    line-height: 1.5;\n    resize: none;\n    transition: border-color 0.2s ease;\n}\n\n.lumiverse-vp-summary-textarea:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-summary-textarea::placeholder {\n    color: var(--lumiverse-text-dim);\n}\n\n.lumiverse-vp-summary-textarea:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.lumiverse-vp-summary-actions {\n    display: flex;\n    gap: 10px;\n    justify-content: center;\n}\n\n.lumiverse-vp-action-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 6px;\n    padding: 8px 12px;\n    border: none;\n    border-radius: 6px;\n    font-size: 12px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n/* Icon-only button mode */\n.lumiverse-vp-action-btn--icon-only {\n    padding: 10px 12px;\n    min-width: 44px;\n    width: 44px;\n    height: 40px;\n    flex: 1;\n    max-width: 56px;\n}\n\n.lumiverse-vp-action-btn--secondary {\n    background: var(--lumiverse-bg-elevated);\n    color: var(--lumiverse-text);\n    border: 1px solid var(--lumiverse-border);\n}\n\n.lumiverse-vp-action-btn--secondary:hover {\n    background: var(--lumiverse-bg-hover);\n}\n\n.lumiverse-vp-action-btn--primary {\n    background: var(--lumiverse-primary);\n    color: white;\n}\n\n.lumiverse-vp-action-btn--primary:hover {\n    background: var(--lumiverse-primary-hover);\n}\n\n.lumiverse-vp-action-btn--danger {\n    background: transparent;\n    color: var(--lumiverse-danger);\n    border: 1px solid var(--lumiverse-danger);\n}\n\n.lumiverse-vp-action-btn--danger:hover {\n    background: rgba(239, 68, 68, 0.1);\n}\n\n.lumiverse-vp-action-btn--disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n}\n\n.lumiverse-vp-summary-unsaved {\n    text-align: center;\n    font-size: 11px;\n    color: var(--lumiverse-warning);\n    padding: 4px;\n}\n\n/* Action button spinner */\n.lumiverse-vp-action-btn-spinner {\n    width: 14px;\n    height: 14px;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    border-top-color: white;\n    border-radius: 50%;\n    animation: lumiverse-spin 0.8s linear infinite;\n}\n\n.lumiverse-vp-action-btn--icon-only .lumiverse-vp-action-btn-spinner {\n    width: 16px;\n    height: 16px;\n}\n\n@keyframes lumiverse-spin {\n    to { transform: rotate(360deg); }\n}\n\n/* Summary config section */\n.lumiverse-vp-summary-config {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n/* Radio group */\n.lumiverse-vp-radio-group {\n    display: flex;\n    gap: 8px;\n    flex-wrap: wrap;\n}\n\n.lumiverse-vp-radio-group--wide .lumiverse-vp-radio-option {\n    flex: 1;\n    min-width: 100px;\n}\n\n.lumiverse-vp-radio-option {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 8px 14px;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.lumiverse-vp-radio-option:hover {\n    border-color: var(--lumiverse-border-hover);\n    background: var(--lumiverse-bg-hover);\n}\n\n.lumiverse-vp-radio-option--selected {\n    border-color: var(--lumiverse-primary);\n    background: rgba(147, 112, 219, 0.15);\n}\n\n.lumiverse-vp-radio-option input[type="radio"] {\n    display: none !important;\n    position: absolute !important;\n    opacity: 0 !important;\n    width: 0 !important;\n    height: 0 !important;\n    pointer-events: none !important;\n}\n\n.lumiverse-vp-radio-option-label {\n    font-size: 12px;\n    font-weight: 500;\n    color: var(--lumiverse-text);\n}\n\n/* Field rows */\n.lumiverse-vp-field-row {\n    display: flex;\n    gap: 12px;\n}\n\n.lumiverse-vp-field-row .lumiverse-vp-field {\n    flex: 1;\n}\n\n.lumiverse-vp-field-row--3 .lumiverse-vp-field {\n    flex: 1;\n    min-width: 0;\n}\n\n/* Select field */\n.lumiverse-vp-field-select {\n    width: 100%;\n    padding: 8px 12px;\n    background: var(--lumiverse-bg);\n    border: 1px solid var(--lumiverse-border);\n    border-radius: 6px;\n    color: var(--lumiverse-text);\n    font-size: 12px;\n    cursor: pointer;\n    transition: border-color 0.2s ease;\n    appearance: none;\n    background-image: url(${d});\n    background-repeat: no-repeat;\n    background-position: right 10px center;\n    padding-right: 30px;\n}\n\n.lumiverse-vp-field-select:focus {\n    outline: none;\n    border-color: var(--lumiverse-primary);\n}\n\n.lumiverse-vp-field-select option {\n    background: var(--lumiverse-bg);\n    color: var(--lumiverse-text);\n}\n\n/* Warning box */\n.lumiverse-vp-warning-box {\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    padding: 10px 12px;\n    margin-top: 10px;\n    background: rgba(245, 158, 11, 0.1);\n    border: 1px solid rgba(245, 158, 11, 0.3);\n    border-radius: 6px;\n    font-size: 11px;\n    color: var(--lumiverse-warning);\n    line-height: 1.4;\n}\n\n.lumiverse-vp-warning-box svg {\n    flex-shrink: 0;\n    margin-top: 1px;\n}\n\n/* Settings description */\n.lumiverse-vp-settings-desc {\n    font-size: 11px;\n    color: var(--lumiverse-text-muted);\n    margin: 8px 0 0 0;\n    line-height: 1.4;\n}\n\n/* ============================================\n   LUMIA MODAL SYSTEM\n   Card-based selection modal design\n   ============================================ */\n\n/* Modal Backdrop */\n.lumia-modal-backdrop {\n    position: fixed;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 9998;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    animation: lumia-backdrop-fadein 0.15s ease-out;\n}\n\n@keyframes lumia-backdrop-fadein {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n/* Modal Container */\n.lumia-modal {\n    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;\n    background: linear-gradient(\n        165deg,\n        rgba(22, 18, 32, 0.98) 0%,\n        rgba(28, 24, 40, 0.98) 100%\n    );\n    border: 1px solid rgba(147, 112, 219, 0.2);\n    border-radius: 16px;\n    box-shadow:\n        0 24px 80px rgba(0, 0, 0, 0.5),\n        0 0 1px rgba(147, 112, 219, 0.3);\n    padding: 0;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    max-height: 85vh;\n    max-height: 85dvh;\n    height: auto;\n    width: 90vw;\n    max-width: 600px;\n    z-index: 9999;\n}\n\n/* Selection Modal Variant (wider for cards) */\n.lumia-modal-selection {\n    max-width: 700px;\n}\n\n/* Settings Modal Variant */\n.lumia-modal-settings {\n    max-width: 520px;\n}\n\n/* Modal Selection Content Wrapper */\n.lumia-modal-selection-content {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    max-height: 85vh;\n}\n\n/* Modal Header - Inner (for modals with custom headers) */\n.lumia-modal-header-inner {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 18px 20px;\n    background: linear-gradient(\n        180deg,\n        rgba(147, 112, 219, 0.1) 0%,\n        transparent 100%\n    );\n    border-bottom: 1px solid rgba(147, 112, 219, 0.12);\n    flex-shrink: 0;\n}\n\n.lumia-modal-header-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 36px;\n    height: 36px;\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.2) 0%,\n        rgba(147, 112, 219, 0.1) 100%\n    );\n    border-radius: 10px;\n    border: 1px solid rgba(147, 112, 219, 0.2);\n}\n\n.lumia-modal-header-icon svg {\n    width: 20px;\n    height: 20px;\n    stroke: rgba(186, 135, 255, 0.9);\n}\n\n.lumia-modal-header-text {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n    flex: 1;\n    min-width: 0;\n}\n\n.lumia-modal-title {\n    font-size: 17px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.95);\n    letter-spacing: -0.2px;\n    margin: 0;\n    padding: 0;\n}\n\n.lumia-modal-subtitle {\n    font-size: 12px;\n    font-weight: 400;\n    color: rgba(255, 255, 255, 0.5);\n    margin: 0;\n    letter-spacing: 0.1px;\n}\n\n/* Clear Button */\n.lumia-clear-btn {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 8px 14px;\n    background: rgba(128, 128, 128, 0.1);\n    border: 1px solid rgba(128, 128, 128, 0.25);\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    font-family: inherit;\n    font-size: 12px;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 0.7);\n    flex-shrink: 0;\n    margin-left: auto;\n}\n\n.lumia-clear-btn svg {\n    width: 16px;\n    height: 16px;\n    stroke: rgba(255, 255, 255, 0.6);\n}\n\n.lumia-clear-btn:hover {\n    background: rgba(244, 67, 54, 0.15);\n    border-color: rgba(244, 67, 54, 0.4);\n    color: rgba(244, 67, 54, 0.95);\n}\n\n.lumia-clear-btn:hover svg {\n    stroke: rgba(244, 67, 54, 0.95);\n}\n\n/* Modal Content Area */\n.lumia-modal-content {\n    padding: 20px;\n    display: block;\n    flex: 1 1 auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    min-height: 0;\n}\n\n.lumia-modal-content > * + * {\n    margin-top: 16px;\n}\n\n/* Custom scrollbar for modal content */\n.lumia-modal-content::-webkit-scrollbar {\n    width: 8px;\n}\n\n.lumia-modal-content::-webkit-scrollbar-track {\n    background: rgba(0, 0, 0, 0.2);\n    border-radius: 4px;\n}\n\n.lumia-modal-content::-webkit-scrollbar-thumb {\n    background: rgba(147, 112, 219, 0.3);\n    border-radius: 4px;\n}\n\n.lumia-modal-content::-webkit-scrollbar-thumb:hover {\n    background: rgba(147, 112, 219, 0.5);\n}\n\n/* Modal Panel */\n.lumia-modal-panel {\n    background: rgba(0, 0, 0, 0.2);\n    border: 1px solid rgba(128, 128, 128, 0.12);\n    border-radius: 12px;\n    overflow: visible;\n}\n\n.lumia-modal-panel-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 12px 14px;\n    background: rgba(255, 255, 255, 0.02);\n    border-bottom: 1px solid rgba(128, 128, 128, 0.08);\n}\n\n.lumia-modal-panel-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 18px;\n    height: 18px;\n}\n\n.lumia-modal-panel-icon svg {\n    width: 16px;\n    height: 16px;\n    stroke: rgba(147, 112, 219, 0.7);\n}\n\n.lumia-modal-panel-title {\n    font-size: 12px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.8);\n    letter-spacing: 0.1px;\n}\n\n.lumia-modal-panel-count {\n    font-size: 11px;\n    font-weight: 500;\n    color: rgba(147, 112, 219, 0.7);\n    background: rgba(147, 112, 219, 0.1);\n    padding: 4px 8px;\n    border-radius: 10px;\n    flex-shrink: 0;\n}\n\n.lumia-modal-panel-content {\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 14px;\n}\n\n.lumia-modal-panel-content-cards {\n    padding: 12px;\n}\n\n/* Modal Empty State */\n.lumia-modal-empty {\n    padding: 40px 20px;\n    text-align: center;\n    color: rgba(255, 255, 255, 0.4);\n    font-size: 14px;\n}\n\n/* Modal Footer */\n.lumia-modal-footer {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    padding: 16px 20px;\n    background: rgba(0, 0, 0, 0.15);\n    border-top: 1px solid rgba(128, 128, 128, 0.1);\n    flex-shrink: 0;\n    margin-top: auto;\n}\n\n/* Modal Buttons */\n.lumia-modal-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 8px;\n    font-size: 13px;\n    font-weight: 500;\n    font-family: inherit;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.lumia-modal-btn svg {\n    width: 16px;\n    height: 16px;\n}\n\n.lumia-modal-btn-primary {\n    background: linear-gradient(\n        135deg,\n        rgba(147, 112, 219, 0.9) 0%,\n        rgba(123, 95, 196, 0.9) 100%\n    );\n    color: white;\n}\n\n.lumia-modal-btn-primary:hover {\n    background: linear-gradient(\n        135deg,\n        rgba(167, 132, 239, 0.95) 0%,\n        rgba(143, 115, 216, 0.95) 100%\n    );\n    transform: translateY(-1px);\n}\n\n.lumia-modal-btn-secondary {\n    background: rgba(128, 128, 128, 0.15);\n    border: 1px solid rgba(128, 128, 128, 0.2);\n    color: rgba(255, 255, 255, 0.75);\n}\n\n.lumia-modal-btn-secondary:hover {\n    background: rgba(128, 128, 128, 0.25);\n    color: rgba(255, 255, 255, 0.9);\n}\n\n/* Collapsible Panel Styles */\n.lumia-collapsible-trigger {\n    cursor: pointer;\n    user-select: none;\n}\n\n.lumia-panel-collapse-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 16px;\n    height: 16px;\n    flex-shrink: 0;\n    transition: transform 0.2s ease;\n}\n\n.lumia-panel-collapse-icon svg {\n    width: 14px;\n    height: 14px;\n    stroke: rgba(255, 255, 255, 0.4);\n}\n\n.lumia-collapsible.collapsed .lumia-panel-collapse-icon {\n    transform: rotate(-90deg);\n}\n\n.lumia-collapsible-content {\n    display: grid;\n    grid-template-rows: 1fr;\n    transition:\n        grid-template-rows 0.25s ease,\n        opacity 0.2s ease,\n        padding 0.25s ease;\n    opacity: 1;\n}\n\n.lumia-collapsible-content > * {\n    overflow: hidden;\n}\n\n.lumia-collapsible.collapsed .lumia-collapsible-content {\n    grid-template-rows: 0fr;\n    opacity: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n}\n\n/* Custom Pack Badge */\n.lumia-pack-badge-custom {\n    font-size: 10px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: rgba(147, 112, 219, 0.9);\n    background: rgba(147, 112, 219, 0.15);\n    padding: 3px 8px;\n    border-radius: 6px;\n    border: 1px solid rgba(147, 112, 219, 0.25);\n}\n\n/* Icon Button Small */\n.lumia-icon-btn-sm {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 28px;\n    height: 28px;\n    padding: 0;\n    background: transparent;\n    border: 1px solid transparent;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    margin-left: auto;\n}\n\n.lumia-icon-btn-sm svg {\n    width: 16px;\n    height: 16px;\n    stroke: rgba(255, 255, 255, 0.4);\n}\n\n.lumia-icon-btn-sm:hover {\n    background: rgba(244, 67, 54, 0.15);\n    border-color: rgba(244, 67, 54, 0.3);\n}\n\n.lumia-icon-btn-sm:hover svg {\n    stroke: rgba(244, 67, 54, 0.9);\n}\n\n/* ============================================\n   LUMIA CARD GRID & CARDS\n   ============================================ */\n\n.lumia-card-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 16px;\n    padding: 4px;\n}\n\n.lumia-card {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    background: linear-gradient(\n        165deg,\n        rgba(28, 24, 38, 0.95) 0%,\n        rgba(38, 32, 52, 0.9) 50%,\n        rgba(32, 28, 45, 0.95) 100%\n    );\n    border: 1px solid rgba(128, 128, 128, 0.15);\n    border-radius: 16px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.lumia-card:hover {\n    transform: translateY(-4px);\n    border-color: rgba(147, 112, 219, 0.3);\n    box-shadow:\n        0 8px 24px rgba(0, 0, 0, 0.25),\n        0 0 0 1px rgba(147, 112, 219, 0.15);\n}\n\n.lumia-card.selected {\n    border-color: rgba(100, 149, 237, 0.6);\n    box-shadow:\n        0 4px 16px rgba(100, 149, 237, 0.2),\n        0 0 0 1px rgba(100, 149, 237, 0.3),\n        inset 0 0 20px rgba(100, 149, 237, 0.05);\n}\n\n.lumia-card.selected::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 2px;\n    background: linear-gradient(\n        90deg,\n        transparent 0%,\n        rgba(100, 149, 237, 0.5) 20%,\n        rgba(100, 149, 237, 0.8) 50%,\n        rgba(100, 149, 237, 0.5) 80%,\n        transparent 100%\n    );\n}\n\n/* Card Image Container */\n.lumia-card-image {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 1 / 1;\n    background: linear-gradient(\n        135deg,\n        rgba(20, 16, 28, 0.8) 0%,\n        rgba(40, 32, 55, 0.6) 100%\n    );\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n}\n\n.lumia-card-image img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease, opacity 0.3s ease;\n    opacity: 0;\n}\n\n.lumia-card-image img.lumia-img-loaded {\n    opacity: 1;\n}\n\n.lumia-card:hover .lumia-card-image img {\n    transform: scale(1.05);\n}\n\n.lumia-card-placeholder {\n    font-size: 48px;\n    font-weight: 300;\n    color: rgba(147, 112, 219, 0.4);\n    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;\n    user-select: none;\n}\n\n/* Image Loading Spinner */\n.lumia-img-spinner {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 24px;\n    height: 24px;\n    border: 2px solid rgba(147, 112, 219, 0.2);\n    border-top-color: rgba(147, 112, 219, 0.7);\n    border-radius: 50%;\n    animation: lumia-spin 0.8s linear infinite;\n}\n\n@keyframes lumia-spin {\n    to { transform: translate(-50%, -50%) rotate(360deg); }\n}\n\n.lumia-card-image:has(.lumia-img-loaded) .lumia-img-spinner {\n    display: none;\n}\n\n/* Dominant Star Icon */\n.lumia-dominant-icon {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(8px);\n    -webkit-backdrop-filter: blur(8px);\n    border-radius: 50%;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    cursor: pointer;\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n    z-index: 10;\n    opacity: 0;\n}\n\n.lumia-card:hover .lumia-dominant-icon,\n.lumia-card.selected .lumia-dominant-icon {\n    opacity: 1;\n}\n\n.lumia-dominant-icon:hover {\n    background: rgba(0, 0, 0, 0.7);\n    border-color: rgba(255, 193, 7, 0.4);\n    transform: scale(1.1);\n}\n\n.lumia-dominant-icon.dominant {\n    opacity: 1;\n    background: linear-gradient(\n        135deg,\n        rgba(255, 193, 7, 0.9) 0%,\n        rgba(255, 152, 0, 0.9) 100%\n    );\n    border-color: rgba(255, 193, 7, 0.6);\n    box-shadow: 0 2px 12px rgba(255, 193, 7, 0.4);\n}\n\n.lumia-dominant-icon svg {\n    width: 18px;\n    height: 18px;\n    fill: none;\n    stroke: rgba(255, 255, 255, 0.7);\n    stroke-width: 2;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    transition: all 0.25s ease;\n}\n\n.lumia-dominant-icon:hover svg {\n    stroke: rgba(255, 193, 7, 0.9);\n}\n\n.lumia-dominant-icon.dominant svg {\n    fill: rgba(255, 255, 255, 0.95);\n    stroke: rgba(255, 255, 255, 0.95);\n}\n\n/* Edit Icon for custom pack items */\n.lumia-edit-icon {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    width: 28px;\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(147, 112, 219, 0.85);\n    backdrop-filter: blur(8px);\n    -webkit-backdrop-filter: blur(8px);\n    border-radius: 50%;\n    border: 1px solid rgba(147, 112, 219, 0.4);\n    cursor: pointer;\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n    z-index: 10;\n    opacity: 0;\n}\n\n.lumia-card:hover .lumia-edit-icon {\n    opacity: 1;\n}\n\n.lumia-edit-icon:hover {\n    background: rgba(147, 112, 219, 1);\n    border-color: rgba(186, 135, 255, 0.6);\n    transform: scale(1.1);\n    box-shadow: 0 2px 12px rgba(147, 112, 219, 0.4);\n}\n\n.lumia-edit-icon svg {\n    width: 14px;\n    height: 14px;\n    fill: none;\n    stroke: rgba(255, 255, 255, 0.95);\n    stroke-width: 2;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n}\n\n/* Selection Checkmark Overlay */\n.lumia-card-check {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    width: 28px;\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(100, 149, 237, 0.9);\n    border-radius: 50%;\n    opacity: 0;\n    transform: scale(0.5);\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n    z-index: 10;\n}\n\n.lumia-card.selected .lumia-card-check {\n    opacity: 1;\n    transform: scale(1);\n}\n\n.lumia-card-check svg {\n    width: 16px;\n    height: 16px;\n    fill: none;\n    stroke: white;\n    stroke-width: 2.5;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n}\n\n/* Card Info Section */\n.lumia-card-info {\n    padding: 14px 16px 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    background: linear-gradient(\n        180deg,\n        rgba(28, 24, 38, 0) 0%,\n        rgba(28, 24, 38, 0.95) 20%\n    );\n}\n\n.lumia-card-name {\n    font-size: 15px;\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.95);\n    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;\n    letter-spacing: -0.2px;\n    line-height: 1.3;\n    word-break: break-word;\n}\n\n/* Definition Card Variant (no dominant icon) */\n.lumia-card.definition-card .lumia-dominant-icon {\n    display: none;\n}\n\n/* Card Appear Animation */\n.lumia-card.lumia-card-appear {\n    animation: lumia-card-appear 0.3s ease-out forwards;\n    opacity: 0;\n}\n\n@keyframes lumia-card-appear {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/* Staggered animation delays */\n.lumia-card.lumia-card-appear:nth-child(1) { animation-delay: 0ms; }\n.lumia-card.lumia-card-appear:nth-child(2) { animation-delay: 30ms; }\n.lumia-card.lumia-card-appear:nth-child(3) { animation-delay: 60ms; }\n.lumia-card.lumia-card-appear:nth-child(4) { animation-delay: 90ms; }\n.lumia-card.lumia-card-appear:nth-child(5) { animation-delay: 120ms; }\n.lumia-card.lumia-card-appear:nth-child(6) { animation-delay: 150ms; }\n.lumia-card.lumia-card-appear:nth-child(7) { animation-delay: 180ms; }\n.lumia-card.lumia-card-appear:nth-child(8) { animation-delay: 210ms; }\n.lumia-card.lumia-card-appear:nth-child(9) { animation-delay: 240ms; }\n.lumia-card.lumia-card-appear:nth-child(10) { animation-delay: 270ms; }\n.lumia-card.lumia-card-appear:nth-child(n+11) { animation-delay: 300ms; }\n\n/* ============================================\n   LUMIA MODAL RESPONSIVE\n   ============================================ */\n\n@media (max-width: 600px) {\n    .lumia-modal {\n        width: 100%;\n        max-width: none;\n        max-height: 100vh;\n        max-height: 100dvh;\n        border-radius: 0;\n        margin: 0;\n    }\n\n    .lumia-modal-selection {\n        max-width: none;\n    }\n\n    .lumia-modal-header-inner {\n        padding: 14px 16px;\n        gap: 10px;\n    }\n\n    .lumia-modal-header-icon {\n        width: 32px;\n        height: 32px;\n    }\n\n    .lumia-modal-title {\n        font-size: 15px;\n    }\n\n    .lumia-modal-content {\n        padding: 12px;\n    }\n\n    .lumia-modal-content > * + * {\n        margin-top: 12px;\n    }\n\n    .lumia-modal-panel-content {\n        padding: 10px;\n    }\n\n    .lumia-modal-footer {\n        padding: 12px 16px;\n    }\n\n    .lumia-modal-btn {\n        padding: 10px 16px;\n        font-size: 13px;\n    }\n\n    .lumia-card-grid {\n        grid-template-columns: repeat(2, 1fr);\n        gap: 12px;\n    }\n\n    .lumia-card {\n        border-radius: 12px;\n    }\n\n    .lumia-card-info {\n        padding: 10px 12px 12px;\n    }\n\n    .lumia-card-name {\n        font-size: 13px;\n    }\n\n    .lumia-card-check {\n        width: 24px;\n        height: 24px;\n    }\n\n    .lumia-card-check svg {\n        width: 14px;\n        height: 14px;\n    }\n\n    .lumia-card-placeholder {\n        font-size: 36px;\n    }\n\n    /* Disable animations on mobile for performance */\n    .lumia-card,\n    .lumia-card-image img,\n    .lumia-dominant-icon,\n    .lumia-card-check {\n        transition: none !important;\n    }\n\n    .lumia-card:hover {\n        transform: none;\n    }\n\n    .lumia-card:hover .lumia-card-image img {\n        transform: none;\n    }\n}\n`,""]);const m=c},287:(e,n)=>{var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,v={};function g(e,n,t){this.props=e,this.context=n,this.refs=v,this.updater=t||h}function x(){}function b(e,n,t){this.props=e,this.context=n,this.refs=v,this.updater=t||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,n){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var y=b.prototype=new x;y.constructor=b,f(y,g.prototype),y.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function C(e,n,r){var i,a={},o=null,s=null;if(null!=n)for(i in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(o=""+n.key),n)w.call(n,i)&&!j.hasOwnProperty(i)&&(a[i]=n[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:t,type:e,key:o,ref:s,props:a,_owner:S.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var N=/\/+/g;function E(e,n){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return n[e]})}(""+e.key):n.toString(36)}function M(e,n,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case t:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,k(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),M(o,n,i,"",function(e){return e})):null!=o&&(P(o)&&(o=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),n.push(o)),1;if(l=0,a=""===a?".":a+":",k(e))for(var u=0;u<e.length;u++){var c=a+E(s=e[u],u);l+=M(s,n,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=M(s=s.value,n,i,c=a+E(s,u++),o);else if("object"===s)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,n,t){if(null==e)return e;var r=[],i=0;return M(e,r,"","",function(e){return n.call(t,e,i++)}),r}function L(e){if(-1===e._status){var n=e._result;(n=n()).then(function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)},function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)}),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},z={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:z,ReactCurrentOwner:S};function A(){throw Error("act(...) is not supported in production builds of React.")}n.Children={map:T,forEach:function(e,n,t){T(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return T(e,function(){n++}),n},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=g,n.Fragment=i,n.Profiler=o,n.PureComponent=b,n.StrictMode=a,n.Suspense=c,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,n.act=A,n.cloneElement=function(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,s=S.current),void 0!==n.key&&(a=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in n)w.call(n,u)&&!j.hasOwnProperty(u)&&(i[u]=void 0===n[u]&&void 0!==l?l[u]:n[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:t,type:e.type,key:a,ref:o,props:i,_owner:s}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=C,n.createFactory=function(e){var n=C.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=P,n.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:L}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=z.transition;z.transition={};try{e()}finally{z.transition=n}},n.unstable_act=A,n.useCallback=function(e,n){return O.current.useCallback(e,n)},n.useContext=function(e){return O.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return O.current.useDeferredValue(e)},n.useEffect=function(e,n){return O.current.useEffect(e,n)},n.useId=function(){return O.current.useId()},n.useImperativeHandle=function(e,n,t){return O.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return O.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return O.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return O.current.useMemo(e,n)},n.useReducer=function(e,n,t){return O.current.useReducer(e,n,t)},n.useRef=function(e){return O.current.useRef(e)},n.useState=function(e){return O.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return O.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return O.current.useTransition()},n.version="18.3.1"},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),n.push(c))}},n}},338:(e,n,t)=>{var r=t(961);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},417:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},463:(e,n)=>{function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,i=e[r];if(!(0<a(i,n)))break e;e[r]=n,e[t]=i,t=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,t))u<i&&0>a(c,l)?(e[r]=c,e[u]=t,r=u):(e[r]=l,e[s]=t,r=s);else{if(!(u<i&&0>a(c,t)))break e;e[r]=c,e[u]=t,r=u}}}return n}function a(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,m=null,p=3,h=!1,f=!1,v=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var n=r(c);null!==n;){if(null===n.callback)i(c);else{if(!(n.startTime<=e))break;i(c),n.sortIndex=n.expirationTime,t(u,n)}n=r(c)}}function k(e){if(v=!1,y(e),!f)if(null!==r(u))f=!0,z(w);else{var n=r(c);null!==n&&D(k,n.startTime-e)}}function w(e,t){f=!1,v&&(v=!1,x(P),P=-1),h=!0;var a=p;try{for(y(t),m=r(u);null!==m&&(!(m.expirationTime>t)||e&&!M());){var o=m.callback;if("function"==typeof o){m.callback=null,p=m.priorityLevel;var s=o(m.expirationTime<=t);t=n.unstable_now(),"function"==typeof s?m.callback=s:m===r(u)&&i(u),y(t)}else i(u);m=r(u)}if(null!==m)var l=!0;else{var d=r(c);null!==d&&D(k,d.startTime-t),l=!1}return l}finally{m=null,p=a,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,j=!1,C=null,P=-1,N=5,E=-1;function M(){return!(n.unstable_now()-E<N)}function T(){if(null!==C){var e=n.unstable_now();E=e;var t=!0;try{t=C(!0,e)}finally{t?S():(j=!1,C=null)}}else j=!1}if("function"==typeof b)S=function(){b(T)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=T,S=function(){O.postMessage(null)}}else S=function(){g(T,0)};function z(e){C=e,j||(j=!0,S())}function D(e,t){P=g(function(){e(n.unstable_now())},t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){f||h||(f=!0,z(w))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(e){switch(p){case 1:case 2:case 3:var n=3;break;default:n=p}var t=p;p=n;try{return e()}finally{p=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return n()}finally{p=t}},n.unstable_scheduleCallback=function(e,i,a){var o=n.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,t(c,e),null===r(u)&&e===r(c)&&(v?(x(P),P=-1):v=!0,D(k,a-o))):(e.sortIndex=s,t(u,e),f||h||(f=!0,z(w))),e},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(e){var n=p;return function(){var t=p;p=n;try{return e.apply(this,arguments)}finally{p=t}}}},540:(e,n,t)=>{e.exports=t(287)},551:(e,n,t)=>{var r=t(540),i=t(982);function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(s[e]=n,e=0;e<n.length;e++)o.add(n[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function f(e,n,t,r,i,a,o){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];v[n]=new f(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,n,t,r){var i=v.hasOwnProperty(n)?v[n]:null;(null!==i?0!==i.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null==n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,i,r)&&(t=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(m.test(e)?h[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):i.mustUseProperty?e[i.propertyName]=null===t?3!==i.type&&"":t:(n=i.attributeName,r=i.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(i=i.type)||4===i&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(g,x);v[n]=new f(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(g,x);v[n]=new f(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(g,x);v[n]=new f(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var z=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var I,R=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);I=n&&n[1]||""}return"\n"+I+e}var _=!1;function B(e,n){if(!e||_)return"";_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(n){if(n&&r&&"string"==typeof n.stack){for(var i=n.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{_=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case j:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case E:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(n=e.displayName||null)?n:U(e.type)||"Memo";case O:n=e._payload,e=e._init;try{return U(e(n))}catch(e){}}return null}function W(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(n);case 8:return n===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function q(e){e._valueTracker||(e._valueTracker=function(e){var n=$(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&void 0!==t&&"function"==typeof t.get&&"function"==typeof t.set){var i=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Q(e,n){var t=n.checked;return R({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function X(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=H(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function G(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function J(e,n){G(e,n);var t=H(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,H(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function Z(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&Y(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var i=0;i<t.length;i++)n["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=n.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&r&&(e[t].defaultSelected=!0)}else{for(t=""+H(t),n=null,i=0;i<e.length;i++){if(e[i].value===t)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==n||e[i].disabled||(n=e[i])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(a(91));return R({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(a(92));if(ne(t)){if(1<t.length)throw Error(a(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:H(t)}}function ae(e,n){var t=H(n.value),r=H(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function oe(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?se(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,n)})}:ce);function me(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,n,t){return null==n||"boolean"==typeof n||""===n?"":t||"number"!=typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ve(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),i=fe(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,i):e[t]=i}}Object.keys(pe).forEach(function(e){he.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]})});var ge=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,n){if(n){if(ge[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(a(60));if("object"!=typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=n.style&&"object"!=typeof n.style)throw Error(a(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"==typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,je=null;function Ce(e){if(e=bi(e)){if("function"!=typeof we)throw Error(a(280));var n=e.stateNode;n&&(n=ki(n),we(e.stateNode,e.type,n))}}function Pe(e){Se?je?je.push(e):je=[e]:Se=e}function Ne(){if(Se){var e=Se,n=je;if(je=Se=null,Ce(e),n)for(e=0;e<n.length;e++)Ce(n[e])}}function Ee(e,n){return e(n)}function Me(){}var Te=!1;function Le(e,n,t){if(Te)return e(n,t);Te=!0;try{return Ee(e,n,t)}finally{Te=!1,(null!==Se||null!==je)&&(Me(),Ne())}}function Oe(e,n){var t=e.stateNode;if(null===t)return null;var r=ki(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!=typeof t)throw Error(a(231,n,typeof t));return t}var ze=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){ze=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){ze=!1}function Ae(e,n,t,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(e){this.onError(e)}}var Ie=!1,Re=null,Fe=!1,_e=null,Be={onError:function(e){Ie=!0,Re=e}};function Ve(e,n,t,r,i,a,o,s,l){Ie=!1,Re=null,Ae.apply(Be,arguments)}function Ue(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{!!(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(a(188))}function $e(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=Ue(e)))throw Error(a(188));return n!==e?null:e}for(var t=e,r=n;;){var i=t.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return He(i),e;if(o===r)return He(i),n;o=o.sibling}throw Error(a(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===t){s=!0,t=i,r=o;break}if(l===r){s=!0,r=i,t=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===t){s=!0,t=o,r=i;break}if(l===r){s=!0,r=o,t=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(t.alternate!==r)throw Error(a(190))}if(3!==t.tag)throw Error(a(188));return t.stateNode.current===t?e:n}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=qe(e);if(null!==n)return n;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ge=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,en=i.unstable_UserBlockingPriority,nn=i.unstable_NormalPriority,tn=i.unstable_LowPriority,rn=i.unstable_IdlePriority,an=null,on=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/un|0)|0},ln=Math.log,un=Math.LN2;var cn=64,dn=4194304;function mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&t;if(0!==o){var s=o&~i;0!==s?r=mn(s):0!==(a&=o)&&(r=mn(a))}else 0!==(o=t&~i)?r=mn(o):0!==a&&(r=mn(a));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&i)&&((i=r&-r)>=(a=n&-n)||16===i&&4194240&a))return n;if(4&r&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)i=1<<(t=31-sn(n)),r|=e[t],n&=~i;return r}function hn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vn(){var e=cn;return!(4194240&(cn<<=1))&&(cn=64),e}function gn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function xn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-sn(n)]=t}function bn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-sn(t),i=1<<r;i&n|e[r]&n&&(e[r]|=n),t&=~i}}var yn=0;function kn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wn,Sn,jn,Cn,Pn,Nn=!1,En=[],Mn=null,Tn=null,Ln=null,On=new Map,zn=new Map,Dn=[],An="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function In(e,n){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":On.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(n.pointerId)}}function Rn(e,n,t,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==n&&(null!==(n=bi(n))&&Sn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==i&&-1===n.indexOf(i)&&n.push(i),e)}function Fn(e){var n=xi(e.target);if(null!==n){var t=Ue(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void Pn(e.priority,function(){jn(t)})}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function _n(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=bi(t))&&Sn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);ye=r,t.target.dispatchEvent(r),ye=null,n.shift()}return!0}function Bn(e,n,t){_n(e)&&t.delete(n)}function Vn(){Nn=!1,null!==Mn&&_n(Mn)&&(Mn=null),null!==Tn&&_n(Tn)&&(Tn=null),null!==Ln&&_n(Ln)&&(Ln=null),On.forEach(Bn),zn.forEach(Bn)}function Un(e,n){e.blockedOn===n&&(e.blockedOn=null,Nn||(Nn=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vn)))}function Wn(e){function n(n){return Un(n,e)}if(0<En.length){Un(En[0],e);for(var t=1;t<En.length;t++){var r=En[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mn&&Un(Mn,e),null!==Tn&&Un(Tn,e),null!==Ln&&Un(Ln,e),On.forEach(n),zn.forEach(n),t=0;t<Dn.length;t++)(r=Dn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&null===(t=Dn[0]).blockedOn;)Fn(t),null===t.blockedOn&&Dn.shift()}var Hn=y.ReactCurrentBatchConfig,$n=!0;function qn(e,n,t,r){var i=yn,a=Hn.transition;Hn.transition=null;try{yn=1,Yn(e,n,t,r)}finally{yn=i,Hn.transition=a}}function Kn(e,n,t,r){var i=yn,a=Hn.transition;Hn.transition=null;try{yn=4,Yn(e,n,t,r)}finally{yn=i,Hn.transition=a}}function Yn(e,n,t,r){if($n){var i=Xn(e,n,t,r);if(null===i)Hr(e,n,r,Qn,t),In(e,r);else if(function(e,n,t,r,i){switch(n){case"focusin":return Mn=Rn(Mn,e,n,t,r,i),!0;case"dragenter":return Tn=Rn(Tn,e,n,t,r,i),!0;case"mouseover":return Ln=Rn(Ln,e,n,t,r,i),!0;case"pointerover":var a=i.pointerId;return On.set(a,Rn(On.get(a)||null,e,n,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,zn.set(a,Rn(zn.get(a)||null,e,n,t,r,i)),!0}return!1}(i,e,n,t,r))r.stopPropagation();else if(In(e,r),4&n&&-1<An.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wn(a),null===(a=Xn(e,n,t,r))&&Hr(e,n,r,Qn,t),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,n,r,null,t)}}var Qn=null;function Xn(e,n,t,r){if(Qn=null,null!==(e=xi(e=ke(r))))if(null===(n=Ue(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=We(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Qn=e,null}function Gn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Jn=null,Zn=null,et=null;function nt(){if(et)return et;var e,n,t=Zn,r=t.length,i="value"in Jn?Jn.value:Jn.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return et=i.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function it(){return!1}function at(e){function n(n,t,r,i,a){for(var o in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rt:it,this.isPropagationStopped=it,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var ot,st,lt,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=at(ut),dt=R({},ut,{view:0,detail:0}),mt=at(dt),pt=R({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ct,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(ot=e.screenX-lt.screenX,st=e.screenY-lt.screenY):st=ot=0,lt=e),ot)},movementY:function(e){return"movementY"in e?e.movementY:st}}),ht=at(pt),ft=at(R({},pt,{dataTransfer:0})),vt=at(R({},dt,{relatedTarget:0})),gt=at(R({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),xt=R({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bt=at(xt),yt=at(R({},ut,{data:0})),kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},St={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=St[e])&&!!n[e]}function Ct(){return jt}var Pt=R({},dt,{key:function(e){if(e.key){var n=kt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ct,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nt=at(Pt),Et=at(R({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mt=at(R({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ct})),Tt=at(R({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),Lt=R({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ot=at(Lt),zt=[9,13,27,32],Dt=c&&"CompositionEvent"in window,At=null;c&&"documentMode"in document&&(At=document.documentMode);var It=c&&"TextEvent"in window&&!At,Rt=c&&(!Dt||At&&8<At&&11>=At),Ft=String.fromCharCode(32),_t=!1;function Bt(e,n){switch(e){case"keyup":return-1!==zt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vt(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ut=!1;var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Wt[e.type]:"textarea"===n}function $t(e,n,t,r){Pe(r),0<(n=qr(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var qt=null,Kt=null;function Yt(e){Fr(e,0)}function Qt(e){if(K(yi(e)))return e}function Xt(e,n){if("change"===e)return n}var Gt=!1;if(c){var Jt;if(c){var Zt="oninput"in document;if(!Zt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zt="function"==typeof er.oninput}Jt=Zt}else Jt=!1;Gt=Jt&&(!document.documentMode||9<document.documentMode)}function nr(){qt&&(qt.detachEvent("onpropertychange",tr),Kt=qt=null)}function tr(e){if("value"===e.propertyName&&Qt(Kt)){var n=[];$t(n,Kt,e,ke(e)),Le(Yt,n)}}function rr(e,n,t){"focusin"===e?(nr(),Kt=t,(qt=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qt(Kt)}function ar(e,n){if("click"===e)return Qt(n)}function or(e,n){if("input"===e||"change"===e)return Qt(n)}var sr="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n};function lr(e,n){if(sr(e,n))return!0;if("object"!=typeof e||null===e||"object"!=typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!d.call(n,i)||!sr(e[i],n[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,n){var t,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?dr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function mr(){for(var e=window,n=Y();n instanceof e.HTMLIFrameElement;){try{var t="string"==typeof n.contentWindow.location.href}catch(e){t=!1}if(!t)break;n=Y((e=n.contentWindow).document)}return n}function pr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function hr(e){var n=mr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&dr(t.ownerDocument.documentElement,t)){if(null!==r&&pr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(t,a);var o=cr(t,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((n=n.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,xr=null,br=!1;function yr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;br||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=qr(gr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=vr)))}function kr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},jr={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var n,t=wr[e];for(n in t)if(t.hasOwnProperty(n)&&n in jr)return Sr[e]=t[n];return e}c&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Pr=Cr("animationend"),Nr=Cr("animationiteration"),Er=Cr("animationstart"),Mr=Cr("transitionend"),Tr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,n){Tr.set(e,n),l(n,[e])}for(var zr=0;zr<Lr.length;zr++){var Dr=Lr[zr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Pr,"onAnimationEnd"),Or(Nr,"onAnimationIteration"),Or(Er,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Mr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Rr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,i,o,s,l,u){if(Ve.apply(this,arguments),Ie){if(!Ie)throw Error(a(198));var c=Re;Ie=!1,Re=null,Fe||(Fe=!0,_e=c)}}(r,n,void 0,e),e.currentTarget=null}function Fr(e,n){n=!!(4&n);for(var t=0;t<e.length;t++){var r=e[t],i=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Rr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Rr(i,s,u),a=l}}}if(Fe)throw e=_e,Fe=!1,_e=null,e}function _r(e,n){var t=n[fi];void 0===t&&(t=n[fi]=new Set);var r=e+"__bubble";t.has(r)||(Wr(n,e,2,!1),t.add(r))}function Br(e,n,t){var r=0;n&&(r|=4),Wr(t,e,r,n)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Vr]){e[Vr]=!0,o.forEach(function(n){"selectionchange"!==n&&(Ir.has(n)||Br(n,!1,e),Br(n,!0,e))});var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Vr]||(n[Vr]=!0,Br("selectionchange",!1,n))}}function Wr(e,n,t,r){switch(Gn(n)){case 1:var i=qn;break;case 4:i=Kn;break;default:i=Yn}t=i.bind(null,n,t,e),i=void 0,!ze||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(i=!0),r?void 0!==i?e.addEventListener(n,t,{capture:!0,passive:i}):e.addEventListener(n,t,!0):void 0!==i?e.addEventListener(n,t,{passive:i}):e.addEventListener(n,t,!1)}function Hr(e,n,t,r,i){var a=r;if(!(1&n||2&n||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=xi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Le(function(){var r=a,i=ke(t),o=[];e:{var s=Tr.get(e);if(void 0!==s){var l=ct,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":l=Nt;break;case"focusin":u="focus",l=vt;break;case"focusout":u="blur",l=vt;break;case"beforeblur":case"afterblur":l=vt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mt;break;case Pr:case Nr:case Er:l=gt;break;case Mr:l=Tt;break;case"scroll":l=mt;break;case"wheel":l=Ot;break;case"copy":case"cut":case"paste":l=bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Et}var c=!!(4&n),d=!c&&"scroll"===e,m=c?null!==s?s+"Capture":null:s;c=[];for(var p,h=r;null!==h;){var f=(p=h).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==m&&(null!=(f=Oe(h,m))&&c.push($r(h,f,p)))),d)break;h=h.return}0<c.length&&(s=new l(s,u,null,t,i),o.push({event:s,listeners:c}))}}if(!(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||t===ye||!(u=t.relatedTarget||t.fromElement)||!xi(u)&&!u[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=t.relatedTarget||t.toElement)?xi(u):null)&&(u!==(d=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=ht,f="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Et,f="onPointerLeave",m="onPointerEnter",h="pointer"),d=null==l?s:yi(l),p=null==u?s:yi(u),(s=new c(f,h+"leave",l,t,i)).target=d,s.relatedTarget=p,f=null,xi(i)===r&&((c=new c(m,h+"enter",u,t,i)).target=p,c.relatedTarget=d,f=c),d=f,l&&u)e:{for(m=u,h=0,p=c=l;p;p=Kr(p))h++;for(p=0,f=m;f;f=Kr(f))p++;for(;0<h-p;)c=Kr(c),h--;for(;0<p-h;)m=Kr(m),p--;for(;h--;){if(c===m||null!==m&&c===m.alternate)break e;c=Kr(c),m=Kr(m)}c=null}else c=null;null!==l&&Yr(o,s,l,c,!1),null!==u&&null!==d&&Yr(o,d,u,c,!0)}if("select"===(l=(s=r?yi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Xt;else if(Ht(s))if(Gt)v=or;else{v=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?$t(o,v,t,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?yi(r):window,e){case"focusin":(Ht(g)||"true"===g.contentEditable)&&(vr=g,gr=r,xr=null);break;case"focusout":xr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(o,t,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":yr(o,t,i)}var x;if(Dt)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ut?Bt(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(Rt&&"ko"!==t.locale&&(Ut||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ut&&(x=nt()):(Zn="value"in(Jn=i)?Jn.value:Jn.textContent,Ut=!0)),0<(g=qr(r,b)).length&&(b=new yt(b,e,null,t,i),o.push({event:b,listeners:g}),x?b.data=x:null!==(x=Vt(t))&&(b.data=x))),(x=It?function(e,n){switch(e){case"compositionend":return Vt(n);case"keypress":return 32!==n.which?null:(_t=!0,Ft);case"textInput":return(e=n.data)===Ft&&_t?null:e;default:return null}}(e,t):function(e,n){if(Ut)return"compositionend"===e||!Dt&&Bt(e,n)?(e=nt(),et=Zn=Jn=null,Ut=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new yt("onBeforeInput","beforeinput",null,t,i),o.push({event:i,listeners:r}),i.data=x))}Fr(o,n)})}function $r(e,n,t){return{instance:e,listener:n,currentTarget:t}}function qr(e,n){for(var t=n+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,t))&&r.unshift($r(e,a,i)),null!=(a=Oe(e,n))&&r.push($r(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,n,t,r,i){for(var a=n._reactName,o=[];null!==t&&t!==r;){var s=t,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Oe(t,a))&&o.unshift($r(t,l,s)):i||null!=(l=Oe(t,a))&&o.push($r(t,l,s))),t=t.return}0!==o.length&&e.push({event:n,listeners:o})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Gr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Jr(e,n,t){if(n=Gr(n),Gr(e)!==n&&t)throw Error(a(425))}function Zr(){}var ei=null,ni=null;function ti(e,n){return"textarea"===e||"noscript"===e||"string"==typeof n.children||"number"==typeof n.children||"object"==typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,n){var t=n,r=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&8===i.nodeType)if("/$"===(t=i.data)){if(0===r)return e.removeChild(i),void Wn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=i}while(t);Wn(n)}function ui(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function ci(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),mi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,fi="__reactEvents$"+di,vi="__reactListeners$"+di,gi="__reactHandles$"+di;function xi(e){var n=e[mi];if(n)return n;for(var t=e.parentNode;t;){if(n=t[hi]||t[mi]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=ci(e);null!==e;){if(t=e[mi])return t;e=ci(e)}return n}t=(e=t).parentNode}return null}function bi(e){return!(e=e[mi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ki(e){return e[pi]||null}var wi=[],Si=-1;function ji(e){return{current:e}}function Ci(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Pi(e,n){Si++,wi[Si]=e.current,e.current=n}var Ni={},Ei=ji(Ni),Mi=ji(!1),Ti=Ni;function Li(e,n){var t=e.type.contextTypes;if(!t)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in t)a[i]=n[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!=(e=e.childContextTypes)}function zi(){Ci(Mi),Ci(Ei)}function Di(e,n,t){if(Ei.current!==Ni)throw Error(a(168));Pi(Ei,n),Pi(Mi,t)}function Ai(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!=typeof r.getChildContext)return t;for(var i in r=r.getChildContext())if(!(i in n))throw Error(a(108,W(e)||"Unknown",i));return R({},t,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ti=Ei.current,Pi(Ei,e),Pi(Mi,Mi.current),!0}function Ri(e,n,t){var r=e.stateNode;if(!r)throw Error(a(169));t?(e=Ai(e,n,Ti),r.__reactInternalMemoizedMergedChildContext=e,Ci(Mi),Ci(Ei),Pi(Ei,e)):Ci(Mi),Pi(Mi,t)}var Fi=null,_i=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Ui(){if(!Bi&&null!==Fi){Bi=!0;var e=0,n=yn;try{var t=Fi;for(yn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}Fi=null,_i=!1}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Ui),n}finally{yn=n,Bi=!1}}return null}var Wi=[],Hi=0,$i=null,qi=0,Ki=[],Yi=0,Qi=null,Xi=1,Gi="";function Ji(e,n){Wi[Hi++]=qi,Wi[Hi++]=$i,$i=e,qi=n}function Zi(e,n,t){Ki[Yi++]=Xi,Ki[Yi++]=Gi,Ki[Yi++]=Qi,Qi=e;var r=Xi;e=Gi;var i=32-sn(r)-1;r&=~(1<<i),t+=1;var a=32-sn(n)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-sn(n)+i|t<<i|r,Gi=a+e}else Xi=1<<a|t<<i|r,Gi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function na(e){for(;e===$i;)$i=Wi[--Hi],Wi[Hi]=null,qi=Wi[--Hi],Wi[Hi]=null;for(;e===Qi;)Qi=Ki[--Yi],Ki[Yi]=null,Gi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var ta=null,ra=null,ia=!1,aa=null;function oa(e,n){var t=Lu(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function sa(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,ta=e,ra=ui(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,ta=e,ra=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Qi?{id:Xi,overflow:Gi}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Lu(18,null,null,0)).stateNode=n,t.return=e,e.child=t,ta=e,ra=null,!0);default:return!1}}function la(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(ia){var n=ra;if(n){var t=n;if(!sa(e,n)){if(la(e))throw Error(a(418));n=ui(t.nextSibling);var r=ta;n&&sa(e,n)?oa(r,t):(e.flags=-4097&e.flags|2,ia=!1,ta=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,ta=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ta=e}function da(e){if(e!==ta)return!1;if(!ia)return ca(e),ia=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!ti(e.type,e.memoizedProps)),n&&(n=ra)){if(la(e))throw ma(),Error(a(418));for(;n;)oa(e,n),n=ui(n.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){ra=ui(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}ra=null}}else ra=ta?ui(e.stateNode.nextSibling):null;return!0}function ma(){for(var e=ra;e;)e=ui(e.nextSibling)}function pa(){ra=ta=null,ia=!1}function ha(e){null===aa?aa=[e]:aa.push(e)}var fa=y.ReactCurrentBatchConfig;function va(e,n,t){if(null!==(e=t.ref)&&"function"!=typeof e&&"object"!=typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(a(309));var r=t.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===o?n.ref:(n=function(e){var n=i.refs;null===e?delete n[o]:n[o]=e},n._stringRef=o,n)}if("string"!=typeof e)throw Error(a(284));if(!t._owner)throw Error(a(290,e))}return e}function ga(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ba(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function i(e,n){return(e=zu(e,n)).index=0,e.sibling=null,e}function o(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function s(n){return e&&null===n.alternate&&(n.flags|=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=Ru(t,e.mode,r)).return=e,n):((n=i(n,t)).return=e,n)}function u(e,n,t,r){var a=t.type;return a===S?d(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===O&&xa(a)===n.type)?((r=i(n,t.props)).ref=va(e,n,t),r.return=e,r):((r=Du(t.type,t.key,t.props,null,e.mode,r)).ref=va(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Fu(t,e.mode,r)).return=e,n):((n=i(n,t.children||[])).return=e,n)}function d(e,n,t,r,a){return null===n||7!==n.tag?((n=Au(t,e.mode,r,a)).return=e,n):((n=i(n,t)).return=e,n)}function m(e,n,t){if("string"==typeof n&&""!==n||"number"==typeof n)return(n=Ru(""+n,e.mode,t)).return=e,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case k:return(t=Du(n.type,n.key,n.props,null,e.mode,t)).ref=va(e,null,n),t.return=e,t;case w:return(n=Fu(n,e.mode,t)).return=e,n;case O:return m(e,(0,n._init)(n._payload),t)}if(ne(n)||A(n))return(n=Au(n,e.mode,t,null)).return=e,n;ga(e,n)}return null}function p(e,n,t,r){var i=null!==n?n.key:null;if("string"==typeof t&&""!==t||"number"==typeof t)return null!==i?null:l(e,n,""+t,r);if("object"==typeof t&&null!==t){switch(t.$$typeof){case k:return t.key===i?u(e,n,t,r):null;case w:return t.key===i?c(e,n,t,r):null;case O:return p(e,n,(i=t._init)(t._payload),r)}if(ne(t)||A(t))return null!==i?null:d(e,n,t,r,null);ga(e,t)}return null}function h(e,n,t,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(n,e=e.get(t)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case k:return u(n,e=e.get(null===r.key?t:r.key)||null,r,i);case w:return c(n,e=e.get(null===r.key?t:r.key)||null,r,i);case O:return h(e,n,t,(0,r._init)(r._payload),i)}if(ne(r)||A(r))return d(n,e=e.get(t)||null,r,i,null);ga(n,r)}return null}function f(i,a,s,l){for(var u=null,c=null,d=a,f=a=0,v=null;null!==d&&f<s.length;f++){d.index>f?(v=d,d=null):v=d.sibling;var g=p(i,d,s[f],l);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&n(i,d),a=o(g,a,f),null===c?u=g:c.sibling=g,c=g,d=v}if(f===s.length)return t(i,d),ia&&Ji(i,f),u;if(null===d){for(;f<s.length;f++)null!==(d=m(i,s[f],l))&&(a=o(d,a,f),null===c?u=d:c.sibling=d,c=d);return ia&&Ji(i,f),u}for(d=r(i,d);f<s.length;f++)null!==(v=h(d,i,f,s[f],l))&&(e&&null!==v.alternate&&d.delete(null===v.key?f:v.key),a=o(v,a,f),null===c?u=v:c.sibling=v,c=v);return e&&d.forEach(function(e){return n(i,e)}),ia&&Ji(i,f),u}function v(i,s,l,u){var c=A(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,f=s,v=s=0,g=null,x=l.next();null!==f&&!x.done;v++,x=l.next()){f.index>v?(g=f,f=null):g=f.sibling;var b=p(i,f,x.value,u);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&n(i,f),s=o(b,s,v),null===d?c=b:d.sibling=b,d=b,f=g}if(x.done)return t(i,f),ia&&Ji(i,v),c;if(null===f){for(;!x.done;v++,x=l.next())null!==(x=m(i,x.value,u))&&(s=o(x,s,v),null===d?c=x:d.sibling=x,d=x);return ia&&Ji(i,v),c}for(f=r(i,f);!x.done;v++,x=l.next())null!==(x=h(f,i,v,x.value,u))&&(e&&null!==x.alternate&&f.delete(null===x.key?v:x.key),s=o(x,s,v),null===d?c=x:d.sibling=x,d=x);return e&&f.forEach(function(e){return n(i,e)}),ia&&Ji(i,v),c}return function e(r,a,o,l){if("object"==typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){t(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===O&&xa(u)===c.type){t(r,c.sibling),(a=i(c,o.props)).ref=va(r,c,o),a.return=r,r=a;break e}t(r,c);break}n(r,c),c=c.sibling}o.type===S?((a=Au(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Du(o.type,o.key,o.props,null,r.mode,l)).ref=va(r,a,o),l.return=r,r=l)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){t(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}t(r,a);break}n(r,a),a=a.sibling}(a=Fu(o,r.mode,l)).return=r,r=a}return s(r);case O:return e(r,a,(c=o._init)(o._payload),l)}if(ne(o))return f(r,a,o,l);if(A(o))return v(r,a,o,l);ga(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(t(r,a.sibling),(a=i(a,o)).return=r,r=a):(t(r,a),(a=Ru(o,r.mode,l)).return=r,r=a),s(r)):t(r,a)}}var ya=ba(!0),ka=ba(!1),wa=ji(null),Sa=null,ja=null,Ca=null;function Pa(){Ca=ja=Sa=null}function Na(e){var n=wa.current;Ci(wa),e._currentValue=n}function Ea(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Ma(e,n){Sa=e,Ca=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(bs=!0),e.firstContext=null)}function Ta(e){var n=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:n,next:null},null===ja){if(null===Sa)throw Error(a(308));ja=e,Sa.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return n}var La=null;function Oa(e){null===La?La=[e]:La.push(e)}function za(e,n,t,r){var i=n.interleaved;return null===i?(t.next=t,Oa(n)):(t.next=i.next,i.next=t),n.interleaved=t,Da(e,r)}function Da(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Aa=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function _a(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&El){var i=r.pending;return null===i?n.next=n:(n.next=i.next,i.next=n),r.pending=n,Da(e,t)}return null===(i=r.interleaved)?(n.next=n,Oa(r)):(n.next=i.next,i.next=n),r.interleaved=n,Da(e,t)}function Ba(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}function Va(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var i=null,a=null;if(null!==(t=t.firstBaseUpdate)){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===a?i=a=o:a=a.next=o,t=t.next}while(null!==t);null===a?i=a=n:a=a.next=n}else i=a=n;return t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Ua(e,n,t,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var m=s.lane,p=s.eventTime;if((r&m)===m){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,f=s;switch(m=n,p=t,f.tag){case 1:if("function"==typeof(h=f.payload)){d=h.call(p,d,m);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(m="function"==typeof(h=f.payload)?h.call(p,d,m):h))break e;d=R({},d,m);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(m=i.effects)?i.effects=[s]:m.push(s))}else p={eventTime:p,lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=m;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(m=s).next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(n=i.shared.interleaved)){i=n;do{o|=i.lane,i=i.next}while(i!==n)}else null===a&&(i.shared.lanes=0);Il|=o,e.lanes=o,e.memoizedState=d}}function Wa(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],i=r.callback;if(null!==i){if(r.callback=null,r=t,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},$a=ji(Ha),qa=ji(Ha),Ka=ji(Ha);function Ya(e){if(e===Ha)throw Error(a(174));return e}function Qa(e,n){switch(Pi(Ka,n),Pi(qa,e),Pi($a,Ha),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:le(null,"");break;default:n=le(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Ci($a),Pi($a,n)}function Xa(){Ci($a),Ci(qa),Ci(Ka)}function Ga(e){Ya(Ka.current);var n=Ya($a.current),t=le(n,e.type);n!==t&&(Pi(qa,e),Pi($a,t))}function Ja(e){qa.current===e&&(Ci($a),Ci(qa))}var Za=ji(0);function eo(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(128&n.flags)return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var no=[];function to(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var ro=y.ReactCurrentDispatcher,io=y.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,mo=0,po=0;function ho(){throw Error(a(321))}function fo(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!sr(e[t],n[t]))return!1;return!0}function vo(e,n,t,r,i,o){if(ao=o,oo=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=t(r,i),co){o=0;do{if(co=!1,mo=0,25<=o)throw Error(a(301));o+=1,lo=so=null,n.updateQueue=null,ro.current=ns,e=t(r,i)}while(co)}if(ro.current=Jo,n=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,n)throw Error(a(300));return e}function go(){var e=0!==mo;return mo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var n=null===lo?oo.memoizedState:lo.next;if(null!==n)lo=n,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function yo(e,n){return"function"==typeof n?n(e):n}function ko(e){var n=bo(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=t.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((ao&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=m,s=r):u=u.next=m,oo.lanes|=d,Il|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,n.memoizedState)||(bs=!0),n.memoizedState=r,n.baseState=s,n.baseQueue=u,t.lastRenderedState=r}if(null!==(e=t.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Il|=o,i=i.next}while(i!==e)}else null===i&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function wo(e){var n=bo(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=t.dispatch,i=t.pending,o=n.memoizedState;if(null!==i){t.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,n.memoizedState)||(bs=!0),n.memoizedState=o,null===n.baseQueue&&(n.baseState=o),t.lastRenderedState=o}return[o,r]}function So(){}function jo(e,n){var t=oo,r=bo(),i=n(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Io(No.bind(null,t,r,e),[e]),r.getSnapshot!==n||o||null!==lo&&1&lo.memoizedState.tag){if(t.flags|=2048,Lo(9,Po.bind(null,t,r,i,n),void 0,null),null===Ml)throw Error(a(349));30&ao||Co(t,n,i)}return i}function Co(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=oo.updateQueue)?(n={lastEffect:null,stores:null},oo.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Po(e,n,t,r){n.value=t,n.getSnapshot=r,Eo(n)&&Mo(e)}function No(e,n,t){return t(function(){Eo(n)&&Mo(e)})}function Eo(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!sr(e,t)}catch(e){return!0}}function Mo(e){var n=Da(e,1);null!==n&&tu(n,e,1,-1)}function To(e){var n=xo();return"function"==typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:e},n.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[n.memoizedState,e]}function Lo(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=oo.updateQueue)?(n={lastEffect:null,stores:null},oo.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Oo(){return bo().memoizedState}function zo(e,n,t,r){var i=xo();oo.flags|=e,i.memoizedState=Lo(1|n,t,void 0,void 0===r?null:r)}function Do(e,n,t,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&fo(r,o.deps))return void(i.memoizedState=Lo(n,t,a,r))}oo.flags|=e,i.memoizedState=Lo(1|n,t,a,r)}function Ao(e,n){return zo(8390656,8,e,n)}function Io(e,n){return Do(2048,8,e,n)}function Ro(e,n){return Do(4,2,e,n)}function Fo(e,n){return Do(4,4,e,n)}function _o(e,n){return"function"==typeof n?(e=e(),n(e),function(){n(null)}):null!=n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Bo(e,n,t){return t=null!=t?t.concat([e]):null,Do(4,4,_o.bind(null,n,e),t)}function Vo(){}function Uo(e,n){var t=bo();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&fo(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Wo(e,n){var t=bo();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&fo(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Ho(e,n,t){return 21&ao?(sr(t,n)||(t=vn(),oo.lanes|=t,Il|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=t)}function $o(e,n){var t=yn;yn=0!==t&&4>t?t:4,e(!0);var r=io.transition;io.transition={};try{e(!1),n()}finally{yn=t,io.transition=r}}function qo(){return bo().memoizedState}function Ko(e,n,t){var r=nu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Qo(e))Xo(n,t);else if(null!==(t=za(e,n,t,r))){tu(t,e,r,eu()),Go(t,n,r)}}function Yo(e,n,t){var r=nu(e),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Xo(n,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=n.lastRenderedReducer))try{var o=n.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=n.interleaved;return null===l?(i.next=i,Oa(n)):(i.next=l.next,l.next=i),void(n.interleaved=i)}}catch(e){}null!==(t=za(e,n,i,r))&&(tu(t,e,r,i=eu()),Go(t,n,r))}}function Qo(e){var n=e.alternate;return e===oo||null!==n&&n===oo}function Xo(e,n){co=uo=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Go(e,n,t){if(4194240&t){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}var Jo={readContext:Ta,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Zo={readContext:Ta,useCallback:function(e,n){return xo().memoizedState=[e,void 0===n?null:n],e},useContext:Ta,useEffect:Ao,useImperativeHandle:function(e,n,t){return t=null!=t?t.concat([e]):null,zo(4194308,4,_o.bind(null,n,e),t)},useLayoutEffect:function(e,n){return zo(4194308,4,e,n)},useInsertionEffect:function(e,n){return zo(4,2,e,n)},useMemo:function(e,n){var t=xo();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=xo();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:To,useDebugValue:Vo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=To(!1),n=e[0];return e=$o.bind(null,e[1]),xo().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=oo,i=xo();if(ia){if(void 0===t)throw Error(a(407));t=t()}else{if(t=n(),null===Ml)throw Error(a(349));30&ao||Co(r,n,t)}i.memoizedState=t;var o={value:t,getSnapshot:n};return i.queue=o,Ao(No.bind(null,r,o,e),[e]),r.flags|=2048,Lo(9,Po.bind(null,r,o,t,n),void 0,null),t},useId:function(){var e=xo(),n=Ml.identifierPrefix;if(ia){var t=Gi;n=":"+n+"R"+(t=(Xi&~(1<<32-sn(Xi)-1)).toString(32)+t),0<(t=mo++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=po++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},es={readContext:Ta,useCallback:Uo,useContext:Ta,useEffect:Io,useImperativeHandle:Bo,useInsertionEffect:Ro,useLayoutEffect:Fo,useMemo:Wo,useReducer:ko,useRef:Oo,useState:function(){return ko(yo)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(bo(),so.memoizedState,e)},useTransition:function(){return[ko(yo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:jo,useId:qo,unstable_isNewReconciler:!1},ns={readContext:Ta,useCallback:Uo,useContext:Ta,useEffect:Io,useImperativeHandle:Bo,useInsertionEffect:Ro,useLayoutEffect:Fo,useMemo:Wo,useReducer:wo,useRef:Oo,useState:function(){return wo(yo)},useDebugValue:Vo,useDeferredValue:function(e){var n=bo();return null===so?n.memoizedState=e:Ho(n,so.memoizedState,e)},useTransition:function(){return[wo(yo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:jo,useId:qo,unstable_isNewReconciler:!1};function ts(e,n){if(e&&e.defaultProps){for(var t in n=R({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}function rs(e,n,t,r){t=null==(t=t(r,n=e.memoizedState))?n:R({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=eu(),i=nu(e),a=Fa(r,i);a.payload=n,null!=t&&(a.callback=t),null!==(n=_a(e,a,i))&&(tu(n,e,i,r),Ba(n,e,i))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=eu(),i=nu(e),a=Fa(r,i);a.tag=1,a.payload=n,null!=t&&(a.callback=t),null!==(n=_a(e,a,i))&&(tu(n,e,i,r),Ba(n,e,i))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=eu(),r=nu(e),i=Fa(t,r);i.tag=2,null!=n&&(i.callback=n),null!==(n=_a(e,i,r))&&(tu(n,e,r,t),Ba(n,e,r))}};function as(e,n,t,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!n.prototype||!n.prototype.isPureReactComponent||(!lr(t,r)||!lr(i,a))}function os(e,n,t){var r=!1,i=Ni,a=n.contextType;return"object"==typeof a&&null!==a?a=Ta(a):(i=Oi(n)?Ti:Ei.current,a=(r=null!=(r=n.contextTypes))?Li(e,i):Ni),n=new n(t,a),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=is,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),n}function ss(e,n,t,r){e=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&is.enqueueReplaceState(n,n.state,null)}function ls(e,n,t,r){var i=e.stateNode;i.props=t,i.state=e.memoizedState,i.refs={},Ia(e);var a=n.contextType;"object"==typeof a&&null!==a?i.context=Ta(a):(a=Oi(n)?Ti:Ei.current,i.context=Li(e,a)),i.state=e.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(rs(e,n,a,t),i.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(n=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&is.enqueueReplaceState(i,i.state,null),Ua(e,t,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,n){try{var t="",r=n;do{t+=V(r),r=r.return}while(r);var i=t}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:n,stack:i,digest:null}}function cs(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function ds(e,n){try{console.error(n.value)}catch(e){setTimeout(function(){throw e})}}var ms="function"==typeof WeakMap?WeakMap:Map;function ps(e,n,t){(t=Fa(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Hl||(Hl=!0,$l=r),ds(0,n)},t}function hs(e,n,t){(t=Fa(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=n.value;t.payload=function(){return r(i)},t.callback=function(){ds(0,n)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(t.callback=function(){ds(0,n),"function"!=typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function fs(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new ms;var i=new Set;r.set(n,i)}else void 0===(i=r.get(n))&&(i=new Set,r.set(n,i));i.has(t)||(i.add(t),e=Cu.bind(null,e,n,t),n.then(e,e))}function vs(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function gs(e,n,t,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Fa(-1,1)).tag=2,_a(t,n,1))),t.lanes|=1),e)}var xs=y.ReactCurrentOwner,bs=!1;function ys(e,n,t,r){n.child=null===e?ka(n,null,t,r):ya(n,e.child,t,r)}function ks(e,n,t,r,i){t=t.render;var a=n.ref;return Ma(n,i),r=vo(e,n,t,r,a,i),t=go(),null===e||bs?(ia&&t&&ea(n),n.flags|=1,ys(e,n,r,i),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Hs(e,n,i))}function ws(e,n,t,r,i){if(null===e){var a=t.type;return"function"!=typeof a||Ou(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Du(t.type,null,r,n,n.mode,i)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,Ss(e,n,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((t=null!==(t=t.compare)?t:lr)(o,r)&&e.ref===n.ref)return Hs(e,n,i)}return n.flags|=1,(e=zu(a,r)).ref=n.ref,e.return=n,n.child=e}function Ss(e,n,t,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===n.ref){if(bs=!1,n.pendingProps=r=a,0===(e.lanes&i))return n.lanes=e.lanes,Hs(e,n,i);131072&e.flags&&(bs=!0)}}return Ps(e,n,t,r,i)}function js(e,n,t){var r=n.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&n.mode){if(!(1073741824&t))return e=null!==a?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Pi(zl,Ol),Ol|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:t,Pi(zl,Ol),Ol|=r}else n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(zl,Ol),Ol|=t;else null!==a?(r=a.baseLanes|t,n.memoizedState=null):r=t,Pi(zl,Ol),Ol|=r;return ys(e,n,i,t),n.child}function Cs(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Ps(e,n,t,r,i){var a=Oi(t)?Ti:Ei.current;return a=Li(n,a),Ma(n,i),t=vo(e,n,t,r,a,i),r=go(),null===e||bs?(ia&&r&&ea(n),n.flags|=1,ys(e,n,t,i),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Hs(e,n,i))}function Ns(e,n,t,r,i){if(Oi(t)){var a=!0;Ii(n)}else a=!1;if(Ma(n,i),null===n.stateNode)Ws(e,n),os(n,t,r),ls(n,t,r,i),r=!0;else if(null===e){var o=n.stateNode,s=n.memoizedProps;o.props=s;var l=o.context,u=t.contextType;"object"==typeof u&&null!==u?u=Ta(u):u=Li(n,u=Oi(t)?Ti:Ei.current);var c=t.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ss(n,o,r,u),Aa=!1;var m=n.memoizedState;o.state=m,Ua(n,r,o,i),l=n.memoizedState,s!==r||m!==l||Mi.current||Aa?("function"==typeof c&&(rs(n,t,c,r),l=n.memoizedState),(s=Aa||as(n,t,s,r,m,l,u))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(n.flags|=4194308)):("function"==typeof o.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(n.flags|=4194308),r=!1)}else{o=n.stateNode,Ra(e,n),s=n.memoizedProps,u=n.type===n.elementType?s:ts(n.type,s),o.props=u,d=n.pendingProps,m=o.context,"object"==typeof(l=t.contextType)&&null!==l?l=Ta(l):l=Li(n,l=Oi(t)?Ti:Ei.current);var p=t.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||m!==l)&&ss(n,o,r,l),Aa=!1,m=n.memoizedState,o.state=m,Ua(n,r,o,i);var h=n.memoizedState;s!==d||m!==h||Mi.current||Aa?("function"==typeof p&&(rs(n,t,p,r),h=n.memoizedState),(u=Aa||as(n,t,u,r,m,h,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof o.componentDidUpdate&&(n.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(n.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(n.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(n.flags|=1024),r=!1)}return Es(e,n,t,r,a,i)}function Es(e,n,t,r,i,a){Cs(e,n);var o=!!(128&n.flags);if(!r&&!o)return i&&Ri(n,t,!1),Hs(e,n,a);r=n.stateNode,xs.current=n;var s=o&&"function"!=typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&o?(n.child=ya(n,e.child,null,a),n.child=ya(n,null,s,a)):ys(e,n,s,a),n.memoizedState=r.state,i&&Ri(n,t,!0),n.child}function Ms(e){var n=e.stateNode;n.pendingContext?Di(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Di(0,n.context,!1),Qa(e,n.containerInfo)}function Ts(e,n,t,r,i){return pa(),ha(i),n.flags|=256,ys(e,n,t,r),n.child}var Ls,Os,zs,Ds,As={dehydrated:null,treeContext:null,retryLane:0};function Is(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rs(e,n,t){var r,i=n.pendingProps,o=Za.current,s=!1,l=!!(128&n.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(s=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Pi(Za,1&o),null===e)return ua(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(1&n.mode?"$!"===e.data?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=i.children,e=i.fallback,s?(i=n.mode,s=n.child,l={mode:"hidden",children:l},1&i||null===s?s=Iu(l,i,0,null):(s.childLanes=0,s.pendingProps=l),e=Au(e,i,t,null),s.return=n,e.return=n,s.sibling=e,n.child=s,n.child.memoizedState=Is(t),n.memoizedState=As,e):Fs(n,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,n,t,r,i,o,s){if(t)return 256&n.flags?(n.flags&=-257,_s(e,n,s,r=cs(Error(a(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(o=r.fallback,i=n.mode,r=Iu({mode:"visible",children:r.children},i,0,null),(o=Au(o,i,s,null)).flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,1&n.mode&&ya(n,e.child,null,s),n.child.memoizedState=Is(s),n.memoizedState=As,o);if(!(1&n.mode))return _s(e,n,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,_s(e,n,s,r=cs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Ml)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),tu(r,e,i,-1))}return fu(),_s(e,n,s,r=cs(Error(a(421))))}return"$?"===i.data?(n.flags|=128,n.child=e.child,n=Nu.bind(null,e),i._reactRetry=n,null):(e=o.treeContext,ra=ui(i.nextSibling),ta=n,ia=!0,aa=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Gi,Ki[Yi++]=Qi,Xi=e.id,Gi=e.overflow,Qi=n),n=Fs(n,r.children),n.flags|=4096,n)}(e,n,l,i,r,o,t);if(s){s=i.fallback,l=n.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 1&l||n.child===o?(i=zu(o,u)).subtreeFlags=14680064&o.subtreeFlags:((i=n.child).childLanes=0,i.pendingProps=u,n.deletions=null),null!==r?s=zu(r,s):(s=Au(s,l,t,null)).flags|=2,s.return=n,i.return=n,i.sibling=s,n.child=i,i=s,s=n.child,l=null===(l=e.child.memoizedState)?Is(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~t,n.memoizedState=As,i}return e=(s=e.child).sibling,i=zu(s,{mode:"visible",children:i.children}),!(1&n.mode)&&(i.lanes=t),i.return=n,i.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=i,n.memoizedState=null,i}function Fs(e,n){return(n=Iu({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function _s(e,n,t,r){return null!==r&&ha(r),ya(n,e.child,null,t),(e=Fs(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Bs(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Ea(e.return,n,t)}function Vs(e,n,t,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function Us(e,n,t){var r=n.pendingProps,i=r.revealOrder,a=r.tail;if(ys(e,n,r.children,t),2&(r=Za.current))r=1&r|2,n.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,t,n);else if(19===e.tag)Bs(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pi(Za,r),1&n.mode)switch(i){case"forwards":for(t=n.child,i=null;null!==t;)null!==(e=t.alternate)&&null===eo(e)&&(i=t),t=t.sibling;null===(t=i)?(i=n.child,n.child=null):(i=t.sibling,t.sibling=null),Vs(n,!1,i,t,a);break;case"backwards":for(t=null,i=n.child,n.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){n.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}Vs(n,!0,t,null,a);break;case"together":Vs(n,!1,null,null,void 0);break;default:n.memoizedState=null}else n.memoizedState=null;return n.child}function Ws(e,n){!(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Hs(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Il|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(a(153));if(null!==n.child){for(t=zu(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=zu(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function $s(e,n){if(!ia)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var i=e.child;null!==i;)t|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function Ks(e,n,t){var r=n.pendingProps;switch(na(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(n),null;case 1:case 17:return Oi(n.type)&&zi(),qs(n),null;case 3:return r=n.stateNode,Xa(),Ci(Mi),Ci(Ei),to(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&n.flags)||(n.flags|=1024,null!==aa&&(ou(aa),aa=null))),Os(e,n),qs(n),null;case 5:Ja(n);var i=Ya(Ka.current);if(t=n.type,null!==e&&null!=n.stateNode)zs(e,n,t,r,i),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(a(166));return qs(n),null}if(e=Ya($a.current),da(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[mi]=n,r[pi]=o,e=!!(1&n.mode),t){case"dialog":_r("cancel",r),_r("close",r);break;case"iframe":case"object":case"embed":_r("load",r);break;case"video":case"audio":for(i=0;i<Ar.length;i++)_r(Ar[i],r);break;case"source":_r("error",r);break;case"img":case"image":case"link":_r("error",r),_r("load",r);break;case"details":_r("toggle",r);break;case"input":X(r,o),_r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_r("invalid",r);break;case"textarea":ie(r,o),_r("invalid",r)}for(var l in xe(t,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&_r("scroll",r)}switch(t){case"input":q(r),Z(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,n.updateQueue=r,null!==r&&(n.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(t,{is:r.is}):(e=l.createElement(t),"select"===t&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,t),e[mi]=n,e[pi]=r,Ls(e,n,!1,!1),n.stateNode=e;e:{switch(l=be(t,r),t){case"dialog":_r("cancel",e),_r("close",e),i=r;break;case"iframe":case"object":case"embed":_r("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ar.length;i++)_r(Ar[i],e);i=r;break;case"source":_r("error",e),i=r;break;case"img":case"image":case"link":_r("error",e),_r("load",e),i=r;break;case"details":_r("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),_r("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),_r("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),_r("invalid",e)}for(o in xe(t,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"==typeof c?("textarea"!==t||""!==c)&&me(e,c):"number"==typeof c&&me(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&_r("scroll",e):null!=c&&b(e,o,c,l))}switch(t){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return qs(n),null;case 6:if(e&&null!=n.stateNode)Ds(e,n,e.memoizedProps,r);else{if("string"!=typeof r&&null===n.stateNode)throw Error(a(166));if(t=Ya(Ka.current),Ya($a.current),da(n)){if(r=n.stateNode,t=n.memoizedProps,r[mi]=n,(o=r.nodeValue!==t)&&null!==(e=ta))switch(e.tag){case 3:Jr(r.nodeValue,t,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,t,!!(1&e.mode))}o&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[mi]=n,n.stateNode=r}return qs(n),null;case 13:if(Ci(Za),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&1&n.mode&&!(128&n.flags))ma(),pa(),n.flags|=98560,o=!1;else if(o=da(n),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=n.memoizedState)?o.dehydrated:null))throw Error(a(317));o[mi]=n}else pa(),!(128&n.flags)&&(n.memoizedState=null),n.flags|=4;qs(n),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&n.flags?n:null}return 128&n.flags?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,1&n.mode&&(null===e||1&Za.current?0===Dl&&(Dl=3):fu())),null!==n.updateQueue&&(n.flags|=4),qs(n),null);case 4:return Xa(),Os(e,n),null===e&&Ur(n.stateNode.containerInfo),qs(n),null;case 10:return Na(n.type._context),qs(n),null;case 19:if(Ci(Za),null===(o=n.memoizedState))return qs(n),null;if(r=!!(128&n.flags),null===(l=o.rendering))if(r)$s(o,!1);else{if(0!==Dl||null!==e&&128&e.flags)for(e=n.child;null!==e;){if(null!==(l=eo(e))){for(n.flags|=128,$s(o,!1),null!==(r=l.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(o=t).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Pi(Za,1&Za.current|2),n.child}e=e.sibling}null!==o.tail&&Ge()>Ul&&(n.flags|=128,r=!0,$s(o,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),$s(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return qs(n),null}else 2*Ge()-o.renderingStartTime>Ul&&1073741824!==t&&(n.flags|=128,r=!0,$s(o,!1),n.lanes=4194304);o.isBackwards?(l.sibling=n.child,n.child=l):(null!==(t=o.last)?t.sibling=l:n.child=l,o.last=l)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Ge(),n.sibling=null,t=Za.current,Pi(Za,r?1&t|2:1&t),n):(qs(n),null);case 22:case 23:return du(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&1&n.mode?!!(1073741824&Ol)&&(qs(n),6&n.subtreeFlags&&(n.flags|=8192)):qs(n),null;case 24:case 25:return null}throw Error(a(156,n.tag))}function Ys(e,n){switch(na(n),n.tag){case 1:return Oi(n.type)&&zi(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return Xa(),Ci(Mi),Ci(Ei),to(),65536&(e=n.flags)&&!(128&e)?(n.flags=-65537&e|128,n):null;case 5:return Ja(n),null;case 13:if(Ci(Za),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(a(340));pa()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Ci(Za),null;case 4:return Xa(),null;case 10:return Na(n.type._context),null;case 22:case 23:return du(),null;default:return null}}Ls=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Os=function(){},zs=function(e,n,t,r){var i=e.memoizedProps;if(i!==r){e=n.stateNode,Ya($a.current);var a,o=null;switch(t){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(c in xe(t,r),t=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(t||(t={}),t[a]=u[a])}else t||(o||(o=[]),o.push(c,t)),t=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&_r("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}t&&(o=o||[]).push("style",t);var c=o;(n.updateQueue=c)&&(n.flags|=4)}},Ds=function(e,n,t,r){t!==r&&(n.flags|=4)};var Qs=!1,Xs=!1,Gs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,n){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){ju(e,n,t)}else t.current=null}function el(e,n,t){try{t()}catch(t){ju(e,n,t)}}var nl=!1;function tl(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(n,t,a)}i=i.next}while(i!==r)}}function rl(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function il(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"==typeof n?n(e):n.current=e}}function al(e){var n=e.alternate;null!==n&&(e.alternate=null,al(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[mi],delete n[pi],delete n[fi],delete n[vi],delete n[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!=(t=t._reactRootContainer)||null!==n.onclick||(n.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,n,t),e=e.sibling;null!==e;)ll(e,n,t),e=e.sibling}function ul(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,n,t),e=e.sibling;null!==e;)ul(e,n,t),e=e.sibling}var cl=null,dl=!1;function ml(e,n,t){for(t=t.child;null!==t;)pl(e,n,t),t=t.sibling}function pl(e,n,t){if(on&&"function"==typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,t)}catch(e){}switch(t.tag){case 5:Xs||Zs(t,n);case 6:var r=cl,i=dl;cl=null,ml(e,n,t),dl=i,null!==(cl=r)&&(dl?(e=cl,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):cl.removeChild(t.stateNode));break;case 18:null!==cl&&(dl?(e=cl,t=t.stateNode,8===e.nodeType?li(e.parentNode,t):1===e.nodeType&&li(e,t),Wn(e)):li(cl,t.stateNode));break;case 4:r=cl,i=dl,cl=t.stateNode.containerInfo,dl=!0,ml(e,n,t),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(2&a||4&a)&&el(t,n,o),i=i.next}while(i!==r)}ml(e,n,t);break;case 1:if(!Xs&&(Zs(t,n),"function"==typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(e){ju(t,n,e)}ml(e,n,t);break;case 21:ml(e,n,t);break;case 22:1&t.mode?(Xs=(r=Xs)||null!==t.memoizedState,ml(e,n,t),Xs=r):ml(e,n,t);break;default:ml(e,n,t)}}function hl(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Gs),n.forEach(function(n){var r=Eu.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function fl(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var i=t[r];try{var o=e,s=n,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));pl(o,s,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){ju(i,n,e)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)vl(n,e),n=n.sibling}function vl(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(n,e),gl(e),4&r){try{tl(3,e,e.return),rl(3,e)}catch(n){ju(e,e.return,n)}try{tl(5,e,e.return)}catch(n){ju(e,e.return,n)}}break;case 1:fl(n,e),gl(e),512&r&&null!==t&&Zs(t,t.return);break;case 5:if(fl(n,e),gl(e),512&r&&null!==t&&Zs(t,t.return),32&e.flags){var i=e.stateNode;try{me(i,"")}catch(n){ju(e,e.return,n)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==t?t.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&G(i,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var d=u[s],m=u[s+1];"style"===d?ve(i,m):"dangerouslySetInnerHTML"===d?de(i,m):"children"===d?me(i,m):b(i,d,m,c)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?te(i,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?te(i,!!o.multiple,o.defaultValue,!0):te(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(n){ju(e,e.return,n)}}break;case 6:if(fl(n,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(n){ju(e,e.return,n)}}break;case 3:if(fl(n,e),gl(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{Wn(n.containerInfo)}catch(n){ju(e,e.return,n)}break;case 4:default:fl(n,e),gl(e);break;case 13:fl(n,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ge())),4&r&&hl(e);break;case 22:if(d=null!==t&&null!==t.memoizedState,1&e.mode?(Xs=(c=Xs)||d,fl(n,e),Xs=c):fl(n,e),gl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(Js=e,d=e.child;null!==d;){for(m=Js=d;null!==Js;){switch(h=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:tl(4,p,p.return);break;case 1:Zs(p,p.return);var f=p.stateNode;if("function"==typeof f.componentWillUnmount){r=p,t=p.return;try{n=r,f.props=n.memoizedProps,f.state=n.memoizedState,f.componentWillUnmount()}catch(e){ju(r,t,e)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){kl(m);continue}}null!==h?(h.return=p,Js=h):kl(m)}d=d.sibling}e:for(d=null,m=e;;){if(5===m.tag){if(null===d){d=m;try{i=m.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=m.stateNode,s=null!=(u=m.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=fe("display",s))}catch(n){ju(e,e.return,n)}}}else if(6===m.tag){if(null===d)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(n){ju(e,e.return,n)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(n,e),gl(e),4&r&&hl(e);case 21:}}function gl(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(ol(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(me(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(n){ju(e,e.return,n)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function xl(e,n,t){Js=e,bl(e,n,t)}function bl(e,n,t){for(var r=!!(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Qs;var u=Xs;if(Qs=o,(Xs=l)&&!u)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Js=l):wl(i);for(;null!==a;)Js=a,bl(a,n,t),a=a.sibling;Js=i,Qs=s,Xs=u}yl(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Js=a):yl(e)}}function yl(e){for(;null!==Js;){var n=Js;if(8772&n.flags){var t=n.alternate;try{if(8772&n.flags)switch(n.tag){case 0:case 11:case 15:Xs||rl(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Xs)if(null===t)r.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:ts(n.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;null!==o&&Wa(n,o,r);break;case 3:var s=n.updateQueue;if(null!==s){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Wa(n,s,t)}break;case 5:var l=n.stateNode;if(null===t&&4&n.flags){t=l;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var m=d.dehydrated;null!==m&&Wn(m)}}}break;default:throw Error(a(163))}Xs||512&n.flags&&il(n)}catch(e){ju(n,n.return,e)}}if(n===e){Js=null;break}if(null!==(t=n.sibling)){t.return=n.return,Js=t;break}Js=n.return}}function kl(e){for(;null!==Js;){var n=Js;if(n===e){Js=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Js=t;break}Js=n.return}}function wl(e){for(;null!==Js;){var n=Js;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{rl(4,n)}catch(e){ju(n,t,e)}break;case 1:var r=n.stateNode;if("function"==typeof r.componentDidMount){var i=n.return;try{r.componentDidMount()}catch(e){ju(n,i,e)}}var a=n.return;try{il(n)}catch(e){ju(n,a,e)}break;case 5:var o=n.return;try{il(n)}catch(e){ju(n,o,e)}}}catch(e){ju(n,n.return,e)}if(n===e){Js=null;break}var s=n.sibling;if(null!==s){s.return=n.return,Js=s;break}Js=n.return}}var Sl,jl=Math.ceil,Cl=y.ReactCurrentDispatcher,Pl=y.ReactCurrentOwner,Nl=y.ReactCurrentBatchConfig,El=0,Ml=null,Tl=null,Ll=0,Ol=0,zl=ji(0),Dl=0,Al=null,Il=0,Rl=0,Fl=0,_l=null,Bl=null,Vl=0,Ul=1/0,Wl=null,Hl=!1,$l=null,ql=null,Kl=!1,Yl=null,Ql=0,Xl=0,Gl=null,Jl=-1,Zl=0;function eu(){return 6&El?Ge():-1!==Jl?Jl:Jl=Ge()}function nu(e){return 1&e.mode?2&El&&0!==Ll?Ll&-Ll:null!==fa.transition?(0===Zl&&(Zl=vn()),Zl):0!==(e=yn)?e:e=void 0===(e=window.event)?16:Gn(e.type):1}function tu(e,n,t,r){if(50<Xl)throw Xl=0,Gl=null,Error(a(185));xn(e,t,r),2&El&&e===Ml||(e===Ml&&(!(2&El)&&(Rl|=t),4===Dl&&su(e,Ll)),ru(e,r),1===t&&0===El&&!(1&n.mode)&&(Ul=Ge()+500,_i&&Ui()))}function ru(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-sn(a),s=1<<o,l=i[o];-1===l?0!==(s&t)&&0===(s&r)||(i[o]=hn(s,n)):l<=n&&(e.expiredLanes|=s),a&=~s}}(e,n);var r=pn(e,e===Ml?Ll:0);if(0===r)null!==t&&Ye(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&Ye(t),1===n)0===e.tag?function(e){_i=!0,Vi(e)}(lu.bind(null,e)):Vi(lu.bind(null,e)),oi(function(){!(6&El)&&Ui()}),t=null;else{switch(kn(r)){case 1:t=Ze;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Mu(t,iu.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function iu(e,n){if(Jl=-1,Zl=0,6&El)throw Error(a(327));var t=e.callbackNode;if(wu()&&e.callbackNode!==t)return null;var r=pn(e,e===Ml?Ll:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||n)n=vu(e,r);else{n=r;var i=El;El|=2;var o=hu();for(Ml===e&&Ll===n||(Wl=null,Ul=Ge()+500,mu(e,n));;)try{xu();break}catch(n){pu(e,n)}Pa(),Cl.current=o,El=i,null!==Tl?n=0:(Ml=null,Ll=0,n=Dl)}if(0!==n){if(2===n&&(0!==(i=fn(e))&&(r=i,n=au(e,i))),1===n)throw t=Al,mu(e,0),su(e,r),ru(e,Ge()),t;if(6===n)su(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(e){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(i)||(n=vu(e,r),2===n&&(o=fn(e),0!==o&&(r=o,n=au(e,o))),1!==n)))throw t=Al,mu(e,0),su(e,r),ru(e,Ge()),t;switch(e.finishedWork=i,e.finishedLanes=r,n){case 0:case 1:throw Error(a(345));case 2:case 5:ku(e,Bl,Wl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(n=Vl+500-Ge())){if(0!==pn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(ku.bind(null,e,Bl,Wl),n);break}ku(e,Bl,Wl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-sn(r);o=1<<s,(s=n[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ge()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ri(ku.bind(null,e,Bl,Wl),r);break}ku(e,Bl,Wl);break;default:throw Error(a(329))}}}return ru(e,Ge()),e.callbackNode===t?iu.bind(null,e):null}function au(e,n){var t=_l;return e.current.memoizedState.isDehydrated&&(mu(e,n).flags|=256),2!==(e=vu(e,n))&&(n=Bl,Bl=t,null!==n&&ou(n)),e}function ou(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function su(e,n){for(n&=~Fl,n&=~Rl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-sn(n),r=1<<t;e[t]=-1,n&=~r}}function lu(e){if(6&El)throw Error(a(327));wu();var n=pn(e,0);if(!(1&n))return ru(e,Ge()),null;var t=vu(e,n);if(0!==e.tag&&2===t){var r=fn(e);0!==r&&(n=r,t=au(e,r))}if(1===t)throw t=Al,mu(e,0),su(e,n),ru(e,Ge()),t;if(6===t)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ku(e,Bl,Wl),ru(e,Ge()),null}function uu(e,n){var t=El;El|=1;try{return e(n)}finally{0===(El=t)&&(Ul=Ge()+500,_i&&Ui())}}function cu(e){null!==Yl&&0===Yl.tag&&!(6&El)&&wu();var n=El;El|=1;var t=Nl.transition,r=yn;try{if(Nl.transition=null,yn=1,e)return e()}finally{yn=r,Nl.transition=t,!(6&(El=n))&&Ui()}}function du(){Ol=zl.current,Ci(zl)}function mu(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,ii(t)),null!==Tl)for(t=Tl.return;null!==t;){var r=t;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&zi();break;case 3:Xa(),Ci(Mi),Ci(Ei),to();break;case 5:Ja(r);break;case 4:Xa();break;case 13:case 19:Ci(Za);break;case 10:Na(r.type._context);break;case 22:case 23:du()}t=t.return}if(Ml=e,Tl=e=zu(e.current,null),Ll=Ol=n,Dl=0,Al=null,Fl=Rl=Il=0,Bl=_l=null,null!==La){for(n=0;n<La.length;n++)if(null!==(r=(t=La[n]).interleaved)){t.interleaved=null;var i=r.next,a=t.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}t.pending=r}La=null}return e}function pu(e,n){for(;;){var t=Tl;try{if(Pa(),ro.current=Jo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,mo=0,Pl.current=null,null===t||null===t.return){Dl=1,Al=n,Tl=null;break}e:{var o=e,s=t.return,l=t,u=n;if(n=Ll,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,d=l,m=d.tag;if(!(1&d.mode||0!==m&&11!==m&&15!==m)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vs(s);if(null!==h){h.flags&=-257,gs(h,s,l,0,n),1&h.mode&&fs(o,c,n),u=c;var f=(n=h).updateQueue;if(null===f){var v=new Set;v.add(u),n.updateQueue=v}else f.add(u);break e}if(!(1&n)){fs(o,c,n),fu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var g=vs(s);if(null!==g){!(65536&g.flags)&&(g.flags|=256),gs(g,s,l,0,n),ha(us(u,l));break e}}o=u=us(u,l),4!==Dl&&(Dl=2),null===_l?_l=[o]:_l.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n,Va(o,ps(0,u,n));break e;case 1:l=u;var x=o.type,b=o.stateNode;if(!(128&o.flags||"function"!=typeof x.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==ql&&ql.has(b)))){o.flags|=65536,n&=-n,o.lanes|=n,Va(o,hs(o,l,n));break e}}o=o.return}while(null!==o)}yu(t)}catch(e){n=e,Tl===t&&null!==t&&(Tl=t=t.return);continue}break}}function hu(){var e=Cl.current;return Cl.current=Jo,null===e?Jo:e}function fu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ml||!(268435455&Il)&&!(268435455&Rl)||su(Ml,Ll)}function vu(e,n){var t=El;El|=2;var r=hu();for(Ml===e&&Ll===n||(Wl=null,mu(e,n));;)try{gu();break}catch(n){pu(e,n)}if(Pa(),El=t,Cl.current=r,null!==Tl)throw Error(a(261));return Ml=null,Ll=0,Dl}function gu(){for(;null!==Tl;)bu(Tl)}function xu(){for(;null!==Tl&&!Qe();)bu(Tl)}function bu(e){var n=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===n?yu(e):Tl=n,Pl.current=null}function yu(e){var n=e;do{var t=n.alternate;if(e=n.return,32768&n.flags){if(null!==(t=Ys(t,n)))return t.flags&=32767,void(Tl=t);if(null===e)return Dl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(t=Ks(t,n,Ol)))return void(Tl=t);if(null!==(n=n.sibling))return void(Tl=n);Tl=n=e}while(null!==n);0===Dl&&(Dl=5)}function ku(e,n,t){var r=yn,i=Nl.transition;try{Nl.transition=null,yn=1,function(e,n,t,r){do{wu()}while(null!==Yl);if(6&El)throw Error(a(327));t=e.finishedWork;var i=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var i=31-sn(t),a=1<<i;n[i]=0,r[i]=-1,e[i]=-1,t&=~a}}(e,o),e===Ml&&(Tl=Ml=null,Ll=0),!(2064&t.subtreeFlags)&&!(2064&t.flags)||Kl||(Kl=!0,Mu(nn,function(){return wu(),null})),o=!!(15990&t.flags),!!(15990&t.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var s=yn;yn=1;var l=El;El|=4,Pl.current=null,function(e,n){if(ei=$n,pr(e=mr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var s=0,l=-1,u=-1,c=0,d=0,m=e,p=null;n:for(;;){for(var h;m!==t||0!==i&&3!==m.nodeType||(l=s+i),m!==o||0!==r&&3!==m.nodeType||(u=s+r),3===m.nodeType&&(s+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break n;if(p===t&&++c===i&&(l=s),p===o&&++d===r&&(u=s),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}t=-1===l||-1===u?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(ni={focusedElem:e,selectionRange:t},$n=!1,Js=n;null!==Js;)if(e=(n=Js).child,1028&n.subtreeFlags&&null!==e)e.return=n,Js=e;else for(;null!==Js;){n=Js;try{var f=n.alternate;if(1024&n.flags)switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var v=f.memoizedProps,g=f.memoizedState,x=n.stateNode,b=x.getSnapshotBeforeUpdate(n.elementType===n.type?v:ts(n.type,v),g);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=n.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(a(163))}}catch(e){ju(n,n.return,e)}if(null!==(e=n.sibling)){e.return=n.return,Js=e;break}Js=n.return}f=nl,nl=!1}(e,t),vl(t,e),hr(ni),$n=!!ei,ni=ei=null,e.current=t,xl(t,e,i),Xe(),El=l,yn=s,Nl.transition=o}else e.current=t;if(Kl&&(Kl=!1,Yl=e,Ql=i),o=e.pendingLanes,0===o&&(ql=null),function(e){if(on&&"function"==typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,!(128&~e.current.flags))}catch(e){}}(t.stateNode),ru(e,Ge()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)i=n[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=$l,$l=null,e;!!(1&Ql)&&0!==e.tag&&wu(),o=e.pendingLanes,1&o?e===Gl?Xl++:(Xl=0,Gl=e):Xl=0,Ui()}(e,n,t,r)}finally{Nl.transition=i,yn=r}return null}function wu(){if(null!==Yl){var e=kn(Ql),n=Nl.transition,t=yn;try{if(Nl.transition=null,yn=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,6&El)throw Error(a(331));var i=El;for(El|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(16&Js.flags){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:tl(8,d,o)}var m=d.child;if(null!==m)m.return=d,Js=m;else for(;null!==Js;){var p=(d=Js).sibling,h=d.return;if(al(d),d===c){Js=null;break}if(null!==p){p.return=h,Js=p;break}Js=h}}}var f=o.alternate;if(null!==f){var v=f.child;if(null!==v){f.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Js=o}}if(2064&o.subtreeFlags&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(2048&(o=Js).flags)switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var x=o.sibling;if(null!==x){x.return=o.return,Js=x;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var y=(s=Js).child;if(2064&s.subtreeFlags&&null!==y)y.return=s,Js=y;else e:for(s=b;null!==Js;){if(2048&(l=Js).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){ju(l,l.return,e)}if(l===s){Js=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Js=k;break e}Js=l.return}}if(El=i,Ui(),on&&"function"==typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(e){}r=!0}return r}finally{yn=t,Nl.transition=n}}return!1}function Su(e,n,t){e=_a(e,n=ps(0,n=us(t,n),1),1),n=eu(),null!==e&&(xn(e,1,n),ru(e,n))}function ju(e,n,t){if(3===e.tag)Su(e,e,t);else for(;null!==n;){if(3===n.tag){Su(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ql||!ql.has(r))){n=_a(n,e=hs(n,e=us(t,e),1),1),e=eu(),null!==n&&(xn(n,1,e),ru(n,e));break}}n=n.return}}function Cu(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=eu(),e.pingedLanes|=e.suspendedLanes&t,Ml===e&&(Ll&t)===t&&(4===Dl||3===Dl&&(130023424&Ll)===Ll&&500>Ge()-Vl?mu(e,0):Fl|=t),ru(e,n)}function Pu(e,n){0===n&&(1&e.mode?(n=dn,!(130023424&(dn<<=1))&&(dn=4194304)):n=1);var t=eu();null!==(e=Da(e,n))&&(xn(e,n,t),ru(e,t))}function Nu(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Pu(e,t)}function Eu(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(t=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(n),Pu(e,t)}function Mu(e,n){return Ke(e,n)}function Tu(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(e,n,t,r){return new Tu(e,n,t,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zu(e,n){var t=e.alternate;return null===t?((t=Lu(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Du(e,n,t,r,i,o){var s=2;if(r=e,"function"==typeof e)Ou(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case S:return Au(t.children,i,o,n);case j:s=8,i|=8;break;case C:return(e=Lu(12,t,n,2|i)).elementType=C,e.lanes=o,e;case M:return(e=Lu(13,t,n,i)).elementType=M,e.lanes=o,e;case T:return(e=Lu(19,t,n,i)).elementType=T,e.lanes=o,e;case z:return Iu(t,i,o,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:s=10;break e;case N:s=9;break e;case E:s=11;break e;case L:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(n=Lu(s,t,n,i)).elementType=e,n.type=r,n.lanes=o,n}function Au(e,n,t,r){return(e=Lu(7,e,r,n)).lanes=t,e}function Iu(e,n,t,r){return(e=Lu(22,e,r,n)).elementType=z,e.lanes=t,e.stateNode={isHidden:!1},e}function Ru(e,n,t){return(e=Lu(6,e,null,n)).lanes=t,e}function Fu(e,n,t){return(n=Lu(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function _u(e,n,t,r,i){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gn(0),this.expirationTimes=gn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,n,t,r,i,a,o,s,l){return e=new _u(e,n,t,s,l),1===n?(n=1,!0===a&&(n|=8)):n=0,a=Lu(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function Vu(e){if(!e)return Ni;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Oi(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(a(171))}if(1===e.tag){var t=e.type;if(Oi(t))return Ai(e,t,n)}return n}function Uu(e,n,t,r,i,a,o,s,l){return(e=Bu(t,r,!0,e,0,a,0,s,l)).context=Vu(null),t=e.current,(a=Fa(r=eu(),i=nu(t))).callback=null!=n?n:null,_a(t,a,i),e.current.lanes=i,xn(e,i,r),ru(e,r),e}function Wu(e,n,t,r){var i=n.current,a=eu(),o=nu(i);return t=Vu(t),null===n.context?n.context=t:n.pendingContext=t,(n=Fa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=_a(i,n,o))&&(tu(e,i,o,a),Ba(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $u(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function qu(e,n){$u(e,n),(e=e.alternate)&&$u(e,n)}Sl=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Mi.current)bs=!0;else{if(0===(e.lanes&t)&&!(128&n.flags))return bs=!1,function(e,n,t){switch(n.tag){case 3:Ms(n),pa();break;case 5:Ga(n);break;case 1:Oi(n.type)&&Ii(n);break;case 4:Qa(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;Pi(wa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(Pi(Za,1&Za.current),n.flags|=128,null):0!==(t&n.child.childLanes)?Rs(e,n,t):(Pi(Za,1&Za.current),null!==(e=Hs(e,n,t))?e.sibling:null);Pi(Za,1&Za.current);break;case 19:if(r=0!==(t&n.childLanes),128&e.flags){if(r)return Us(e,n,t);n.flags|=128}if(null!==(i=n.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pi(Za,Za.current),r)break;return null;case 22:case 23:return n.lanes=0,js(e,n,t)}return Hs(e,n,t)}(e,n,t);bs=!!(131072&e.flags)}else bs=!1,ia&&1048576&n.flags&&Zi(n,qi,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Ws(e,n),e=n.pendingProps;var i=Li(n,Ei.current);Ma(n,t),i=vo(null,n,r,e,i,t);var o=go();return n.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Oi(r)?(o=!0,Ii(n)):o=!1,n.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ia(n),i.updater=is,n.stateNode=i,i._reactInternals=n,ls(n,r,e,t),n=Es(null,n,r,!0,o,t)):(n.tag=0,ia&&o&&ea(n),ys(null,n,i,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Ws(e,n),e=n.pendingProps,r=(i=r._init)(r._payload),n.type=r,i=n.tag=function(e){if("function"==typeof e)return Ou(e)?1:0;if(null!=e){if((e=e.$$typeof)===E)return 11;if(e===L)return 14}return 2}(r),e=ts(r,e),i){case 0:n=Ps(null,n,r,e,t);break e;case 1:n=Ns(null,n,r,e,t);break e;case 11:n=ks(null,n,r,e,t);break e;case 14:n=ws(null,n,r,ts(r.type,e),t);break e}throw Error(a(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,Ps(e,n,r,i=n.elementType===r?i:ts(r,i),t);case 1:return r=n.type,i=n.pendingProps,Ns(e,n,r,i=n.elementType===r?i:ts(r,i),t);case 3:e:{if(Ms(n),null===e)throw Error(a(387));r=n.pendingProps,i=(o=n.memoizedState).element,Ra(e,n),Ua(n,r,null,t);var s=n.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=o,n.memoizedState=o,256&n.flags){n=Ts(e,n,r,t,i=us(Error(a(423)),n));break e}if(r!==i){n=Ts(e,n,r,t,i=us(Error(a(424)),n));break e}for(ra=ui(n.stateNode.containerInfo.firstChild),ta=n,ia=!0,aa=null,t=ka(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(pa(),r===i){n=Hs(e,n,t);break e}ys(e,n,r,t)}n=n.child}return n;case 5:return Ga(n),null===e&&ua(n),r=n.type,i=n.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ti(r,i)?s=null:null!==o&&ti(r,o)&&(n.flags|=32),Cs(e,n),ys(e,n,s,t),n.child;case 6:return null===e&&ua(n),null;case 13:return Rs(e,n,t);case 4:return Qa(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=ya(n,null,r,t):ys(e,n,r,t),n.child;case 11:return r=n.type,i=n.pendingProps,ks(e,n,r,i=n.elementType===r?i:ts(r,i),t);case 7:return ys(e,n,n.pendingProps,t),n.child;case 8:case 12:return ys(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,o=n.memoizedProps,s=i.value,Pi(wa,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Mi.current){n=Hs(e,n,t);break e}}else for(null!==(o=n.child)&&(o.return=n);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Fa(-1,t&-t)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=t,null!==(u=o.alternate)&&(u.lanes|=t),Ea(o.return,t,n),l.lanes|=t;break}u=u.next}}else if(10===o.tag)s=o.type===n.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=t,null!==(l=s.alternate)&&(l.lanes|=t),Ea(s,t,n),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===n){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ys(e,n,i.children,t),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,Ma(n,t),r=r(i=Ta(i)),n.flags|=1,ys(e,n,r,t),n.child;case 14:return i=ts(r=n.type,n.pendingProps),ws(e,n,r,i=ts(r.type,i),t);case 15:return Ss(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:ts(r,i),Ws(e,n),n.tag=1,Oi(r)?(e=!0,Ii(n)):e=!1,Ma(n,t),os(n,r,i),ls(n,r,i,t),Es(null,n,r,!0,e,t);case 19:return Us(e,n,t);case 22:return js(e,n,t)}throw Error(a(156,n.tag))};var Ku="function"==typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Zu(e,n,t,r,i){var a=t._reactRootContainer;if(a){var o=a;if("function"==typeof i){var s=i;i=function(){var e=Hu(o);s.call(e)}}Wu(n,o,e,i)}else o=function(e,n,t,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Hu(o);a.call(e)}}var o=Uu(n,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[hi]=o.current,Ur(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[hi]=l.current,Ur(8===e.nodeType?e.parentNode:e),cu(function(){Wu(n,l,t,r)}),l}(t,n,e,i,r);return Hu(o)}Qu.prototype.render=Yu.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(a(409));Wu(e,n,null,null)},Qu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;cu(function(){Wu(null,e,null,null)}),n[hi]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Cn();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Dn.length&&0!==n&&n<Dn[t].priority;t++);Dn.splice(t,0,e),0===t&&Fn(e)}},wn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=mn(n.pendingLanes);0!==t&&(bn(n,1|t),ru(n,Ge()),!(6&El)&&(Ul=Ge()+500,Ui()))}break;case 13:cu(function(){var n=Da(e,1);if(null!==n){var t=eu();tu(n,e,1,t)}}),qu(e,1)}},Sn=function(e){if(13===e.tag){var n=Da(e,134217728);if(null!==n)tu(n,e,134217728,eu());qu(e,134217728)}},jn=function(e){if(13===e.tag){var n=nu(e),t=Da(e,n);if(null!==t)tu(t,e,n,eu());qu(e,n)}},Cn=function(){return yn},Pn=function(e,n){var t=yn;try{return yn=e,n()}finally{yn=t}},we=function(e,n,t){switch(n){case"input":if(J(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var i=ki(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Ee=uu,Me=cu;var ec={usingClientEntryPoint:!1,Events:[bi,yi,ki,Pe,Ne,uu]},nc={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{an=rc.inject(tc),on=rc}catch(ce){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(n))throw Error(a(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Xu(e))throw Error(a(299));var t=!1,r="",i=Ku;return null!=n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),n=Bu(e,1,!1,null,0,t,0,r,i),e[hi]=n.current,Ur(8===e.nodeType?e.parentNode:e),new Yu(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=$e(n))?null:e.stateNode},n.flushSync=function(e){return cu(e)},n.hydrate=function(e,n,t){if(!Gu(n))throw Error(a(200));return Zu(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Xu(e))throw Error(a(405));var r=null!=t&&t.hydratedSources||null,i=!1,o="",s=Ku;if(null!=t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),n=Uu(n,null,e,1,null!=t?t:null,i,0,o,s),e[hi]=n.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i);return new Qu(n)},n.render=function(e,n,t){if(!Gu(n))throw Error(a(200));return Zu(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Gu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu(function(){Zu(null,null,e,!1,function(){e._reactRootContainer=null,e[hi]=null})}),!0)},n.unstable_batchedUpdates=uu,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Gu(t))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zu(e,n,t,!1,r)},n.version="18.3.1-next-f1338f8080-20240426"},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},796:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27rgba%28255,255,255,0.5%29%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3E%3Cpolyline points=%276 9 12 15 18 9%27%3E%3C/polyline%3E%3C/svg%3E"},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},848:(e,n,t)=>{e.exports=t(20)},961:(e,n,t)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=t(551)},982:(e,n,t)=>{e.exports=t(463)}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.b="undefined"!=typeof document&&document.baseURI||self.location.href,t.nc=void 0;var r={};t.d(r,{default:()=>yd});var i=t(540),a=t(338),o=t(848);const s=["ui"],l=["ui"];function u(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){m(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}let p=null;const h=function(e){let n=e;const t=new Set;return{getState:()=>n,setState:e=>{const r="function"==typeof e?e(n):e;r!==n&&(n=d(d({},n),r),t.forEach(e=>e()))},subscribe:e=>(t.add(e),()=>t.delete(e))}}({packs:{},selectedDefinition:null,selectedBehaviors:[],selectedPersonalities:[],dominantBehavior:null,dominantPersonality:null,selectedLoomStyle:[],selectedLoomUtils:[],selectedLoomRetrofits:[],lumiaOOCStyle:"social",lumiaOOCInterval:null,messageTruncation:{enabled:!1,keepCount:50},contextFilters:{},sovereignHand:{enabled:!1},summarization:{},showLumiverseDrawer:!0,ui:{activeModal:null,isLoading:!1,error:null}});function f(e,n,t){const r=n.split("."),i=d({},e);let a=i;for(let e=0;e<r.length-1;e++)a[r[e]]=d({},a[r[e]]),a=a[r[e]];return a[r[r.length-1]]=t,i}const v={updateSettings:(e,n)=>{const t=h.getState();h.setState({settings:f(t.settings,e,n)})},setSettings:e=>{h.setState({settings:e})},setPacks:e=>{h.setState({packs:e})},setCustomPacks:e=>{const n=d({},h.getState().packs);e.forEach(e=>{n[e.name]=d(d({},e),{},{isCustom:!0})}),h.setState({packs:n})},addCustomPack:e=>{const n=h.getState(),t=n.packs&&"object"==typeof n.packs?d({},n.packs):{};t[e.name]=d(d({},e),{},{isCustom:!0}),h.setState({packs:t})},updateCustomPack:(e,n)=>{const t=h.getState(),r=t.packs&&"object"==typeof t.packs?d({},t.packs):{};let i=null;for(const[n,t]of Object.entries(r))if(t.id===e||t.name===e||n===e){i=n;break}if(i){const e=n.name||r[i].name,t=d(d(d({},r[i]),n),{},{isCustom:!0});e!==i?(delete r[i],r[e]=t):r[i]=t,h.setState({packs:r})}},removeCustomPack:e=>{const n=h.getState(),t=n.packs&&"object"==typeof n.packs?d({},n.packs):{};for(const[n,r]of Object.entries(t))if(r.id===e||r.name===e||n===e){delete t[n];break}h.setState({packs:t})},_selectionsMatch:(e,n)=>!(!e||!n)&&(e.packName===n.packName&&e.itemName===n.itemName),setSelectedBehaviors:e=>{h.setState({selectedBehaviors:e})},toggleBehavior:e=>{const n=h.getState(),t=v._selectionsMatch,r=n.selectedBehaviors.findIndex(n=>t(n,e));if(r>=0){const i=[...n.selectedBehaviors];i.splice(r,1),h.setState({selectedBehaviors:i,dominantBehavior:t(n.dominantBehavior,e)?null:n.dominantBehavior})}else h.setState({selectedBehaviors:[...n.selectedBehaviors,e]})},setDominantBehavior:e=>{h.setState({dominantBehavior:e})},setSelectedPersonalities:e=>{h.setState({selectedPersonalities:e})},togglePersonality:e=>{const n=h.getState(),t=v._selectionsMatch,r=n.selectedPersonalities.findIndex(n=>t(n,e));if(r>=0){const i=[...n.selectedPersonalities];i.splice(r,1),h.setState({selectedPersonalities:i,dominantPersonality:t(n.dominantPersonality,e)?null:n.dominantPersonality})}else h.setState({selectedPersonalities:[...n.selectedPersonalities,e]})},setDominantPersonality:e=>{h.setState({dominantPersonality:e})},setSelectedDefinition:e=>{h.setState({selectedDefinition:e})},clearSelections:()=>{h.setState({selectedBehaviors:[],selectedPersonalities:[],selectedDefinition:null,dominantBehavior:null,dominantPersonality:null})},setSelectedLoomStyles:e=>{h.setState({selectedLoomStyle:e})},toggleLoomStyle:e=>{const n=h.getState(),t=v._selectionsMatch,r=n.selectedLoomStyle||[],i=r.findIndex(n=>t(n,e));if(i>=0){const e=[...r];e.splice(i,1),h.setState({selectedLoomStyle:e})}else h.setState({selectedLoomStyle:[...r,e]})},setSelectedLoomUtilities:e=>{h.setState({selectedLoomUtils:e})},toggleLoomUtility:e=>{const n=h.getState(),t=v._selectionsMatch,r=n.selectedLoomUtils||[],i=r.findIndex(n=>t(n,e));if(i>=0){const e=[...r];e.splice(i,1),h.setState({selectedLoomUtils:e})}else h.setState({selectedLoomUtils:[...r,e]})},setSelectedLoomRetrofits:e=>{h.setState({selectedLoomRetrofits:e})},toggleLoomRetrofit:e=>{const n=h.getState(),t=v._selectionsMatch,r=n.selectedLoomRetrofits||[],i=r.findIndex(n=>t(n,e));if(i>=0){const e=[...r];e.splice(i,1),h.setState({selectedLoomRetrofits:e})}else h.setState({selectedLoomRetrofits:[...r,e]})},clearLoomSelections:()=>{h.setState({selectedLoomStyle:[],selectedLoomUtils:[],selectedLoomRetrofits:[]})},clearAllSelections:()=>{h.setState({selectedBehaviors:[],selectedPersonalities:[],selectedDefinition:null,dominantBehavior:null,dominantPersonality:null,selectedLoomStyle:[],selectedLoomUtils:[],selectedLoomRetrofits:[]})},openModal:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.setState({ui:d(d({},h.getState().ui),{},{activeModal:{name:e,props:n}})})},closeModal:()=>{h.setState({ui:d(d({},h.getState().ui),{},{activeModal:null})})},setLoading:e=>{h.setState({ui:d(d({},h.getState().ui),{},{isLoading:e})})},setError:e=>{h.setState({ui:d(d({},h.getState().ui),{},{error:e})})},clearError:()=>{h.setState({ui:d(d({},h.getState().ui),{},{error:null})})}};function g(e){var n;if(!e)return void console.warn("[LumiverseStore] syncFromExtension called with null settings");console.log("[LumiverseStore] syncFromExtension - received:",{packsType:typeof e.packs,packsKeys:e.packs?Object.keys(e.packs):[],selectedDefinition:e.selectedDefinition,selectedBehaviorsCount:(null===(n=e.selectedBehaviors)||void 0===n?void 0:n.length)||0});const t=h.getState().ui;h.setState(d(d({},e),{},{ui:t})),console.log("[LumiverseStore] syncFromExtension - store updated:",{packsKeys:Object.keys(h.getState().packs||{})})}function x(){const e=h.getState(),{ui:n}=e,t=u(e,s);return console.log("[LumiverseStore] exportForExtension:",{packsKeys:Object.keys(t.packs||{})}),t}function b(){!function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;p&&clearTimeout(p),p=setTimeout(e,n)}(()=>{if("undefined"!=typeof LumiverseBridge&&LumiverseBridge.saveSettings){const e=x();LumiverseBridge.saveSettings(e),console.log("[LumiverseStore] Settings saved to extension")}})}const y={getState:h.getState,setState:h.setState,subscribe:h.subscribe,syncFromExtension:g,exportForExtension:x,saveToExtension:b};y.getState=h.getState;const k=(0,i.createContext)(null);function w(e){let{children:n,initialSettings:t=null}=e;const r=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!r.current)if(r.current=!0,t)console.log("[LumiverseProvider] Using initialSettings from bridge"),g(t);else if("undefined"!=typeof LumiverseBridge&&LumiverseBridge.getSettings){console.log("[LumiverseProvider] Fetching settings via LumiverseBridge");const e=LumiverseBridge.getSettings();e&&g(e)}else console.warn("[LumiverseProvider] No settings source available")},[t]),(0,o.jsx)(k.Provider,{value:h,children:n})}function S(e){const n=(0,i.useRef)(e);n.current=e;const t=(0,i.useCallback)(()=>n.current(h.getState()),[]);return(0,i.useSyncExternalStore)(h.subscribe,t,t)}function j(){return v}const C=e=>e.settings,P=e=>e.ui;function N(){return S(C)}function E(){const e=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedBehaviors,()=>h.getState().selectedBehaviors),n=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedPersonalities,()=>h.getState().selectedPersonalities),t=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedDefinition,()=>h.getState().selectedDefinition),r=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().dominantBehavior,()=>h.getState().dominantBehavior),a=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().dominantPersonality,()=>h.getState().dominantPersonality);return(0,i.useMemo)(()=>({behaviors:e,personalities:n,definition:t,dominantBehavior:r,dominantPersonality:a}),[e,n,t,r,a])}function M(){const e=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedLoomStyle||[],()=>h.getState().selectedLoomStyle||[]),n=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedLoomUtils||[],()=>h.getState().selectedLoomUtils||[]),t=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().selectedLoomRetrofits||[],()=>h.getState().selectedLoomRetrofits||[]);return(0,i.useMemo)(()=>({styles:e,utilities:n,retrofits:t}),[e,n,t])}function T(){const e=(0,i.useSyncExternalStore)(h.subscribe,()=>h.getState().packs,()=>h.getState().packs);return(0,i.useMemo)(()=>{let n=[];e&&(Array.isArray(e)?n=e:"object"==typeof e&&(n=Object.values(e)));const t=n.filter(e=>!0===e.isCustom);return{packs:n.filter(e=>!e.isCustom),customPacks:t,allPacks:n}},[e])}function L(){return S(P)}function O(e){const[n,t]=(0,i.useState)({objectPosition:"center center",isLoaded:!1,isPortrait:!1,isSquare:!1,isLandscape:!1}),r=(0,i.useRef)(e);return(0,i.useEffect)(()=>{if(r.current=e,!e)return void t({objectPosition:"center center",isLoaded:!1,isPortrait:!1,isSquare:!1,isLandscape:!1});const n=new Image;return n.onload=()=>{if(r.current!==e)return;const{naturalWidth:i,naturalHeight:a}=n,o=i/a,s=o<.9;let l="center center";s&&(l="center 20%"),t({objectPosition:l,isLoaded:!0,isPortrait:s,isSquare:o>=.9&&o<=1.1,isLandscape:o>1.1})},n.onerror=()=>{r.current===e&&t({objectPosition:"center center",isLoaded:!1,isPortrait:!1,isSquare:!1,isLandscape:!1})},n.src=e,()=>{n.onload=null,n.onerror=null}},[e]),n}"undefined"!=typeof window&&(window.debugLumiverseData=function(){const e=h.getState();console.log("=".repeat(80)),console.log("LUMIVERSE DEBUG DATA DUMP"),console.log("=".repeat(80)),console.log("\n--- STORE STATE: packs ---"),console.log("Type:",typeof e.packs,Array.isArray(e.packs)?"(Array - WRONG!)":"(Object - correct)"),console.log("Pack names:",e.packs?Object.keys(e.packs):"null"),console.log("Packs:",JSON.stringify(e.packs,null,2)),console.log("\n--- CURRENT SELECTIONS ---"),console.log("selectedDefinition:",JSON.stringify(e.selectedDefinition,null,2)),console.log("selectedBehaviors:",JSON.stringify(e.selectedBehaviors,null,2)),console.log("selectedPersonalities:",JSON.stringify(e.selectedPersonalities,null,2)),console.log("dominantBehavior:",JSON.stringify(e.dominantBehavior,null,2)),console.log("dominantPersonality:",JSON.stringify(e.dominantPersonality,null,2)),console.log("\n--- LOOM SELECTIONS ---"),console.log("selectedLoomStyle:",JSON.stringify(e.selectedLoomStyle,null,2)),console.log("selectedLoomUtils:",JSON.stringify(e.selectedLoomUtils,null,2)),console.log("selectedLoomRetrofits:",JSON.stringify(e.selectedLoomRetrofits,null,2)),console.log("\n--- SETTINGS FROM LUMIVERSE BRIDGE ---");try{if("undefined"!=typeof LumiverseBridge&&LumiverseBridge.getSettings){const e=LumiverseBridge.getSettings();e?(console.log("Bridge packs type:",typeof e.packs,Array.isArray(e.packs)?"(Array)":"(Object)"),console.log("Bridge pack names:",e.packs?Object.keys(e.packs):"null"),console.log("Full bridge settings:",JSON.stringify(e,null,2))):console.log("LumiverseBridge.getSettings() returned null")}else console.log("LumiverseBridge not available")}catch(e){console.log("Error reading bridge settings:",e.message)}console.log("\n--- PACK STRUCTURE ANALYSIS ---");const n=e.packs||{},t=Object.entries(n);console.log("Total packs:",t.length),t.forEach(e=>{var n;let[t,r]=e;console.log('\nPack "'.concat(t,'":')),console.log("  - Pack keys:",Object.keys(r)),console.log("  - items count:",(null===(n=r.items)||void 0===n?void 0:n.length)||0),r.items&&r.items.length>0&&(console.log("  - First item keys:",Object.keys(r.items[0])),console.log("  - Items with lumiaDefName:",r.items.filter(e=>e.lumiaDefName).length),console.log("  - Items with loomCategory:",r.items.filter(e=>e.loomCategory).length),console.log("  - All items:"),r.items.forEach((e,n)=>{const t=e.lumiaDefName||"NONE",r=e.loomCategory||"NONE",i=e.lumiaDef?"YES":"NO",a=e.lumia_behavior?"YES":"NO",o=e.lumia_personality?"YES":"NO";console.log("    [".concat(n,'] lumiaDefName="').concat(t,'", loomCategory="').concat(r,'", hasDef=').concat(i,", hasBehavior=").concat(a,", hasPersonality=").concat(o))}))}),console.log("\n"+"=".repeat(80)),console.log("END DEBUG DUMP - Copy everything above for analysis"),console.log("=".repeat(80));const{ui:r}=e;return{storeState:u(e,l)}});function z(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=z(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const D=function(){for(var e,n,t=0,r="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=z(e))&&(r&&(r+=" "),r+=n);return r},A=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},I=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),R=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};var F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _=(0,i.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:s,...l},u)=>(0,i.createElement)("svg",{ref:u,...F,width:n,height:n,stroke:e,strokeWidth:r?24*Number(t)/Number(n):t,className:I("lucide",a),...!o&&!R(l)&&{"aria-hidden":"true"},...l},[...s.map(([e,n])=>(0,i.createElement)(e,n)),...Array.isArray(o)?o:[o]])),B=(e,n)=>{const t=(0,i.forwardRef)(({className:t,...r},a)=>{return(0,i.createElement)(_,{ref:a,iconNode:n,className:I(`lucide-${o=A(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...r});var o});return t.displayName=A(e),t},V=B("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),U=B("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),W=B("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),H=B("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach(function(n){K(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function K(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Y(e){let{label:n,required:t,children:r,error:i,hint:a}=e;return(0,o.jsxs)("div",{className:D("lumiverse-form-field",i&&"lumiverse-form-field--error"),children:[(0,o.jsxs)("label",{className:"lumiverse-form-label",children:[n,t&&(0,o.jsx)("span",{className:"lumiverse-required",children:"*"})]}),r,a&&(0,o.jsx)("span",{className:"lumiverse-form-hint",children:a}),i&&(0,o.jsx)("span",{className:"lumiverse-form-error",children:i})]})}function Q(e){let{value:n,onChange:t,placeholder:r,maxLength:i}=e;return(0,o.jsx)("input",{type:"text",className:"lumiverse-input",value:n,onChange:e=>t(e.target.value),placeholder:r,maxLength:i})}function X(e){let{value:n,onChange:t,placeholder:r}=e;const[a,s]=(0,i.useState)(!1),{objectPosition:l}=O(n);return(0,o.jsxs)("div",{className:"lumiverse-image-input",children:[(0,o.jsx)("input",{type:"text",className:"lumiverse-input",value:n,onChange:e=>{return n=e.target.value,s(!1),void t(n);var n},placeholder:r||"Enter image URL..."}),n&&!a&&(0,o.jsx)("div",{className:"lumiverse-image-preview",children:(0,o.jsx)("img",{src:n,alt:"Preview",style:{objectPosition:l},onError:()=>s(!0)})}),a&&(0,o.jsx)("span",{className:"lumiverse-image-error",children:"Failed to load image"})]})}const G={key:[],keysecondary:[],constant:!1,vectorized:!1,selective:!1,selectiveLogic:0,addMemo:!0,order:100,position:0,disable:!1,excludeRecursion:!1,preventRecursion:!1,delayUntilRecursion:!1,probability:100,useProbability:!0,depth:4,group:"",groupOverride:!1,groupWeight:100,scanDepth:null,caseSensitive:null,matchWholeWords:null,useGroupScoring:null,automationId:"",role:null,sticky:0,cooldown:0,delay:0};function J(e,n,t){const r=e.lumiaDefName;let i="",a="";if("definition"===n){i="Lumia (".concat(r,")");const n=[];e.lumia_img&&n.push("[lumia_img=".concat(e.lumia_img,"]")),e.defAuthor&&n.push("[lumia_author=".concat(e.defAuthor,"]")),e.lumiaDef&&n.push(e.lumiaDef),a=n.join("\n")}else"behavior"===n?(i="Behavior (".concat(r,")"),a=e.lumia_behavior||""):"personality"===n&&(i="Personality (".concat(r,")"),a=e.lumia_personality||"");return q(q({},G),{},{uid:t,comment:i,content:a})}function Z(e){const n=function(e){const n={};let t=0;if(e.author||e.coverUrl){let r="";e.coverUrl&&(r+="[cover_img=".concat(e.coverUrl,"]")),e.author&&(r+="[author_name=".concat(e.author,"]")),n[t]=q(q({},G),{},{uid:t,comment:"Metadata",content:r}),t++}for(const r of e.items||[])r.lumiaDefName&&(r.lumiaDef&&(n[t]=J(r,"definition",t),t++),r.lumia_behavior&&(n[t]=J(r,"behavior",t),t++),r.lumia_personality&&(n[t]=J(r,"personality",t),t++));return{entries:n}}(e),t=JSON.stringify(n,null,2),r=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download="".concat((e.name||"pack").replace(/[^a-z0-9]/gi,"_"),"_worldbook.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}const ee=function(e){let{packId:n,onClose:t}=e;const{customPacks:r}=T(),a=j(),s=n?r.find(e=>e.id===n||e.name===n):null,[l,u]=(0,i.useState)(()=>s?q({},s):{id:"pack_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:"",author:"",coverUrl:"",url:"",isCustom:!0,items:[]}),[c,d]=(0,i.useState)({}),m=(0,i.useCallback)((e,n)=>{u(t=>q(q({},t),{},{[e]:n})),c[e]&&d(n=>q(q({},n),{},{[e]:null}))},[c]),p=(l.items||[]).filter(e=>e.lumiaDefName).length;return(0,o.jsxs)("div",{className:"lumiverse-pack-editor-modal",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-editor-content",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-metadata",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-editor-title",children:[(0,o.jsx)(V,{size:20,strokeWidth:1.5}),(0,o.jsx)("h3",{children:s?"Edit Pack":"New Pack"})]}),(0,o.jsx)(Y,{label:"Pack Name",required:!0,error:c.name,children:(0,o.jsx)(Q,{value:l.name,onChange:e=>m("name",e),placeholder:"My Custom Pack"})}),(0,o.jsx)(Y,{label:"Author",children:(0,o.jsx)(Q,{value:l.author||"",onChange:e=>m("author",e),placeholder:"Your name"})}),(0,o.jsx)(Y,{label:"Cover Image",hint:"URL for pack cover image",children:(0,o.jsx)(X,{value:l.coverUrl||"",onChange:e=>m("coverUrl",e)})})]}),(0,o.jsxs)("div",{className:"lumiverse-pack-lumias-info",children:[(0,o.jsx)("div",{className:"lumiverse-pack-lumias-header",children:(0,o.jsxs)("span",{className:"lumiverse-pack-lumias-count",children:[p," Lumia",1!==p?"s":""," in this pack"]})}),(0,o.jsx)("p",{className:"lumiverse-pack-lumias-hint",children:"Use the Pack Selector to add, edit, or remove individual Lumias."}),(0,o.jsxs)("button",{className:"lumiverse-btn lumiverse-btn--secondary lumiverse-btn--full",onClick:()=>{l.name.trim()&&(s?a.updateCustomPack(l.id||l.name,l):a.addCustomPack(l),b()),a.openModal("packSelector"),t()},type:"button",children:[(0,o.jsx)(U,{size:14,strokeWidth:1.5}),"Manage Lumias"]})]})]}),(0,o.jsxs)("div",{className:"lumiverse-pack-editor-footer",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-editor-footer-left",children:[s&&(0,o.jsxs)("button",{className:"lumiverse-btn lumiverse-btn--danger",onClick:()=>{window.confirm('Are you sure you want to delete "'.concat(l.name,'"? This will remove all Lumias in this pack.'))&&(a.removeCustomPack(l.id||l.name),b(),t())},type:"button",children:[(0,o.jsx)(W,{size:14}),"Delete Pack"]}),(0,o.jsxs)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:()=>{l.name.trim()?Z(l):alert("Please enter a pack name before exporting.")},type:"button",title:"Export as SillyTavern World Book JSON",children:[(0,o.jsx)(H,{size:14}),"Export"]})]}),(0,o.jsxs)("div",{className:"lumiverse-pack-editor-actions",children:[(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:t,type:"button",children:"Cancel"}),(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--primary",onClick:()=>{(()=>{const e={};return l.name.trim()||(e.name="Pack name is required"),d(e),0===Object.keys(e).length})()&&(s?a.updateCustomPack(l.id||l.name,l):a.addCustomPack(l),b(),t())},type:"button",children:s?"Save Changes":"Create Pack"})]})]})]})};function ne(e){if("undefined"==typeof Proxy)return e;const n=new Map;return new Proxy((...n)=>e(...n),{get:(t,r)=>"create"===r?e:(n.has(r)||n.set(r,e(r)),n.get(r))})}function te(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}const re=e=>Array.isArray(e);function ie(e,n){if(!Array.isArray(n))return!1;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function ae(e){return"string"==typeof e||Array.isArray(e)}function oe(e){const n=[{},{}];return null==e||e.values.forEach((e,t)=>{n[0][t]=e.get(),n[1][t]=e.getVelocity()}),n}function se(e,n,t,r){if("function"==typeof n){const[i,a]=oe(r);n=n(void 0!==t?t:e.custom,i,a)}if("string"==typeof n&&(n=e.variants&&e.variants[n]),"function"==typeof n){const[i,a]=oe(r);n=n(void 0!==t?t:e.custom,i,a)}return n}function le(e,n,t){const r=e.getProps();return se(r,n,void 0!==t?t:r.custom,e)}const ue=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ce=["initial",...ue];function de(e,n){return e?e[n]||e.default||e:void 0}const me=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pe=new Set(me),he=new Set(["width","height","top","left","right","bottom",...me]),fe=e=>re(e)?e[e.length-1]||0:e,ve=!1,ge=!1,xe=e=>e;const be=["read","resolveKeyframes","update","preRender","render","postRender"];function ye(e,n){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,o=be.reduce((e,n)=>(e[n]=function(e){let n=new Set,t=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function s(n){a.has(n)&&(l.schedule(n),e()),n(o)}const l={schedule:(e,i=!1,o=!1)=>{const s=o&&r?n:t;return i&&a.add(e),s.has(e)||s.add(e),e},cancel:e=>{t.delete(e),a.delete(e)},process:e=>{o=e,r?i=!0:(r=!0,[n,t]=[t,n],n.forEach(s),n.clear(),r=!1,i&&(i=!1,l.process(e)))}};return l}(a),e),{}),{read:s,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:m}=o,p=()=>{const a=ge?i.timestamp:performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,40),1),i.timestamp=a,i.isProcessing=!0,s.process(i),l.process(i),u.process(i),c.process(i),d.process(i),m.process(i),i.isProcessing=!1,t&&n&&(r=!1,e(p))};return{schedule:be.reduce((n,a)=>{const s=o[a];return n[a]=(n,a=!1,o=!1)=>(t||(t=!0,r=!0,i.isProcessing||e(p)),s.schedule(n,a,o)),n},{}),cancel:e=>{for(let n=0;n<be.length;n++)o[be[n]].cancel(e)},state:i,steps:o}}const{schedule:ke,cancel:we,state:Se,steps:je}=ye("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:xe,!0);let Ce;function Pe(){Ce=void 0}const Ne={now:()=>(void 0===Ce&&Ne.set(Se.isProcessing||ge?Se.timestamp:performance.now()),Ce),set:e=>{Ce=e,queueMicrotask(Pe)}};function Ee(e,n){-1===e.indexOf(n)&&e.push(n)}function Me(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}class Te{constructor(){this.subscriptions=[]}add(e){return Ee(this.subscriptions,e),()=>Me(this.subscriptions,e)}notify(e,n,t){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,n,t);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,n,t)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Le(e,n){return n?e*(1e3/n):0}const Oe={current:void 0};class ze{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,n=!0)=>{const t=Ne.now();this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var n;this.current=e,this.updatedAt=Ne.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Te);const t=this.events[e].add(n);return"change"===e?()=>{t(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:t}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){n&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,n)}setWithVelocity(e,n,t){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-t}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Oe.current&&Oe.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ne.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Le(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function De(e,n){return new ze(e,n)}function Ae(e,n,t){e.hasValue(n)?e.getValue(n).set(t):e.addValue(n,De(t))}const Ie=e=>Boolean(e&&e.getVelocity);function Re(e,n){const t=e.getValue("willChange");if(r=t,Boolean(Ie(r)&&r.add))return t.add(n);var r}const Fe=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_e="data-"+Fe("framerAppearId");function Be(e){return e.props[_e]}function Ve(e){let n;return()=>(void 0===n&&(n=e()),n)}const Ue=Ve(()=>void 0!==window.ScrollTimeline);class We{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let t=0;t<this.animations.length;t++)this.animations[t][e]=n}attachTimeline(e,n){const t=this.animations.map(t=>Ue()&&t.attachTimeline?t.attachTimeline(e):"function"==typeof n?n(t):void 0);return()=>{t.forEach((e,n)=>{e&&e(),this.animations[n].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class He extends We{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}const $e=e=>1e3*e,qe=e=>e/1e3,Ke=!1;function Ye(e){return"function"==typeof e}function Qe(e,n){e.timeline=n,e.onfinish=null}const Xe=e=>Array.isArray(e)&&"number"==typeof e[0],Ge={linearEasing:void 0};function Je(e,n){const t=Ve(e);return()=>{var e;return null!==(e=Ge[n])&&void 0!==e?e:t()}}const Ze=Je(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),en=(e,n,t)=>{const r=n-e;return 0===r?1:(t-e)/r},nn=(e,n,t=10)=>{let r="";const i=Math.max(Math.round(n/t),2);for(let n=0;n<i;n++)r+=e(en(0,i-1,n))+", ";return`linear(${r.substring(0,r.length-2)})`};function tn(e){return Boolean("function"==typeof e&&Ze()||!e||"string"==typeof e&&(e in an||Ze())||Xe(e)||Array.isArray(e)&&e.every(tn))}const rn=([e,n,t,r])=>`cubic-bezier(${e}, ${n}, ${t}, ${r})`,an={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rn([0,.65,.55,1]),circOut:rn([.55,0,1,.45]),backIn:rn([.31,.01,.66,-.59]),backOut:rn([.33,1.53,.69,.99])};function on(e,n){return e?"function"==typeof e&&Ze()?nn(e,n):Xe(e)?rn(e):Array.isArray(e)?e.map(e=>on(e,n)||an.easeOut):an[e]:void 0}const sn=(e,n,t)=>(((1-3*t+3*n)*e+(3*t-6*n))*e+3*n)*e;function ln(e,n,t,r){if(e===n&&t===r)return xe;const i=n=>function(e,n,t,r,i){let a,o,s=0;do{o=n+(t-n)/2,a=sn(o,r,i)-e,a>0?t=o:n=o}while(Math.abs(a)>1e-7&&++s<12);return o}(n,0,1,e,t);return e=>0===e||1===e?e:sn(i(e),n,r)}const un=e=>n=>n<=.5?e(2*n)/2:(2-e(2*(1-n)))/2,cn=e=>n=>1-e(1-n),dn=ln(.33,1.53,.69,.99),mn=cn(dn),pn=un(mn),hn=e=>(e*=2)<1?.5*mn(e):.5*(2-Math.pow(2,-10*(e-1))),fn=e=>1-Math.sin(Math.acos(e)),vn=cn(fn),gn=un(fn),xn=e=>/^0[^.\s]+$/u.test(e);function bn(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||xn(e))}const yn=(e,n,t)=>t>n?n:t<e?e:t,kn={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},wn={...kn,transform:e=>yn(0,1,e)},Sn={...kn,default:1},jn=e=>Math.round(1e5*e)/1e5,Cn=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Pn=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nn=(e,n)=>t=>Boolean("string"==typeof t&&Pn.test(t)&&t.startsWith(e)||n&&!function(e){return null==e}(t)&&Object.prototype.hasOwnProperty.call(t,n)),En=(e,n,t)=>r=>{if("string"!=typeof r)return r;const[i,a,o,s]=r.match(Cn);return{[e]:parseFloat(i),[n]:parseFloat(a),[t]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},Mn={...kn,transform:e=>Math.round((e=>yn(0,255,e))(e))},Tn={test:Nn("rgb","red"),parse:En("red","green","blue"),transform:({red:e,green:n,blue:t,alpha:r=1})=>"rgba("+Mn.transform(e)+", "+Mn.transform(n)+", "+Mn.transform(t)+", "+jn(wn.transform(r))+")"};const Ln={test:Nn("#"),parse:function(e){let n="",t="",r="",i="";return e.length>5?(n=e.substring(1,3),t=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(n=e.substring(1,2),t=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),n+=n,t+=t,r+=r,i+=i),{red:parseInt(n,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Tn.transform},On=e=>({test:n=>"string"==typeof n&&n.endsWith(e)&&1===n.split(" ").length,parse:parseFloat,transform:n=>`${n}${e}`}),zn=On("deg"),Dn=On("%"),An=On("px"),In=On("vh"),Rn=On("vw"),Fn={...Dn,parse:e=>Dn.parse(e)/100,transform:e=>Dn.transform(100*e)},_n={test:Nn("hsl","hue"),parse:En("hue","saturation","lightness"),transform:({hue:e,saturation:n,lightness:t,alpha:r=1})=>"hsla("+Math.round(e)+", "+Dn.transform(jn(n))+", "+Dn.transform(jn(t))+", "+jn(wn.transform(r))+")"},Bn={test:e=>Tn.test(e)||Ln.test(e)||_n.test(e),parse:e=>Tn.test(e)?Tn.parse(e):_n.test(e)?_n.parse(e):Ln.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Tn.transform(e):_n.transform(e)},Vn=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Un="number",Wn="color",Hn=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $n(e){const n=e.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=n.replace(Hn,e=>(Bn.test(e)?(r.color.push(a),i.push(Wn),t.push(Bn.parse(e))):e.startsWith("var(")?(r.var.push(a),i.push("var"),t.push(e)):(r.number.push(a),i.push(Un),t.push(parseFloat(e))),++a,"${}")).split("${}");return{values:t,split:o,indexes:r,types:i}}function qn(e){return $n(e).values}function Kn(e){const{split:n,types:t}=$n(e),r=n.length;return e=>{let i="";for(let a=0;a<r;a++)if(i+=n[a],void 0!==e[a]){const n=t[a];i+=n===Un?jn(e[a]):n===Wn?Bn.transform(e[a]):e[a]}return i}}const Yn=e=>"number"==typeof e?0:e;const Qn={test:function(e){var n,t;return isNaN(e)&&"string"==typeof e&&((null===(n=e.match(Cn))||void 0===n?void 0:n.length)||0)+((null===(t=e.match(Vn))||void 0===t?void 0:t.length)||0)>0},parse:qn,createTransformer:Kn,getAnimatableNone:function(e){const n=qn(e);return Kn(e)(n.map(Yn))}},Xn=new Set(["brightness","contrast","saturate","opacity"]);function Gn(e){const[n,t]=e.slice(0,-1).split("(");if("drop-shadow"===n)return e;const[r]=t.match(Cn)||[];if(!r)return e;const i=t.replace(r,"");let a=Xn.has(n)?1:0;return r!==t&&(a*=100),n+"("+a+i+")"}const Jn=/\b([a-z-]*)\(.*?\)/gu,Zn={...Qn,getAnimatableNone:e=>{const n=e.match(Jn);return n?n.map(Gn).join(" "):e}},et={borderWidth:An,borderTopWidth:An,borderRightWidth:An,borderBottomWidth:An,borderLeftWidth:An,borderRadius:An,radius:An,borderTopLeftRadius:An,borderTopRightRadius:An,borderBottomRightRadius:An,borderBottomLeftRadius:An,width:An,maxWidth:An,height:An,maxHeight:An,top:An,right:An,bottom:An,left:An,padding:An,paddingTop:An,paddingRight:An,paddingBottom:An,paddingLeft:An,margin:An,marginTop:An,marginRight:An,marginBottom:An,marginLeft:An,backgroundPositionX:An,backgroundPositionY:An},nt={rotate:zn,rotateX:zn,rotateY:zn,rotateZ:zn,scale:Sn,scaleX:Sn,scaleY:Sn,scaleZ:Sn,skew:zn,skewX:zn,skewY:zn,distance:An,translateX:An,translateY:An,translateZ:An,x:An,y:An,z:An,perspective:An,transformPerspective:An,opacity:wn,originX:Fn,originY:Fn,originZ:An},tt={...kn,transform:Math.round},rt={...et,...nt,zIndex:tt,size:An,fillOpacity:wn,strokeOpacity:wn,numOctaves:tt},it={...rt,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:Zn,WebkitFilter:Zn},at=e=>it[e];function ot(e,n){let t=at(e);return t!==Zn&&(t=Qn),t.getAnimatableNone?t.getAnimatableNone(n):void 0}const st=new Set(["auto","none","0"]);const lt=e=>e===kn||e===An,ut=(e,n)=>parseFloat(e.split(", ")[n]),ct=(e,n)=>(t,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ut(i[1],n);{const n=r.match(/^matrix\((.+)\)$/u);return n?ut(n[1],e):0}},dt=new Set(["x","y","z"]),mt=me.filter(e=>!dt.has(e));const pt={width:({x:e},{paddingLeft:n="0",paddingRight:t="0"})=>e.max-e.min-parseFloat(n)-parseFloat(t),height:({y:e},{paddingTop:n="0",paddingBottom:t="0"})=>e.max-e.min-parseFloat(n)-parseFloat(t),top:(e,{top:n})=>parseFloat(n),left:(e,{left:n})=>parseFloat(n),bottom:({y:e},{top:n})=>parseFloat(n)+(e.max-e.min),right:({x:e},{left:n})=>parseFloat(n)+(e.max-e.min),x:ct(4,13),y:ct(5,14)};pt.translateX=pt.x,pt.translateY=pt.y;const ht=new Set;let ft=!1,vt=!1;function gt(){if(vt){const e=Array.from(ht).filter(e=>e.needsMeasurement),n=new Set(e.map(e=>e.element)),t=new Map;n.forEach(e=>{const n=function(e){const n=[];return mt.forEach(t=>{const r=e.getValue(t);void 0!==r&&(n.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),n}(e);n.length&&(t.set(e,n),e.render())}),e.forEach(e=>e.measureInitialState()),n.forEach(e=>{e.render();const n=t.get(e);n&&n.forEach(([n,t])=>{var r;null===(r=e.getValue(n))||void 0===r||r.set(t)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}vt=!1,ft=!1,ht.forEach(e=>e.complete()),ht.clear()}function xt(){ht.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vt=!0)})}class bt{constructor(e,n,t,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=t,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ht.add(this),ft||(ft=!0,ke.read(xt),ke.resolveKeyframes(gt))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:t,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==i)e[0]=i;else if(t&&n){const r=t.readValue(n,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ht.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ht.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let yt=xe,kt=xe;const wt=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),St=e=>n=>"string"==typeof n&&n.startsWith(e),jt=St("--"),Ct=St("var(--"),Pt=e=>!!Ct(e)&&Nt.test(e.split("/*")[0].trim()),Nt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Et=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mt(e,n,t=1){kt(t<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const n=Et.exec(e);if(!n)return[,];const[,t,r,i]=n;return[`--${null!=t?t:r}`,i]}(e);if(!r)return;const a=window.getComputedStyle(n).getPropertyValue(r);if(a){const e=a.trim();return wt(e)?parseFloat(e):e}return Pt(i)?Mt(i,n,t+1):i}const Tt=e=>n=>n.test(e),Lt=[kn,An,Dn,zn,Rn,In,{test:e=>"auto"===e,parse:e=>e}],Ot=e=>Lt.find(Tt(e));class zt extends bt{constructor(e,n,t,r,i){super(e,n,t,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:t}=this;if(!n||!n.current)return;super.readKeyframes();for(let t=0;t<e.length;t++){let r=e[t];if("string"==typeof r&&(r=r.trim(),Pt(r))){const i=Mt(r,n.current);void 0!==i&&(e[t]=i),t===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!he.has(t)||2!==e.length)return;const[r,i]=e,a=Ot(r),o=Ot(i);if(a!==o)if(lt(a)&&lt(o))for(let n=0;n<e.length;n++){const t=e[n];"string"==typeof t&&(e[n]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,t=[];for(let n=0;n<e.length;n++)bn(e[n])&&t.push(n);t.length&&function(e,n,t){let r,i=0;for(;i<e.length&&!r;){const n=e[i];"string"==typeof n&&!st.has(n)&&$n(n).values.length&&(r=e[i]),i++}if(r&&t)for(const i of n)e[i]=ot(t,r)}(e,t,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:t}=this;if(!e||!e.current)return;"height"===t&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pt[t](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];void 0!==r&&e.getValue(t,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:t,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=pt[t](n.measureViewportBox(),window.getComputedStyle(n.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,t])=>{n.getValue(e).set(t)}),this.resolveNoneKeyframes()}}const Dt=(e,n)=>"zIndex"!==n&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Qn.test(e)&&"0"!==e||e.startsWith("url(")));function At(e,n,t,r){const i=e[0];if(null===i)return!1;if("display"===n||"visibility"===n)return!0;const a=e[e.length-1],o=Dt(i,n),s=Dt(a,n);return yt(o===s,`You are trying to animate ${n} from "${i}" to "${a}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${a} via the \`style\` property.`),!(!o||!s)&&(function(e){const n=e[0];if(1===e.length)return!0;for(let t=0;t<e.length;t++)if(e[t]!==n)return!0}(e)||("spring"===t||Ye(t))&&r)}const It=e=>null!==e;function Rt(e,{repeat:n,repeatType:t="loop"},r){const i=e.filter(It),a=n&&"loop"!==t&&n%2==1?0:i.length-1;return a&&void 0!==r?r:i[a]}class Ft{constructor({autoplay:e=!0,delay:n=0,type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ne.now(),this.options={autoplay:e,delay:n,type:t,repeat:r,repeatDelay:i,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(xt(),gt()),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ne.now(),this.hasAttemptedResolve=!0;const{name:t,type:r,velocity:i,delay:a,onComplete:o,onUpdate:s,isGenerator:l}=this.options;if(!l&&!At(e,t,r,i)){if(Ke||!a)return s&&s(Rt(e,this.options,n)),o&&o(),void this.resolveFinishedPromise();this.options.duration=0}const u=this.initPlayback(e,n);!1!==u&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const _t=2e4;function Bt(e){let n=0;let t=e.next(n);for(;!t.done&&n<_t;)n+=50,t=e.next(n);return n>=_t?1/0:n}const Vt=(e,n,t)=>e+(n-e)*t;function Ut(e,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+6*(n-e)*t:t<.5?n:t<2/3?e+(n-e)*(2/3-t)*6:e}function Wt(e,n){return t=>t>0?n:e}const Ht=(e,n,t)=>{const r=e*e,i=t*(n*n-r)+r;return i<0?0:Math.sqrt(i)},$t=[Ln,Tn,_n];function qt(e){const n=(t=e,$t.find(e=>e.test(t)));var t;if(yt(Boolean(n),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(n))return!1;let r=n.parse(e);return n===_n&&(r=function({hue:e,saturation:n,lightness:t,alpha:r}){e/=360,t/=100;let i=0,a=0,o=0;if(n/=100){const r=t<.5?t*(1+n):t+n-t*n,s=2*t-r;i=Ut(s,r,e+1/3),a=Ut(s,r,e),o=Ut(s,r,e-1/3)}else i=a=o=t;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}(r)),r}const Kt=(e,n)=>{const t=qt(e),r=qt(n);if(!t||!r)return Wt(e,n);const i={...t};return e=>(i.red=Ht(t.red,r.red,e),i.green=Ht(t.green,r.green,e),i.blue=Ht(t.blue,r.blue,e),i.alpha=Vt(t.alpha,r.alpha,e),Tn.transform(i))},Yt=(e,n)=>t=>n(e(t)),Qt=(...e)=>e.reduce(Yt),Xt=new Set(["none","hidden"]);function Gt(e,n){return t=>Vt(e,n,t)}function Jt(e){return"number"==typeof e?Gt:"string"==typeof e?Pt(e)?Wt:Bn.test(e)?Kt:nr:Array.isArray(e)?Zt:"object"==typeof e?Bn.test(e)?Kt:er:Wt}function Zt(e,n){const t=[...e],r=t.length,i=e.map((e,t)=>Jt(e)(e,n[t]));return e=>{for(let n=0;n<r;n++)t[n]=i[n](e);return t}}function er(e,n){const t={...e,...n},r={};for(const i in t)void 0!==e[i]&&void 0!==n[i]&&(r[i]=Jt(e[i])(e[i],n[i]));return e=>{for(const n in r)t[n]=r[n](e);return t}}const nr=(e,n)=>{const t=Qn.createTransformer(n),r=$n(e),i=$n(n);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Xt.has(e)&&!i.values.length||Xt.has(n)&&!r.values.length?function(e,n){return Xt.has(e)?t=>t<=0?e:n:t=>t>=1?n:e}(e,n):Qt(Zt(function(e,n){var t;const r=[],i={color:0,var:0,number:0};for(let a=0;a<n.values.length;a++){const o=n.types[a],s=e.indexes[o][i[o]],l=null!==(t=e.values[s])&&void 0!==t?t:0;r[a]=l,i[o]++}return r}(r,i),i.values),t):(yt(!0,`Complex values '${e}' and '${n}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Wt(e,n))};function tr(e,n,t){if("number"==typeof e&&"number"==typeof n&&"number"==typeof t)return Vt(e,n,t);return Jt(e)(e,n)}function rr(e,n,t){const r=Math.max(n-5,0);return Le(t-e(r),n-r)}const ir=100,ar=10,or=1,sr=0,lr=800,ur=.3,cr=.3,dr={granular:.01,default:2},mr={granular:.005,default:.5},pr=.01,hr=10,fr=.05,vr=1,gr=.001;function xr({duration:e=lr,bounce:n=ur,velocity:t=sr,mass:r=or}){let i,a;yt(e<=$e(hr),"Spring duration must be 10 seconds or less");let o=1-n;o=yn(fr,vr,o),e=yn(pr,hr,qe(e)),o<1?(i=n=>{const r=n*o,i=r*e,a=r-t,s=yr(n,o),l=Math.exp(-i);return gr-a/s*l},a=n=>{const r=n*o*e,a=r*t+t,s=Math.pow(o,2)*Math.pow(n,2)*e,l=Math.exp(-r),u=yr(Math.pow(n,2),o);return(-i(n)+gr>0?-1:1)*((a-s)*l)/u}):(i=n=>Math.exp(-n*e)*((n-t)*e+1)-.001,a=n=>Math.exp(-n*e)*(e*e*(t-n)));const s=function(e,n,t){let r=t;for(let t=1;t<br;t++)r-=e(r)/n(r);return r}(i,a,5/e);if(e=$e(e),isNaN(s))return{stiffness:ir,damping:ar,duration:e};{const n=Math.pow(s,2)*r;return{stiffness:n,damping:2*o*Math.sqrt(r*n),duration:e}}}const br=12;function yr(e,n){return e*Math.sqrt(1-n*n)}const kr=["duration","bounce"],wr=["stiffness","damping","mass"];function Sr(e,n){return n.some(n=>void 0!==e[n])}function jr(e=cr,n=ur){const t="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:n}:e;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],s={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:m,isResolvedFromDuration:p}=function(e){let n={velocity:sr,stiffness:ir,damping:ar,mass:or,isResolvedFromDuration:!1,...e};if(!Sr(e,wr)&&Sr(e,kr))if(e.visualDuration){const t=e.visualDuration,r=2*Math.PI/(1.2*t),i=r*r,a=2*yn(.05,1,1-(e.bounce||0))*Math.sqrt(i);n={...n,mass:or,stiffness:i,damping:a}}else{const t=xr(e);n={...n,...t,mass:or},n.isResolvedFromDuration=!0}return n}({...t,velocity:-qe(t.velocity||0)}),h=m||0,f=u/(2*Math.sqrt(l*c)),v=o-a,g=qe(Math.sqrt(l/c)),x=Math.abs(v)<5;let b;if(r||(r=x?dr.granular:dr.default),i||(i=x?mr.granular:mr.default),f<1){const e=yr(g,f);b=n=>{const t=Math.exp(-f*g*n);return o-t*((h+f*g*v)/e*Math.sin(e*n)+v*Math.cos(e*n))}}else if(1===f)b=e=>o-Math.exp(-g*e)*(v+(h+g*v)*e);else{const e=g*Math.sqrt(f*f-1);b=n=>{const t=Math.exp(-f*g*n),r=Math.min(e*n,300);return o-t*((h+f*g*v)*Math.sinh(r)+e*v*Math.cosh(r))/e}}const y={calculatedDuration:p&&d||null,next:e=>{const n=b(e);if(p)s.done=e>=d;else{let t=0;f<1&&(t=0===e?$e(h):rr(b,e,n));const a=Math.abs(t)<=r,l=Math.abs(o-n)<=i;s.done=a&&l}return s.value=s.done?o:n,s},toString:()=>{const e=Math.min(Bt(y),_t),n=nn(n=>y.next(e*n).value,e,30);return e+"ms "+n}};return y}function Cr({keyframes:e,velocity:n=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],m={done:!1,value:d},p=e=>void 0===s?l:void 0===l||Math.abs(s-e)<Math.abs(l-e)?s:l;let h=t*n;const f=d+h,v=void 0===o?f:o(f);v!==f&&(h=v-d);const g=e=>-h*Math.exp(-e/r),x=e=>v+g(e),b=e=>{const n=g(e),t=x(e);m.done=Math.abs(n)<=u,m.value=m.done?v:t};let y,k;const w=e=>{var n;(n=m.value,void 0!==s&&n<s||void 0!==l&&n>l)&&(y=e,k=jr({keyframes:[m.value,p(m.value)],velocity:rr(x,e,m.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return w(0),{calculatedDuration:null,next:e=>{let n=!1;return k||void 0!==y||(n=!0,b(e),w(e)),void 0!==y&&e>=y?k.next(e-y):(!n&&b(e),m)}}}const Pr=ln(.42,0,1,1),Nr=ln(0,0,.58,1),Er=ln(.42,0,.58,1),Mr={linear:xe,easeIn:Pr,easeInOut:Er,easeOut:Nr,circIn:fn,circInOut:gn,circOut:vn,backIn:mn,backInOut:pn,backOut:dn,anticipate:hn},Tr=e=>{if(Xe(e)){kt(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[n,t,r,i]=e;return ln(n,t,r,i)}return"string"==typeof e?(kt(void 0!==Mr[e],`Invalid easing type '${e}'`),Mr[e]):e};function Lr(e,n,{clamp:t=!0,ease:r,mixer:i}={}){const a=e.length;if(kt(a===n.length,"Both input and output ranges must be the same length"),1===a)return()=>n[0];if(2===a&&n[0]===n[1])return()=>n[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),n=[...n].reverse());const s=function(e,n,t){const r=[],i=t||tr,a=e.length-1;for(let t=0;t<a;t++){let a=i(e[t],e[t+1]);if(n){const e=Array.isArray(n)?n[t]||xe:n;a=Qt(e,a)}r.push(a)}return r}(n,r,i),l=s.length,u=t=>{if(o&&t<e[0])return n[0];let r=0;if(l>1)for(;r<e.length-2&&!(t<e[r+1]);r++);const i=en(e[r],e[r+1],t);return s[r](i)};return t?n=>u(yn(e[0],e[a-1],n)):u}function Or(e){const n=[0];return function(e,n){const t=e[e.length-1];for(let r=1;r<=n;r++){const i=en(0,n,r);e.push(Vt(t,1,i))}}(n,e.length-1),n}function zr({duration:e=300,keyframes:n,times:t,ease:r="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(Tr):Tr(r),a={done:!1,value:n[0]},o=function(e,n){return e.map(e=>e*n)}(t&&t.length===n.length?t:Or(n),e),s=Lr(o,n,{ease:Array.isArray(i)?i:(l=n,u=i,l.map(()=>u||Er).splice(0,l.length-1))});var l,u;return{calculatedDuration:e,next:n=>(a.value=s(n),a.done=n>=e,a)}}const Dr=e=>{const n=({timestamp:n})=>e(n);return{start:()=>ke.update(n,!0),stop:()=>we(n),now:()=>Se.isProcessing?Se.timestamp:Ne.now()}},Ar={decay:Cr,inertia:Cr,tween:zr,keyframes:zr,spring:jr},Ir=e=>e/100;class Rr extends Ft{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:n,motionValue:t,element:r,keyframes:i}=this.options,a=(null==r?void 0:r.KeyframeResolver)||bt;this.resolver=new a(i,(e,n)=>this.onKeyframesResolved(e,n),n,t,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:t=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=this.options,o=Ye(n)?n:Ar[n]||zr;let s,l;o!==zr&&"number"!=typeof e[0]&&(s=Qt(Ir,tr(e[0],e[1])),e=[0,100]);const u=o({...this.options,keyframes:e});"mirror"===i&&(l=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),null===u.calculatedDuration&&(u.calculatedDuration=Bt(u));const{calculatedDuration:c}=u,d=c+r;return{generator:u,mirroredGenerator:l,mapPercentToKeyframes:s,calculatedDuration:c,resolvedDuration:d,totalDuration:d*(t+1)-r}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,n=!1){const{resolved:t}=this;if(!t){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:s,calculatedDuration:l,totalDuration:u,resolvedDuration:c}=t;if(null===this.startTime)return i.next(0);const{delay:d,repeat:m,repeatType:p,repeatDelay:h,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-d*(this.speed>=0?1:-1),g=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let x=this.currentTime,b=i;if(m){const e=Math.min(this.currentTime,u)/c;let n=Math.floor(e),t=e%1;!t&&e>=1&&(t=1),1===t&&n--,n=Math.min(n,m+1);Boolean(n%2)&&("reverse"===p?(t=1-t,h&&(t-=h/c)):"mirror"===p&&(b=a)),x=yn(0,1,t)*c}const y=g?{done:!1,value:s[0]}:b.next(x);o&&(y.value=o(y.value));let{done:k}=y;g||null===l||(k=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&k);return w&&void 0!==r&&(y.value=Rt(s,this.options,r)),f&&f(y.value),w&&this.finish(),y}get duration(){const{resolved:e}=this;return e?qe(e.calculatedDuration):0}get time(){return qe(this.currentTime)}set time(e){e=$e(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qe(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Dr,onPlay:n,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),n&&n();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=t?t:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Fr=new Set(["opacity","clipPath","filter","transform"]);function _r(e,n,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:l}={}){const u={[n]:t};l&&(u.offset=l);const c=on(s,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:"reverse"===o?"alternate":"normal"})}const Br=Ve(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Vr={anticipate:hn,backInOut:pn,circInOut:gn};class Ur extends Ft{constructor(e){super(e);const{name:n,motionValue:t,element:r,keyframes:i}=this.options;this.resolver=new zt(i,(e,n)=>this.onKeyframesResolved(e,n),n,t,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:t=300,times:r,ease:i,type:a,motionValue:o,name:s,startTime:l}=this.options;if(!o.owner||!o.owner.current)return!1;if("string"==typeof i&&Ze()&&i in Vr&&(i=Vr[i]),function(e){return Ye(e.type)||"spring"===e.type||!tn(e.ease)}(this.options)){const{onComplete:n,onUpdate:o,motionValue:s,element:l,...u}=this.options,c=function(e,n){const t=new Rr({...n,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<2e4;)r=t.sample(a),i.push(r.value),a+=10;return{times:void 0,keyframes:i,duration:a-10,ease:"linear"}}(e,u);1===(e=c.keyframes).length&&(e[1]=e[0]),t=c.duration,r=c.times,i=c.ease,a="keyframes"}const u=_r(o.owner.current,s,e,{...this.options,duration:t,times:r,ease:i});return u.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(Qe(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:t}=this.options;o.set(Rt(e,this.options,n)),t&&t(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:t,times:r,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return qe(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return qe(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:t}=n;t.currentTime=$e(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:t}=n;t.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(this._resolved){const{resolved:n}=this;if(!n)return xe;const{animation:t}=n;Qe(t,e)}else this.pendingTimeline=e;return xe}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;"finished"===n.playState&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:t,duration:r,type:i,ease:a,times:o}=e;if("idle"===n.playState||"finished"===n.playState)return;if(this.time){const{motionValue:e,onUpdate:n,onComplete:s,element:l,...u}=this.options,c=new Rr({...u,keyframes:t,duration:r,type:i,ease:a,times:o,isGenerator:!0}),d=$e(this.time);e.setWithVelocity(c.sample(d-10).value,c.sample(d).value,10)}const{onStop:s}=this.options;s&&s(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:t,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(n&&n.owner&&n.owner.current instanceof HTMLElement))return!1;const{onUpdate:s,transformTemplate:l}=n.owner.getProps();return Br()&&t&&Fr.has(t)&&!s&&!l&&!r&&"mirror"!==i&&0!==a&&"inertia"!==o}}const Wr={type:"spring",stiffness:500,damping:25,restSpeed:10},Hr={type:"keyframes",duration:.8},$r={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qr=(e,{keyframes:n})=>n.length>2?Hr:pe.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Wr:$r;const Kr=(e,n,t,r={},i,a)=>o=>{const s=de(r,e)||{},l=s.delay||r.delay||0;let{elapsed:u=0}=r;u-=$e(l);let c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:n.getVelocity(),...s,delay:-u,onUpdate:e=>{n.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:n,element:a?void 0:i};(function({when:e,delay:n,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length})(s)||(c={...c,...qr(e,c)}),c.duration&&(c.duration=$e(c.duration)),c.repeatDelay&&(c.repeatDelay=$e(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(c.duration=0,0===c.delay&&(d=!0)),(Ke||ve)&&(d=!0,c.duration=0,c.delay=0),d&&!a&&void 0!==n.get()){const e=Rt(c.keyframes,s);if(void 0!==e)return ke.update(()=>{c.onUpdate(e),c.onComplete()}),new He([])}return!a&&Ur.supports(c)?new Ur(c):new Rr(c)};function Yr({protectedKeys:e,needsAnimating:n},t){const r=e.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,r}function Qr(e,n,{delay:t=0,transitionOverride:r,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:s,...l}=n;r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const n in l){const r=e.getValue(n,null!==(a=e.latestValues[n])&&void 0!==a?a:null),i=l[n];if(void 0===i||c&&Yr(c,n))continue;const s={delay:t,...de(o||{},n)};let d=!1;if(window.MotionHandoffAnimation){const t=Be(e);if(t){const e=window.MotionHandoffAnimation(t,n,ke);null!==e&&(s.startTime=e,d=!0)}}Re(e,n),r.start(Kr(n,r,i,e.shouldReduceMotion&&he.has(n)?{type:!1}:s,e,d));const m=r.animation;m&&u.push(m)}return s&&Promise.all(u).then(()=>{ke.update(()=>{s&&function(e,n){const t=le(e,n);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const n in a)Ae(e,n,fe(a[n]))}(e,s)})}),u}function Xr(e,n,t={}){var r;const i=le(e,n,"exit"===t.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(a=t.transitionOverride);const o=i?()=>Promise.all(Qr(e,i,t)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:o,staggerDirection:s}=a;return function(e,n,t=0,r=0,i=1,a){const o=[],s=(e.variantChildren.size-1)*r,l=1===i?(e=0)=>e*r:(e=0)=>s-e*r;return Array.from(e.variantChildren).sort(Gr).forEach((e,r)=>{e.notify("AnimationStart",n),o.push(Xr(e,n,{...a,delay:t+l(r)}).then(()=>e.notify("AnimationComplete",n)))}),Promise.all(o)}(e,n,i+r,o,s,t)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,n]="beforeChildren"===l?[o,s]:[s,o];return e().then(()=>n())}return Promise.all([o(),s(t.delay)])}function Gr(e,n){return e.sortNodePosition(n)}const Jr=ce.length;function Zr(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent&&Zr(e.parent)||{};return void 0!==e.props.initial&&(n.initial=e.props.initial),n}const n={};for(let t=0;t<Jr;t++){const r=ce[t],i=e.props[r];(ae(i)||!1===i)&&(n[r]=i)}return n}const ei=[...ue].reverse(),ni=ue.length;function ti(e){return n=>Promise.all(n.map(({animation:n,options:t})=>function(e,n,t={}){let r;if(e.notify("AnimationStart",n),Array.isArray(n)){const i=n.map(n=>Xr(e,n,t));r=Promise.all(i)}else if("string"==typeof n)r=Xr(e,n,t);else{const i="function"==typeof n?le(e,n,t.custom):n;r=Promise.all(Qr(e,i,t))}return r.then(()=>{e.notify("AnimationComplete",n)})}(e,n,t)))}function ri(e){let n=ti(e),t=oi(),r=!0;const i=n=>(t,r)=>{var i;const a=le(e,r,"exit"===n?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(a){const{transition:e,transitionEnd:n,...r}=a;t={...t,...r,...n}}return t};function a(a){const{props:o}=e,s=Zr(e.parent)||{},l=[],u=new Set;let c={},d=1/0;for(let n=0;n<ni;n++){const m=ei[n],p=t[m],h=void 0!==o[m]?o[m]:s[m],f=ae(h),v=m===a?p.isActive:null;!1===v&&(d=n);let g=h===s[m]&&h!==o[m]&&f;if(g&&r&&e.manuallyAnimateOnMount&&(g=!1),p.protectedKeys={...c},!p.isActive&&null===v||!h&&!p.prevProp||te(h)||"boolean"==typeof h)continue;const x=ii(p.prevProp,h);let b=x||m===a&&p.isActive&&!g&&f||n>d&&f,y=!1;const k=Array.isArray(h)?h:[h];let w=k.reduce(i(m),{});!1===v&&(w={});const{prevResolvedValues:S={}}=p,j={...S,...w},C=n=>{b=!0,u.has(n)&&(y=!0,u.delete(n)),p.needsAnimating[n]=!0;const t=e.getValue(n);t&&(t.liveStyle=!1)};for(const e in j){const n=w[e],t=S[e];if(c.hasOwnProperty(e))continue;let r=!1;r=re(n)&&re(t)?!ie(n,t):n!==t,r?null!=n?C(e):u.add(e):void 0!==n&&u.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=h,p.prevResolvedValues=w,p.isActive&&(c={...c,...w}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(g&&x)||y)&&l.push(...k.map(e=>({animation:e,options:{type:m}})))}if(u.size){const n={};u.forEach(t=>{const r=e.getBaseTarget(t),i=e.getValue(t);i&&(i.liveStyle=!0),n[t]=null!=r?r:null}),l.push({animation:n})}let m=Boolean(l.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(m=!1),r=!1,m?n(l):Promise.resolve()}return{animateChanges:a,setActive:function(n,r){var i;if(t[n].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var t;return null===(t=e.animationState)||void 0===t?void 0:t.setActive(n,r)}),t[n].isActive=r;const o=a(n);for(const e in t)t[e].protectedKeys={};return o},setAnimateFunction:function(t){n=t(e)},getState:()=>t,reset:()=>{t=oi(),r=!0}}}function ii(e,n){return"string"==typeof n?n!==e:!!Array.isArray(n)&&!ie(n,e)}function ai(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oi(){return{animate:ai(!0),whileInView:ai(),whileHover:ai(),whileTap:ai(),whileDrag:ai(),whileFocus:ai(),exit:ai()}}class si{constructor(e){this.isMounted=!1,this.node=e}update(){}}let li=0;const ui={animation:{Feature:class extends si{constructor(e){super(e),e.animationState||(e.animationState=ri(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();te(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends si{constructor(){super(...arguments),this.id=li++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:t}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===t)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ci={x:!1,y:!1};function di(){return ci.x||ci.y}const mi=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function pi(e,n,t,r={passive:!0}){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t)}function hi(e){return{point:{x:e.pageX,y:e.pageY}}}function fi(e,n,t,r){return pi(e,n,(e=>n=>mi(n)&&e(n,hi(n)))(t),r)}const vi=(e,n)=>Math.abs(e-n);class gi{constructor(e,n,{transformPagePoint:t,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=yi(this.lastMoveEventInfo,this.history),n=null!==this.startEvent,t=function(e,n){const t=vi(e.x,n.x),r=vi(e.y,n.y);return Math.sqrt(t**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!n&&!t)return;const{point:r}=e,{timestamp:i}=Se;this.history.push({...r,timestamp:i});const{onStart:a,onMove:o}=this.handlers;n||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,n)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=xi(n,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(e,n)=>{this.end();const{onEnd:t,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=yi("pointercancel"===e.type?this.lastMoveEventInfo:xi(n,this.transformPagePoint),this.history);this.startEvent&&t&&t(e,a),r&&r(e,a)},!mi(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=t,this.contextWindow=r||window;const a=xi(hi(e),this.transformPagePoint),{point:o}=a,{timestamp:s}=Se;this.history=[{...o,timestamp:s}];const{onSessionStart:l}=n;l&&l(e,yi(a,this.history)),this.removeListeners=Qt(fi(this.contextWindow,"pointermove",this.handlePointerMove),fi(this.contextWindow,"pointerup",this.handlePointerUp),fi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),we(this.updatePoint)}}function xi(e,n){return n?{point:n(e.point)}:e}function bi(e,n){return{x:e.x-n.x,y:e.y-n.y}}function yi({point:e},n){return{point:e,delta:bi(e,wi(n)),offset:bi(e,ki(n)),velocity:Si(n,.1)}}function ki(e){return e[0]}function wi(e){return e[e.length-1]}function Si(e,n){if(e.length<2)return{x:0,y:0};let t=e.length-1,r=null;const i=wi(e);for(;t>=0&&(r=e[t],!(i.timestamp-r.timestamp>$e(n)));)t--;if(!r)return{x:0,y:0};const a=qe(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ji(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Ci(e){return e.max-e.min}function Pi(e,n,t,r=.5){e.origin=r,e.originPoint=Vt(n.min,n.max,e.origin),e.scale=Ci(t)/Ci(n),e.translate=Vt(t.min,t.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Ni(e,n,t,r){Pi(e.x,n.x,t.x,r?r.originX:void 0),Pi(e.y,n.y,t.y,r?r.originY:void 0)}function Ei(e,n,t){e.min=t.min+n.min,e.max=e.min+Ci(n)}function Mi(e,n,t){e.min=n.min-t.min,e.max=e.min+Ci(n)}function Ti(e,n,t){Mi(e.x,n.x,t.x),Mi(e.y,n.y,t.y)}function Li(e,n,t){return{min:void 0!==n?e.min+n:void 0,max:void 0!==t?e.max+t-(e.max-e.min):void 0}}function Oi(e,n){let t=n.min-e.min,r=n.max-e.max;return n.max-n.min<e.max-e.min&&([t,r]=[r,t]),{min:t,max:r}}const zi=.35;function Di(e,n,t){return{min:Ai(e,n),max:Ai(e,t)}}function Ai(e,n){return"number"==typeof e?e:e[n]||0}const Ii=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Ri(e){return[e("x"),e("y")]}function Fi({top:e,left:n,right:t,bottom:r}){return{x:{min:n,max:t},y:{min:e,max:r}}}function _i(e){return void 0===e||1===e}function Bi({scale:e,scaleX:n,scaleY:t}){return!_i(e)||!_i(n)||!_i(t)}function Vi(e){return Bi(e)||Ui(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ui(e){return Wi(e.x)||Wi(e.y)}function Wi(e){return e&&"0%"!==e}function Hi(e,n,t){return t+n*(e-t)}function $i(e,n,t,r,i){return void 0!==i&&(e=Hi(e,i,r)),Hi(e,t,r)+n}function qi(e,n=0,t=1,r,i){e.min=$i(e.min,n,t,r,i),e.max=$i(e.max,n,t,r,i)}function Ki(e,{x:n,y:t}){qi(e.x,n.translate,n.scale,n.originPoint),qi(e.y,t.translate,t.scale,t.originPoint)}const Yi=.999999999999,Qi=1.0000000000001;function Xi(e,n){e.min=e.min+n,e.max=e.max+n}function Gi(e,n,t,r,i=.5){qi(e,n,t,Vt(e.min,e.max,i),r)}function Ji(e,n){Gi(e.x,n.x,n.scaleX,n.scale,n.originX),Gi(e.y,n.y,n.scaleY,n.scale,n.originY)}function Zi(e,n){return Fi(function(e,n){if(!n)return e;const t=n({x:e.left,y:e.top}),r=n({x:e.right,y:e.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),n))}const ea=({current:e})=>e?e.ownerDocument.defaultView:null,na=new WeakMap;class ta{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:t}=this.visualElement;if(t&&!1===t.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new gi(e,{onSessionStart:e=>{const{dragSnapToOrigin:t}=this.getProps();t?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hi(e).point)},onStart:(e,n)=>{const{drag:t,dragPropagation:r,onDragStart:i}=this.getProps();if(t&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=t)||"y"===a?ci[a]?null:(ci[a]=!0,()=>{ci[a]=!1}):ci.x||ci.y?null:(ci.x=ci.y=!0,()=>{ci.x=ci.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ri(e=>{let n=this.getAxisMotionValue(e).get()||0;if(Dn.test(n)){const{projection:t}=this.visualElement;if(t&&t.layout){const r=t.layout.layoutBox[e];if(r){n=Ci(r)*(parseFloat(n)/100)}}}this.originPoint[e]=n}),i&&ke.postRender(()=>i(e,n)),Re(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,n)=>{const{dragPropagation:t,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!t&&!this.openDragLock)return;const{offset:o}=n;if(r&&null===this.currentDirection)return this.currentDirection=function(e,n=10){let t=null;Math.abs(e.y)>n?t="y":Math.abs(e.x)>n&&(t="x");return t}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",n.point,o),this.updateAxis("y",n.point,o),this.visualElement.render(),a&&a(e,n)},onSessionEnd:(e,n)=>this.stop(e,n),resumeAnimation:()=>Ri(e=>{var n;return"paused"===this.getAnimationState(e)&&(null===(n=this.getAxisMotionValue(e).animation)||void 0===n?void 0:n.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:ea(this.visualElement)})}stop(e,n){const t=this.isDragging;if(this.cancel(),!t)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&ke.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:t}=this.getProps();!t&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,t){const{drag:r}=this.getProps();if(!t||!ra(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+t[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:n,max:t},r){return void 0!==n&&e<n?e=r?Vt(n,e,r.min):Math.max(e,n):void 0!==t&&e>t&&(e=r?Vt(t,e,r.max):Math.min(e,t)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;n&&ji(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!r)&&function(e,{top:n,left:t,bottom:r,right:i}){return{x:Li(e.x,t,i),y:Li(e.y,n,r)}}(r.layoutBox,n),this.elastic=function(e=zi){return!1===e?e=0:!0===e&&(e=zi),{x:Di(e,"left","right"),y:Di(e,"top","bottom")}}(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ri(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,n){const t={};return void 0!==n.min&&(t.min=n.min-e.min),void 0!==n.max&&(t.max=n.max-e.min),t}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ji(e))return!1;const t=e.current;kt(null!==t,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,n,t){const r=Zi(e,t),{scroll:i}=n;return i&&(Xi(r.x,i.offset.x),Xi(r.y,i.offset.y)),r}(t,r.root,this.visualElement.getTransformPagePoint());let a=function(e,n){return{x:Oi(e.x,n.x),y:Oi(e.y,n.y)}}(r.layout.layoutBox,i);if(n){const e=n(function({x:e,y:n}){return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Fi(e))}return a}startAnimation(e){const{drag:n,dragMomentum:t,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{},l=Ri(o=>{if(!ra(o,n,this.currentDirection))return;let l=s&&s[o]||{};a&&(l={min:0,max:0});const u=r?200:1e6,c=r?40:1e7,d={type:"inertia",velocity:t?e[o]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,d)});return Promise.all(l).then(o)}startAxisValueAnimation(e,n){const t=this.getAxisMotionValue(e);return Re(this.visualElement,e),t.start(Kr(e,t,0,n,this.visualElement,!1))}stopAnimation(){Ri(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ri(e=>{var n;return null===(n=this.getAxisMotionValue(e).animation)||void 0===n?void 0:n.pause()})}getAnimationState(e){var n;return null===(n=this.getAxisMotionValue(e).animation)||void 0===n?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,t=this.visualElement.getProps(),r=t[n];return r||this.visualElement.getValue(e,(t.initial?t.initial[e]:void 0)||0)}snapToCursor(e){Ri(n=>{const{drag:t}=this.getProps();if(!ra(n,t,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:t,max:a}=r.layout.layoutBox[n];i.set(e[n]-Vt(t,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:t}=this.visualElement;if(!ji(n)||!t||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ri(e=>{const n=this.getAxisMotionValue(e);if(n&&!1!==this.constraints){const t=n.get();r[e]=function(e,n){let t=.5;const r=Ci(e),i=Ci(n);return i>r?t=en(n.min,n.max-r,e.min):r>i&&(t=en(e.min,e.max-i,n.min)),yn(0,1,t)}({min:t,max:t},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",t.root&&t.root.updateScroll(),t.updateLayout(),this.resolveConstraints(),Ri(n=>{if(!ra(n,e,null))return;const t=this.getAxisMotionValue(n),{min:i,max:a}=this.constraints[n];t.set(Vt(i,a,r[n]))})}addListeners(){if(!this.visualElement.current)return;na.set(this.visualElement,this);const e=fi(this.visualElement.current,"pointerdown",e=>{const{drag:n,dragListener:t=!0}=this.getProps();n&&t&&this.start(e)}),n=()=>{const{dragConstraints:e}=this.getProps();ji(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:t}=this.visualElement,r=t.addEventListener("measure",n);t&&!t.layout&&(t.root&&t.root.updateScroll(),t.updateLayout()),ke.read(n);const i=pi(window,"resize",()=>this.scalePositionWithinConstraints()),a=t.addEventListener("didUpdate",({delta:e,hasLayoutChanged:n})=>{this.isDragging&&n&&(Ri(n=>{const t=this.getAxisMotionValue(n);t&&(this.originPoint[n]+=e[n].translate,t.set(t.get()+e[n].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:t=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=zi,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:t,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function ra(e,n,t){return!(!0!==n&&n!==e||null!==t&&t!==e)}const ia=e=>(n,t)=>{e&&ke.postRender(()=>e(n,t))};const aa=(0,i.createContext)(null);function oa(e=!0){const n=(0,i.useContext)(aa);if(null===n)return[!0,null];const{isPresent:t,onExitComplete:r,register:a}=n,o=(0,i.useId)();(0,i.useEffect)(()=>{e&&a(o)},[e]);const s=(0,i.useCallback)(()=>e&&r&&r(o),[o,r,e]);return!t&&r?[!1,s]:[!0]}const sa=(0,i.createContext)({}),la=(0,i.createContext)({}),ua={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ca(e,n){return n.max===n.min?0:e/(n.max-n.min)*100}const da={correct:(e,n)=>{if(!n.target)return e;if("string"==typeof e){if(!An.test(e))return e;e=parseFloat(e)}return`${ca(e,n.target.x)}% ${ca(e,n.target.y)}%`}},ma={correct:(e,{treeScale:n,projectionDelta:t})=>{const r=e,i=Qn.parse(e);if(i.length>5)return r;const a=Qn.createTransformer(e),o="number"!=typeof i[0]?1:0,s=t.x.scale*n.x,l=t.y.scale*n.y;i[0+o]/=s,i[1+o]/=l;const u=Vt(s,l,.5);return"number"==typeof i[2+o]&&(i[2+o]/=u),"number"==typeof i[3+o]&&(i[3+o]/=u),a(i)}},pa={};const{schedule:ha,cancel:fa}=ye(queueMicrotask,!1);class va extends i.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:t,layoutId:r}=this.props,{projection:i}=e;var a;a=xa,Object.assign(pa,a),i&&(n.group&&n.group.add(i),t&&t.register&&r&&t.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ua.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:t,drag:r,isPresent:i}=this.props,a=t.projection;return a?(a.isPresent=i,r||e.layoutDependency!==n||void 0===n?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||ke.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ha.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:t}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),t&&t.deregister&&t.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ga(e){const[n,t]=oa(),r=(0,i.useContext)(sa);return(0,o.jsx)(va,{...e,layoutGroup:r,switchLayoutGroup:(0,i.useContext)(la),isPresent:n,safeToRemove:t})}const xa={borderRadius:{...da,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:da,borderTopRightRadius:da,borderBottomLeftRadius:da,borderBottomRightRadius:da,boxShadow:ma};const ba=(e,n)=>e.depth-n.depth;class ya{constructor(){this.children=[],this.isDirty=!1}add(e){Ee(this.children,e),this.isDirty=!0}remove(e){Me(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ba),this.isDirty=!1,this.children.forEach(e)}}function ka(e,n){const t=Ne.now(),r=({timestamp:i})=>{const a=i-t;a>=n&&(we(r),e(a-n))};return ke.read(r,!0),()=>we(r)}function wa(e){const n=Ie(e)?e.get():e;return t=n,Boolean(t&&"object"==typeof t&&t.mix&&t.toValue)?n.toValue():n;var t}const Sa=["TopLeft","TopRight","BottomLeft","BottomRight"],ja=Sa.length,Ca=e=>"string"==typeof e?parseFloat(e):e,Pa=e=>"number"==typeof e||An.test(e);function Na(e,n){return void 0!==e[n]?e[n]:e.borderRadius}const Ea=Ta(0,.5,vn),Ma=Ta(.5,.95,xe);function Ta(e,n,t){return r=>r<e?0:r>n?1:t(en(e,n,r))}function La(e,n){e.min=n.min,e.max=n.max}function Oa(e,n){La(e.x,n.x),La(e.y,n.y)}function za(e,n){e.translate=n.translate,e.scale=n.scale,e.originPoint=n.originPoint,e.origin=n.origin}function Da(e,n,t,r,i){return e=Hi(e-=n,1/t,r),void 0!==i&&(e=Hi(e,1/i,r)),e}function Aa(e,n,[t,r,i],a,o){!function(e,n=0,t=1,r=.5,i,a=e,o=e){Dn.test(n)&&(n=parseFloat(n),n=Vt(o.min,o.max,n/100)-o.min);if("number"!=typeof n)return;let s=Vt(a.min,a.max,r);e===a&&(s-=n),e.min=Da(e.min,n,t,s,i),e.max=Da(e.max,n,t,s,i)}(e,n[t],n[r],n[i],n.scale,a,o)}const Ia=["x","scaleX","originX"],Ra=["y","scaleY","originY"];function Fa(e,n,t,r){Aa(e.x,n,Ia,t?t.x:void 0,r?r.x:void 0),Aa(e.y,n,Ra,t?t.y:void 0,r?r.y:void 0)}function _a(e){return 0===e.translate&&1===e.scale}function Ba(e){return _a(e.x)&&_a(e.y)}function Va(e,n){return e.min===n.min&&e.max===n.max}function Ua(e,n){return Math.round(e.min)===Math.round(n.min)&&Math.round(e.max)===Math.round(n.max)}function Wa(e,n){return Ua(e.x,n.x)&&Ua(e.y,n.y)}function Ha(e){return Ci(e.x)/Ci(e.y)}function $a(e,n){return e.translate===n.translate&&e.scale===n.scale&&e.originPoint===n.originPoint}class qa{constructor(){this.members=[]}add(e){Ee(this.members,e),e.scheduleRender()}remove(e){if(Me(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const n=this.members.findIndex(n=>e===n);if(0===n)return!1;let t;for(let e=n;e>=0;e--){const n=this.members[e];if(!1!==n.isPresent){t=n;break}}return!!t&&(this.promote(t),!0)}promote(e,n){const t=this.lead;if(e!==t&&(this.prevLead=t,this.lead=e,e.show(),t)){t.instance&&t.scheduleRender(),e.scheduleRender(),e.resumeFrom=t,n&&(e.resumeFrom.preserveOpacity=!0),t.snapshot&&(e.snapshot=t.snapshot,e.snapshot.latestValues=t.animationValues||t.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&t.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:t}=e;n.onExitComplete&&n.onExitComplete(),t&&t.options.onExitComplete&&t.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ka={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ya="undefined"!=typeof window&&void 0!==window.MotionDebug,Qa=["","X","Y","Z"],Xa={visibility:"hidden"};let Ga=0;function Ja(e,n,t,r){const{latestValues:i}=n;i[e]&&(t[e]=i[e],n.setStaticValue(e,0),r&&(r[e]=0))}function Za(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:n}=e.options;if(!n)return;const t=Be(n);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:n,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(t,"transform",ke,!(n||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Za(r)}function eo({attachResizeListener:e,defaultParent:n,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},t=(null==n?void 0:n())){this.id=Ga++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ya&&(Ka.totalNodes=Ka.resolvedTargetDeltas=Ka.recalculatedProjection=0),this.nodes.forEach(ro),this.nodes.forEach(co),this.nodes.forEach(mo),this.nodes.forEach(io),Ya&&window.MotionDebug.record(Ka)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new ya)}addEventListener(e,n){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Te),this.eventHandlers.get(e).add(n)}notifyListeners(e,...n){const t=this.eventHandlers.get(e);t&&t.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(n,t=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=n)instanceof SVGElement&&"svg"!==r.tagName,this.instance=n;const{layoutId:i,layout:a,visualElement:o}=this.options;if(o&&!o.current&&o.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),t&&(a||i)&&(this.isLayoutDirty=!0),e){let t;const r=()=>this.root.updateBlockedByResize=!1;e(n,()=>{this.root.updateBlockedByResize=!0,t&&t(),t=ka(r,250),ua.hasAnimatedSinceResize&&(ua.hasAnimatedSinceResize=!1,this.nodes.forEach(uo))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||a)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:n,hasRelativeTargetChanged:t,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||xo,{onLayoutAnimationStart:a,onLayoutAnimationComplete:s}=o.getProps(),l=!this.targetLayout||!Wa(this.targetLayout,r)||t,u=!n&&t;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);const n={...de(i,"layout"),onPlay:a,onComplete:s};(o.shouldReduceMotion||this.options.layoutRoot)&&(n.delay=0,n.type=!1),this.startAnimation(n)}else n||uo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,we(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(po),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Za(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){const n=this.path[e];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}const{layoutId:n,layout:t}=this.options;if(void 0===n&&!t)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(oo);this.isUpdating||this.nodes.forEach(so),this.isUpdating=!1,this.nodes.forEach(lo),this.nodes.forEach(no),this.nodes.forEach(to),this.clearAllSnapshots();const e=Ne.now();Se.delta=yn(0,1e3/60,e-Se.timestamp),Se.timestamp=e,Se.isProcessing=!0,je.update.process(Se),je.preRender.process(Se),je.render.process(Se),Se.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ha.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ao),this.sharedNodes.forEach(ho)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++){this.path[e].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:n}=this.options;n&&n.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let n=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(n=!1),n){const n=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:n,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:n}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,n=this.projectionDelta&&!Ba(this.projectionDelta),t=this.getTransformTemplate(),r=t?t(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(n||Vi(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const n=this.measurePageBox();let t=this.removeElementScroll(n);var r;return e&&(t=this.removeTransform(t)),ko((r=t).x),ko(r.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:t,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:n}=this.options;if(!n)return{x:{min:0,max:0},y:{min:0,max:0}};const t=n.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(So))){const{scroll:e}=this.root;e&&(Xi(t.x,e.offset.x),Xi(t.y,e.offset.y))}return t}removeElementScroll(e){var n;const t={x:{min:0,max:0},y:{min:0,max:0}};if(Oa(t,e),null===(n=this.scroll)||void 0===n?void 0:n.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&Oa(t,e),Xi(t.x,i.offset.x),Xi(t.y,i.offset.y))}return t}applyTransform(e,n=!1){const t={x:{min:0,max:0},y:{min:0,max:0}};Oa(t,e);for(let e=0;e<this.path.length;e++){const r=this.path[e];!n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ji(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),Vi(r.latestValues)&&Ji(t,r.latestValues)}return Vi(this.latestValues)&&Ji(t,this.latestValues),t}removeTransform(e){const n={x:{min:0,max:0},y:{min:0,max:0}};Oa(n,e);for(let e=0;e<this.path.length;e++){const t=this.path[e];if(!t.instance)continue;if(!Vi(t.latestValues))continue;Bi(t.latestValues)&&t.updateSnapshot();const r=Ii();Oa(r,t.measurePageBox()),Fa(n,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return Vi(this.latestValues)&&Fa(n,this.latestValues),n}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Se.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var n;const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(n=this.parent)||void 0===n?void 0:n.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:a}=this.options;if(this.layout&&(i||a)){if(this.resolvedRelativeTargetAt=Se.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ti(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,s,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,s=this.relativeTarget,l=this.relativeParent.target,Ei(o.x,s.x,l.x),Ei(o.y,s.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Oa(this.target,this.layout.layoutBox),Ki(this.target,this.targetDelta)):Oa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ti(this.relativeTargetOrigin,this.target,e.target),Oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ya&&Ka.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Bi(this.parent.latestValues)&&!Ui(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const n=this.getLead(),t=Boolean(this.resumingFrom)||this!==n;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Se.timestamp&&(r=!1),r)return;const{layout:i,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!a)return;Oa(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,s=this.treeScale.y;!function(e,n,t,r=!1){const i=t.length;if(!i)return;let a,o;n.x=n.y=1;for(let s=0;s<i;s++){a=t[s],o=a.projectionDelta;const{visualElement:i}=a.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ji(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(n.x*=o.x.scale,n.y*=o.y.scale,Ki(e,o)),r&&Vi(a.latestValues)&&Ji(e,a.latestValues))}n.x<Qi&&n.x>Yi&&(n.x=1),n.y<Qi&&n.y>Yi&&(n.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!n.layout||n.target||1===this.treeScale.x&&1===this.treeScale.y||(n.target=n.layout.layoutBox,n.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=n;l?(this.projectionDelta&&this.prevProjectionDelta?(za(this.prevProjectionDelta.x,this.projectionDelta.x),za(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Ni(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===s&&$a(this.projectionDelta.x,this.prevProjectionDelta.x)&&$a(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ya&&Ka.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var n;if(null===(n=this.options.visualElement)||void 0===n||n.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,n=!1){const t=this.snapshot,r=t?t.latestValues:{},i={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;const o={x:{min:0,max:0},y:{min:0,max:0}},s=(t?t.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(s&&!u&&!0===this.options.crossfade&&!this.path.some(go));let d;this.animationProgress=0,this.mixTargetDelta=n=>{const t=n/1e3;var l,m,p,h,f,v;fo(a.x,e.x,t),fo(a.y,e.y,t),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ti(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,h=this.relativeTargetOrigin,f=o,v=t,vo(p.x,h.x,f.x,v),vo(p.y,h.y,f.y,v),d&&(l=this.relativeTarget,m=d,Va(l.x,m.x)&&Va(l.y,m.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Oa(d,this.relativeTarget)),s&&(this.animationValues=i,function(e,n,t,r,i,a){i?(e.opacity=Vt(0,void 0!==t.opacity?t.opacity:1,Ea(r)),e.opacityExit=Vt(void 0!==n.opacity?n.opacity:1,0,Ma(r))):a&&(e.opacity=Vt(void 0!==n.opacity?n.opacity:1,void 0!==t.opacity?t.opacity:1,r));for(let i=0;i<ja;i++){const a=`border${Sa[i]}Radius`;let o=Na(n,a),s=Na(t,a);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||Pa(o)===Pa(s)?(e[a]=Math.max(Vt(Ca(o),Ca(s),r),0),(Dn.test(s)||Dn.test(o))&&(e[a]+="%")):e[a]=s)}(n.rotate||t.rotate)&&(e.rotate=Vt(n.rotate||0,t.rotate||0,r))}(i,r,this.latestValues,t,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=t},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(we(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{ua.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,n,t){const r=Ie(e)?e:De(e);return r.start(Kr("",r,n,t)),r.animation}(0,1e3,{...e,onUpdate:n=>{this.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:n,target:t,layout:r,latestValues:i}=e;if(n&&t&&r){if(this!==e&&this.layout&&r&&wo(this.options.animationType,this.layout.layoutBox,r.layoutBox)){t=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const n=Ci(this.layout.layoutBox.x);t.x.min=e.target.x.min,t.x.max=t.x.min+n;const r=Ci(this.layout.layoutBox.y);t.y.min=e.target.y.min,t.y.max=t.y.min+r}Oa(n,t),Ji(n,i),Ni(this.projectionDeltaWithTransform,this.layoutCorrected,n,i)}}registerSharedNode(e,n){this.sharedNodes.has(e)||this.sharedNodes.set(e,new qa);this.sharedNodes.get(e).add(n);const t=n.options.initialPromotionConfig;n.promote({transition:t?t.transition:void 0,preserveFollowOpacity:t&&t.shouldPreserveFollowOpacity?t.shouldPreserveFollowOpacity(n):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:n}=this.options;return n&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:n}=this.options;return n?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:n,preserveFollowOpacity:t}={}){const r=this.getStack();r&&r.promote(this,t),e&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let n=!1;const{latestValues:t}=e;if((t.z||t.rotate||t.rotateX||t.rotateY||t.rotateZ||t.skewX||t.skewY)&&(n=!0),!n)return;const r={};t.z&&Ja("z",e,r,this.animationValues);for(let n=0;n<Qa.length;n++)Ja(`rotate${Qa[n]}`,e,r,this.animationValues),Ja(`skew${Qa[n]}`,e,r,this.animationValues);e.render();for(const n in r)e.setStaticValue(n,r[n]),this.animationValues&&(this.animationValues[n]=r[n]);e.scheduleRender()}getProjectionStyles(e){var n,t;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Xa;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=wa(null==e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const n={};return this.options.layoutId&&(n.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,n.pointerEvents=wa(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!Vi(this.latestValues)&&(n.transform=i?i({},""):"none",this.hasProjected=!1),n}const o=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=function(e,n,t){let r="";const i=e.x.translate/n.x,a=e.y.translate/n.y,o=(null==t?void 0:t.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),1===n.x&&1===n.y||(r+=`scale(${1/n.x}, ${1/n.y}) `),t){const{transformPerspective:e,rotate:n,rotateX:i,rotateY:a,skewX:o,skewY:s}=t;e&&(r=`perspective(${e}px) ${r}`),n&&(r+=`rotate(${n}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),o&&(r+=`skewX(${o}deg) `),s&&(r+=`skewY(${s}deg) `)}const s=e.x.scale*n.x,l=e.y.scale*n.y;return 1===s&&1===l||(r+=`scale(${s}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),i&&(r.transform=i(o,r.transform));const{x:s,y:l}=this.projectionDelta;r.transformOrigin=`${100*s.origin}% ${100*l.origin}% 0`,a.animationValues?r.opacity=a===this?null!==(t=null!==(n=o.opacity)&&void 0!==n?n:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=a===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const e in pa){if(void 0===o[e])continue;const{correct:n,applyTo:t}=pa[e],i="none"===r.transform?o[e]:n(o[e],a);if(t){const e=t.length;for(let n=0;n<e;n++)r[t[n]]=i}else r[e]=i}return this.options.layoutId&&(r.pointerEvents=a===this?wa(null==e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var n;return null===(n=e.currentAnimation)||void 0===n?void 0:n.stop()}),this.root.nodes.forEach(oo),this.root.sharedNodes.clear()}}}function no(e){e.updateLayout()}function to(e){var n;const t=(null===(n=e.resumeFrom)||void 0===n?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;"size"===i?Ri(e=>{const r=a?t.measuredBox[e]:t.layoutBox[e],i=Ci(r);r.min=n[e].min,r.max=r.min+i}):wo(i,t.layoutBox,n)&&Ri(r=>{const i=a?t.measuredBox[r]:t.layoutBox[r],o=Ci(n[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Ni(o,n,t.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Ni(s,e.applyTransform(r,!0),t.measuredBox):Ni(s,n,t.layoutBox);const l=!Ba(o);let u=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:a}=r;if(i&&a){const o={x:{min:0,max:0},y:{min:0,max:0}};Ti(o,t.layoutBox,i.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};Ti(s,n,a.layoutBox),Wa(o,s)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:s,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function ro(e){Ya&&Ka.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function io(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ao(e){e.clearSnapshot()}function oo(e){e.clearMeasurements()}function so(e){e.isLayoutDirty=!1}function lo(e){const{visualElement:n}=e.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),e.resetTransform()}function uo(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function co(e){e.resolveTargetDelta()}function mo(e){e.calcProjection()}function po(e){e.resetSkewAndRotation()}function ho(e){e.removeLeadSnapshot()}function fo(e,n,t){e.translate=Vt(n.translate,0,t),e.scale=Vt(n.scale,1,t),e.origin=n.origin,e.originPoint=n.originPoint}function vo(e,n,t,r){e.min=Vt(n.min,t.min,r),e.max=Vt(n.max,t.max,r)}function go(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const xo={duration:.45,ease:[.4,0,.1,1]},bo=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),yo=bo("applewebkit/")&&!bo("chrome/")?Math.round:xe;function ko(e){e.min=yo(e.min),e.max=yo(e.max)}function wo(e,n,t){return"position"===e||"preserve-aspect"===e&&(r=Ha(n),i=Ha(t),a=.2,!(Math.abs(r-i)<=a));var r,i,a}function So(e){var n;return e!==e.root&&(null===(n=e.scroll)||void 0===n?void 0:n.wasRoot)}const jo=eo({attachResizeListener:(e,n)=>pi(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Co={current:void 0},Po=eo({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Co.current){const e=new jo({});e.mount(window),e.setOptions({layoutScroll:!0}),Co.current=e}return Co.current},resetTransform:(e,n)=>{e.style.transform=void 0!==n?n:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),No={pan:{Feature:class extends si{constructor(){super(...arguments),this.removePointerDownListener=xe}onPointerDown(e){this.session=new gi(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ea(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:t,onPanEnd:r}=this.node.getProps();return{onSessionStart:ia(e),onStart:ia(n),onMove:t,onEnd:(e,n)=>{delete this.session,r&&ke.postRender(()=>r(e,n))}}}mount(){this.removePointerDownListener=fi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends si{constructor(e){super(e),this.removeGroupControls=xe,this.removeListeners=xe,this.controls=new ta(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xe}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Po,MeasureLayout:ga}};function Eo(e,n){const t=function(e,n,t){var r;if(e instanceof Element)return[e];if("string"==typeof e){let i=document;n&&(i=n.current);const a=null!==(r=null==t?void 0:t[e])&&void 0!==r?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),r=new AbortController;return[t,{passive:!0,...n,signal:r.signal},()=>r.abort()]}function Mo(e){return n=>{"touch"===n.pointerType||di()||e(n)}}function To(e,n,t){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===t);const i=r["onHover"+t];i&&ke.postRender(()=>i(n,hi(n)))}const Lo=(e,n)=>!!n&&(e===n||Lo(e,n.parentElement)),Oo=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const zo=new WeakSet;function Do(e){return n=>{"Enter"===n.key&&e(n)}}function Ao(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}function Io(e){return mi(e)&&!di()}function Ro(e,n,t={}){const[r,i,a]=Eo(e,t),o=e=>{const r=e.currentTarget;if(!Io(e)||zo.has(r))return;zo.add(r);const a=n(e),o=(e,n)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),Io(e)&&zo.has(r)&&(zo.delete(r),"function"==typeof a&&a(e,{success:n}))},s=e=>{o(e,t.useGlobalTarget||Lo(r,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",s,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{(function(e){return Oo.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(t.useGlobalTarget?window:e).addEventListener("pointerdown",o,i),e.addEventListener("focus",e=>((e,n)=>{const t=e.currentTarget;if(!t)return;const r=Do(()=>{if(zo.has(t))return;Ao(t,"down");const e=Do(()=>{Ao(t,"up")});t.addEventListener("keyup",e,n),t.addEventListener("blur",()=>Ao(t,"cancel"),n)});t.addEventListener("keydown",r,n),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),n)})(e,i),i)}),a}function Fo(e,n,t){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===t);const i=r["onTap"+("End"===t?"":t)];i&&ke.postRender(()=>i(n,hi(n)))}const _o=new WeakMap,Bo=new WeakMap,Vo=e=>{const n=_o.get(e.target);n&&n(e)},Uo=e=>{e.forEach(Vo)};function Wo(e,n,t){const r=function({root:e,...n}){const t=e||document;Bo.has(t)||Bo.set(t,{});const r=Bo.get(t),i=JSON.stringify(n);return r[i]||(r[i]=new IntersectionObserver(Uo,{root:e,...n})),r[i]}(n);return _o.set(e,t),r.observe(e),()=>{_o.delete(e),r.unobserve(e)}}const Ho={some:0,all:1};const $o={inView:{Feature:class extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:t,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:t,threshold:"number"==typeof r?r:Ho[r]};return Wo(this.node.current,a,e=>{const{isIntersecting:n}=e;if(this.isInView===n)return;if(this.isInView=n,i&&!n&&this.hasEnteredView)return;n&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",n);const{onViewportEnter:t,onViewportLeave:r}=this.node.getProps(),a=n?t:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:n={}}={}){return t=>e[t]!==n[t]}(e,n))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends si{mount(){const{current:e}=this.node;e&&(this.unmount=Ro(e,e=>(Fo(this.node,e,"Start"),(e,{success:n})=>Fo(this.node,e,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qt(pi(this.node.current,"focus",()=>this.onFocus()),pi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends si{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,n,t={}){const[r,i,a]=Eo(e,t),o=Mo(e=>{const{target:t}=e,r=n(e);if("function"!=typeof r||!t)return;const a=Mo(e=>{r(e),t.removeEventListener("pointerleave",a)});t.addEventListener("pointerleave",a,i)});return r.forEach(e=>{e.addEventListener("pointerenter",o,i)}),a}(e,e=>(To(this.node,e,"Start"),e=>To(this.node,e,"End"))))}unmount(){}}}},qo={layout:{ProjectionNode:Po,MeasureLayout:ga}},Ko=(0,i.createContext)({strict:!1}),Yo=(0,i.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Qo=(0,i.createContext)({});function Xo(e){return te(e.animate)||ce.some(n=>ae(e[n]))}function Go(e){return Boolean(Xo(e)||e.variants)}function Jo(e){const{initial:n,animate:t}=function(e,n){if(Xo(e)){const{initial:n,animate:t}=e;return{initial:!1===n||ae(n)?n:void 0,animate:ae(t)?t:void 0}}return!1!==e.inherit?n:{}}(e,(0,i.useContext)(Qo));return(0,i.useMemo)(()=>({initial:n,animate:t}),[Zo(n),Zo(t)])}function Zo(e){return Array.isArray(e)?e.join(" "):e}const es="undefined"!=typeof window,ns={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ts={};for(const e in ns)ts[e]={isEnabled:n=>ns[e].some(e=>!!n[e])};const rs=Symbol.for("motionComponentSymbol");function is(e,n,t){return(0,i.useCallback)(r=>{r&&e.onMount&&e.onMount(r),n&&(r?n.mount(r):n.unmount()),t&&("function"==typeof t?t(r):ji(t)&&(t.current=r))},[n])}const as=es?i.useLayoutEffect:i.useEffect;function os(e,n,t,r,a){var o,s;const{visualElement:l}=(0,i.useContext)(Qo),u=(0,i.useContext)(Ko),c=(0,i.useContext)(aa),d=(0,i.useContext)(Yo).reducedMotion,m=(0,i.useRef)(null);r=r||u.renderer,!m.current&&r&&(m.current=r(e,{visualState:n,parent:l,props:t,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:d}));const p=m.current,h=(0,i.useContext)(la);!p||p.projection||!a||"html"!==p.type&&"svg"!==p.type||function(e,n,t,r){const{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:l,layoutRoot:u}=n;e.projection=new t(e.latestValues,n["data-framer-portal-id"]?void 0:ss(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:Boolean(o)||s&&ji(s),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}(m.current,t,a,h);const f=(0,i.useRef)(!1);(0,i.useInsertionEffect)(()=>{p&&f.current&&p.update(t,c)});const v=t[_e],g=(0,i.useRef)(Boolean(v)&&!(null===(o=window.MotionHandoffIsComplete)||void 0===o?void 0:o.call(window,v))&&(null===(s=window.MotionHasOptimisedAnimation)||void 0===s?void 0:s.call(window,v)));return as(()=>{p&&(f.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),ha.render(p.render),g.current&&p.animationState&&p.animationState.animateChanges())}),(0,i.useEffect)(()=>{p&&(!g.current&&p.animationState&&p.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,v)}),g.current=!1))}),p}function ss(e){if(e)return!1!==e.options.allowProjection?e.projection:ss(e.parent)}function ls({preloadedFeatures:e,createVisualElement:n,useRender:t,useVisualState:r,Component:a}){var s,l;function u(e,s){let l;const u={...(0,i.useContext)(Yo),...e,layoutId:us(e)},{isStatic:c}=u,d=Jo(e),m=r(e,c);if(!c&&es){!function(){(0,i.useContext)(Ko).strict;0}();const e=function(e){const{drag:n,layout:t}=ts;if(!n&&!t)return{};const r={...n,...t};return{MeasureLayout:(null==n?void 0:n.isEnabled(e))||(null==t?void 0:t.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(u);l=e.MeasureLayout,d.visualElement=os(a,m,u,n,e.ProjectionNode)}return(0,o.jsxs)(Qo.Provider,{value:d,children:[l&&d.visualElement?(0,o.jsx)(l,{visualElement:d.visualElement,...u}):null,t(a,e,is(m,d.visualElement,s),m,c,d.visualElement)]})}e&&function(e){for(const n in e)ts[n]={...ts[n],...e[n]}}(e),u.displayName=`motion.${"string"==typeof a?a:`create(${null!==(l=null!==(s=a.displayName)&&void 0!==s?s:a.name)&&void 0!==l?l:""})`}`;const c=(0,i.forwardRef)(u);return c[rs]=a,c}function us({layoutId:e}){const n=(0,i.useContext)(sa).id;return n&&void 0!==e?n+"-"+e:e}const cs=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ds(e){return"string"==typeof e&&!e.includes("-")&&!!(cs.indexOf(e)>-1||/[A-Z]/u.test(e))}function ms(e){const n=(0,i.useRef)(null);return null===n.current&&(n.current=e()),n.current}const ps=e=>(n,t)=>{const r=(0,i.useContext)(Qo),a=(0,i.useContext)(aa),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:n,onUpdate:t},r,i,a){const o={latestValues:hs(r,i,a,e),renderState:n()};return t&&(o.onMount=e=>t({props:r,current:e,...o}),o.onUpdate=e=>t(e)),o}(e,n,r,a);return t?o():ms(o)};function hs(e,n,t,r){const i={},a=r(e,{});for(const e in a)i[e]=wa(a[e]);let{initial:o,animate:s}=e;const l=Xo(e),u=Go(e);n&&u&&!l&&!1!==e.inherit&&(void 0===o&&(o=n.initial),void 0===s&&(s=n.animate));let c=!!t&&!1===t.initial;c=c||!1===o;const d=c?s:o;if(d&&"boolean"!=typeof d&&!te(d)){const n=Array.isArray(d)?d:[d];for(let t=0;t<n.length;t++){const r=se(e,n[t]);if(r){const{transitionEnd:e,transition:n,...t}=r;for(const e in t){let n=t[e];if(Array.isArray(n)){n=n[c?n.length-1:0]}null!==n&&(i[e]=n)}for(const n in e)i[n]=e[n]}}}return i}const fs=(e,n)=>n&&"number"==typeof e?n.transform(e):e,vs={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gs=me.length;function xs(e,n,t){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,s=!1;for(const e in n){const t=n[e];if(pe.has(e))o=!0;else if(jt(e))i[e]=t;else{const n=fs(t,rt[e]);e.startsWith("origin")?(s=!0,a[e]=n):r[e]=n}}if(n.transform||(o||t?r.transform=function(e,n,t){let r="",i=!0;for(let a=0;a<gs;a++){const o=me[a],s=e[o];if(void 0===s)continue;let l=!0;if(l="number"==typeof s?s===(o.startsWith("scale")?1:0):0===parseFloat(s),!l||t){const e=fs(s,rt[o]);l||(i=!1,r+=`${vs[o]||o}(${e}) `),t&&(n[o]=e)}}return r=r.trim(),t?r=t(n,i?"":r):i&&(r="none"),r}(n,e.transform,t):r.transform&&(r.transform="none")),s){const{originX:e="50%",originY:n="50%",originZ:t=0}=a;r.transformOrigin=`${e} ${n} ${t}`}}const bs={offset:"stroke-dashoffset",array:"stroke-dasharray"},ys={offset:"strokeDashoffset",array:"strokeDasharray"};function ks(e,n,t){return"string"==typeof e?e:An.transform(n+t*e)}function ws(e,{attrX:n,attrY:t,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:s=1,pathOffset:l=0,...u},c,d){if(xs(e,u,d),c)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:h}=e;m.transform&&(h&&(p.transform=m.transform),delete m.transform),h&&(void 0!==i||void 0!==a||p.transform)&&(p.transformOrigin=function(e,n,t){return`${ks(n,e.x,e.width)} ${ks(t,e.y,e.height)}`}(h,void 0!==i?i:.5,void 0!==a?a:.5)),void 0!==n&&(m.x=n),void 0!==t&&(m.y=t),void 0!==r&&(m.scale=r),void 0!==o&&function(e,n,t=1,r=0,i=!0){e.pathLength=1;const a=i?bs:ys;e[a.offset]=An.transform(-r);const o=An.transform(n),s=An.transform(t);e[a.array]=`${o} ${s}`}(m,o,s,l,!1)}const Ss=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),js=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Cs=e=>"string"==typeof e&&"svg"===e.toLowerCase();function Ps(e,{style:n,vars:t},r,i){Object.assign(e.style,n,i&&i.getProjectionStyles(r));for(const n in t)e.style.setProperty(n,t[n])}const Ns=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Es(e,n,t,r){Ps(e,n,void 0,r);for(const t in n.attrs)e.setAttribute(Ns.has(t)?t:Fe(t),n.attrs[t])}function Ms(e,{layout:n,layoutId:t}){return pe.has(e)||e.startsWith("origin")||(n||void 0!==t)&&(!!pa[e]||"opacity"===e)}function Ts(e,n,t){var r;const{style:i}=e,a={};for(const o in i)(Ie(i[o])||n.style&&Ie(n.style[o])||Ms(o,e)||void 0!==(null===(r=null==t?void 0:t.getValue(o))||void 0===r?void 0:r.liveStyle))&&(a[o]=i[o]);return a}function Ls(e,n,t){const r=Ts(e,n,t);for(const t in e)if(Ie(e[t])||Ie(n[t])){r[-1!==me.indexOf(t)?"attr"+t.charAt(0).toUpperCase()+t.substring(1):t]=e[t]}return r}const Os=["x","y","width","height","cx","cy","r"],zs={useVisualState:ps({scrapeMotionValuesFromProps:Ls,createRenderState:js,onUpdate:({props:e,prevProps:n,current:t,renderState:r,latestValues:i})=>{if(!t)return;let a=!!e.drag;if(!a)for(const e in i)if(pe.has(e)){a=!0;break}if(!a)return;let o=!n;if(n)for(let t=0;t<Os.length;t++){const r=Os[t];e[r]!==n[r]&&(o=!0)}o&&ke.read(()=>{!function(e,n){try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}}(t,r),ke.render(()=>{ws(r,i,Cs(t.tagName),e.transformTemplate),Es(t,r)})})}})},Ds={useVisualState:ps({scrapeMotionValuesFromProps:Ts,createRenderState:Ss})};function As(e,n,t){for(const r in n)Ie(n[r])||Ms(r,t)||(e[r]=n[r])}function Is(e,n){const t={};return As(t,e.style||{},e),Object.assign(t,function({transformTemplate:e},n){return(0,i.useMemo)(()=>{const t={style:{},transform:{},transformOrigin:{},vars:{}};return xs(t,n,e),Object.assign({},t.vars,t.style)},[n])}(e,n)),t}function Rs(e,n){const t={},r=Is(e,n);return e.drag&&!1!==e.dragListener&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(t.tabIndex=0),t.style=r,t}const Fs=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _s(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Fs.has(e)}let Bs=e=>!_s(e);try{(Vs=require("@emotion/is-prop-valid").default)&&(Bs=e=>e.startsWith("on")?!_s(e):Vs(e))}catch(e){}var Vs;function Us(e,n,t,r){const a=(0,i.useMemo)(()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ws(t,n,Cs(r),e.transformTemplate),{...t.attrs,style:{...t.style}}},[n]);if(e.style){const n={};As(n,e.style,e),a.style={...n,...a.style}}return a}function Ws(e=!1){return(n,t,r,{latestValues:a},o)=>{const s=(ds(n)?Us:Rs)(t,a,o,n),l=function(e,n,t){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(Bs(i)||!0===t&&_s(i)||!n&&!_s(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"==typeof n,e),u=n!==i.Fragment?{...l,...s,ref:r}:{},{children:c}=t,d=(0,i.useMemo)(()=>Ie(c)?c.get():c,[c]);return(0,i.createElement)(n,{...u,children:d})}}function Hs(e,n){return function(t,{forwardMotionProps:r}={forwardMotionProps:!1}){return ls({...ds(t)?zs:Ds,preloadedFeatures:e,useRender:Ws(r),createVisualElement:n,Component:t})}}const $s={current:null},qs={current:!1};const Ks=[...Lt,Bn,Qn],Ys=new WeakMap;const Qs=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Xs{scrapeMotionValuesFromProps(e,n,t){return{}}constructor({parent:e,props:n,presenceContext:t,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bt,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ne.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ke.render(this.render,!1,!0))};const{latestValues:s,renderState:l,onUpdate:u}=a;this.onUpdate=u,this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=t,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=Xo(n),this.isVariantNode=Go(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const e in d){const n=d[e];void 0!==s[e]&&Ie(n)&&n.set(s[e],!1)}}mount(e){this.current=e,Ys.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),qs.current||function(){if(qs.current=!0,es)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),n=()=>$s.current=e.matches;e.addListener(n),n()}else $s.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||$s.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ys.delete(this.current),this.projection&&this.projection.unmount(),we(this.notifyUpdate),we(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const t=pe.has(e),r=n.on("change",n=>{this.latestValues[e]=n,this.props.onUpdate&&ke.preRender(this.notifyUpdate),t&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in ts){const n=ts[e];if(!n)continue;const{isEnabled:t,Feature:r}=n;if(!this.features[e]&&r&&t(this.props)&&(this.features[e]=new r(this)),this.features[e]){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let n=0;n<Qs.length;n++){const t=Qs[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,n,t){for(const r in n){const i=n[r],a=t[r];if(Ie(i))e.addValue(r,i);else if(Ie(a))e.addValue(r,De(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const n=e.getValue(r);!0===n.liveStyle?n.jump(i):n.hasAnimated||n.set(i)}else{const n=e.getStaticValue(r);e.addValue(r,De(void 0!==n?n:i,{owner:e}))}}for(const r in t)void 0===n[r]&&e.removeValue(r);return n}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const t=this.values.get(e);n!==t&&(t&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let t=this.values.get(e);return void 0===t&&void 0!==n&&(t=De(null===n?void 0:n,{owner:this}),this.addValue(e,t)),t}readValue(e,n){var t;let r=void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return null!=r&&("string"==typeof r&&(wt(r)||xn(r))?r=parseFloat(r):(i=r,!Ks.find(Tt(i))&&Qn.test(n)&&(r=ot(e,n))),this.setBaseTarget(e,Ie(r)?r.get():r)),Ie(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:t}=this.props;let r;if("string"==typeof t||"object"==typeof t){const i=se(this.props,t,null===(n=this.presenceContext)||void 0===n?void 0:n.custom);i&&(r=i[e])}if(t&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Ie(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,n){return this.events[e]||(this.events[e]=new Te),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Gs extends Xs{constructor(){super(...arguments),this.KeyframeResolver=zt}sortInstanceNodePosition(e,n){return 2&e.compareDocumentPosition(n)?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:t}){delete n[e],delete t[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ie(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Js extends Gs{constructor(){super(...arguments),this.type="html",this.renderInstance=Ps}readValueFromInstance(e,n){if(pe.has(n)){const e=at(n);return e&&e.default||0}{const r=(t=e,window.getComputedStyle(t)),i=(jt(n)?r.getPropertyValue(n):r[n])||0;return"string"==typeof i?i.trim():i}var t}measureInstanceViewportBox(e,{transformPagePoint:n}){return Zi(e,n)}build(e,n,t){xs(e,n,t.transformTemplate)}scrapeMotionValuesFromProps(e,n,t){return Ts(e,n,t)}}class Zs extends Gs{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ii}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(pe.has(n)){const e=at(n);return e&&e.default||0}return n=Ns.has(n)?n:Fe(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,t){return Ls(e,n,t)}build(e,n,t){ws(e,n,this.isSVGTag,t.transformTemplate)}renderInstance(e,n,t,r){Es(e,n,0,r)}mount(e){this.isSVGTag=Cs(e.tagName),super.mount(e)}}const el=(e,n)=>ds(e)?new Zs(n):new Js(n,{allowProjection:e!==i.Fragment}),nl=ne(Hs({...ui,...$o,...No,...qo},el));class tl extends i.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=n.offsetHeight||0,e.width=n.offsetWidth||0,e.top=n.offsetTop,e.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function rl({children:e,isPresent:n}){const t=(0,i.useId)(),r=(0,i.useRef)(null),a=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:s}=(0,i.useContext)(Yo);return(0,i.useInsertionEffect)(()=>{const{width:e,height:i,top:o,left:l}=a.current;if(n||!r.current||!e||!i)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`\n          [data-motion-pop-id="${t}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${i}px !important;\n            top: ${o}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(u)}},[n]),(0,o.jsx)(tl,{isPresent:n,childRef:r,sizeRef:a,children:i.cloneElement(e,{ref:r})})}const il=({children:e,initial:n,isPresent:t,onExitComplete:r,custom:a,presenceAffectsLayout:s,mode:l})=>{const u=ms(al),c=(0,i.useId)(),d=(0,i.useCallback)(e=>{u.set(e,!0);for(const e of u.values())if(!e)return;r&&r()},[u,r]),m=(0,i.useMemo)(()=>({id:c,initial:n,isPresent:t,custom:a,onExitComplete:d,register:e=>(u.set(e,!1),()=>u.delete(e))}),s?[Math.random(),d]:[t,d]);return(0,i.useMemo)(()=>{u.forEach((e,n)=>u.set(n,!1))},[t]),i.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),"popLayout"===l&&(e=(0,o.jsx)(rl,{isPresent:t,children:e})),(0,o.jsx)(aa.Provider,{value:m,children:e})};function al(){return new Map}const ol=e=>e.key||"";function sl(e){const n=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&n.push(e)}),n}const ll=({children:e,custom:n,initial:t=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:s="sync",propagate:l=!1})=>{const[u,c]=oa(l),d=(0,i.useMemo)(()=>sl(e),[e]),m=l&&!u?[]:d.map(ol),p=(0,i.useRef)(!0),h=(0,i.useRef)(d),f=ms(()=>new Map),[v,g]=(0,i.useState)(d),[x,b]=(0,i.useState)(d);as(()=>{p.current=!1,h.current=d;for(let e=0;e<x.length;e++){const n=ol(x[e]);m.includes(n)?f.delete(n):!0!==f.get(n)&&f.set(n,!1)}},[x,m.length,m.join("-")]);const y=[];if(d!==v){let e=[...d];for(let n=0;n<x.length;n++){const t=x[n],r=ol(t);m.includes(r)||(e.splice(n,0,t),y.push(t))}return"wait"===s&&y.length&&(e=y),b(sl(e)),void g(d)}const{forceRender:k}=(0,i.useContext)(sa);return(0,o.jsx)(o.Fragment,{children:x.map(e=>{const i=ol(e),v=!(l&&!u)&&(d===x||m.includes(i));return(0,o.jsx)(il,{isPresent:v,initial:!(p.current&&!t)&&void 0,custom:v?void 0:n,presenceAffectsLayout:a,mode:s,onExitComplete:v?void 0:()=>{if(!f.has(i))return;f.set(i,!0);let e=!0;f.forEach(n=>{n||(e=!1)}),e&&(null==k||k(),b(h.current),l&&(null==c||c()),r&&r())},children:e},i)})})},ul=y,cl={book:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,o.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),settings:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,o.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),layers:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,o.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,o.jsx)("path",{d:"M2 12l10 5 10-5"})]}),tools:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),terminal:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,o.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),upload:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,o.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,o.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),box:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,o.jsx)("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),(0,o.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),plus:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),dots:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,o.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,o.jsx)("circle",{cx:"5",cy:"12",r:"1"})]}),lines:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),(0,o.jsx)("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),(0,o.jsx)("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),(0,o.jsx)("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]}),edit:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),chevronDown:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"6 9 12 15 18 9"})}),package:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}),(0,o.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,o.jsx)("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),(0,o.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),download:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,o.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,o.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})};function dl(e){let{item:n,packName:t,onEdit:r,editIcon:i}=e;const{objectPosition:a}=O(n.lumia_img);return(0,o.jsxs)("div",{className:"lumia-pack-lumia-item",children:[n.lumia_img&&(0,o.jsx)("img",{src:n.lumia_img,alt:"",className:"lumia-pack-lumia-avatar",style:{objectPosition:a},onError:e=>{e.target.style.display="none"}}),(0,o.jsx)("span",{className:"lumia-pack-lumia-name",children:n.lumiaDefName}),(0,o.jsx)("button",{className:"lumia-btn lumia-btn-icon lumia-btn-icon-sm",onClick:()=>r(t,n),title:"Edit Lumia",type:"button",children:i})]})}function ml(e){let{title:n,icon:t,children:r}=e;return(0,o.jsxs)("div",{className:"lumia-panel",children:[(0,o.jsxs)("div",{className:"lumia-panel-header",children:[(0,o.jsx)("span",{className:"lumia-panel-icon",children:t}),(0,o.jsx)("span",{className:"lumia-panel-title",children:n})]}),(0,o.jsx)("div",{className:"lumia-panel-content",children:r})]})}function pl(e){let{title:n,icon:t,children:r}=e;const[a,s]=(0,i.useState)(!1);return(0,o.jsxs)("details",{className:"lumia-panel lumia-panel-collapsible",open:a,onToggle:e=>s(e.target.open),children:[(0,o.jsxs)("summary",{className:"lumia-panel-header lumia-panel-header-clickable",children:[(0,o.jsx)("span",{className:"lumia-panel-icon",children:t}),(0,o.jsx)("span",{className:"lumia-panel-title",children:n}),(0,o.jsx)("span",{className:"lumia-panel-chevron",children:cl.chevronDown})]}),(0,o.jsx)("div",{className:"lumia-panel-content lumia-macro-reference",children:r})]})}function hl(e){let{label:n,hint:t,selections:r,dominant:a,modalName:s}=e;const l=j(),u=(null==r?void 0:r.length)||0,c=(0,i.useMemo)(()=>{if(0===u)return"No ".concat(n.toLowerCase()," selected");const e=null==a?void 0:a.id,t=(null==a?void 0:a.name)||(null==a?void 0:a.itemName)||(null==a?void 0:a.lumiaDefName);return r.map(n=>{const r=(null==n?void 0:n.name)||(null==n?void 0:n.itemName)||(null==n?void 0:n.lumiaDefName)||"Unknown",i=null==n?void 0:n.id;return a&&(e&&i&&e===i||t&&r&&t===r)?" ".concat(r):r}).join(", ")},[u,r,n,a]);return(0,o.jsxs)("div",{className:"lumia-selector",children:[(0,o.jsxs)("div",{className:"lumia-selector-header",children:[(0,o.jsx)("span",{className:"lumia-selector-label",children:n}),(0,o.jsx)("span",{className:"lumia-selector-hint",children:t})]}),(0,o.jsxs)("div",{className:"lumia-selector-row",children:[(0,o.jsx)("div",{className:"lumia-selector-value",children:c}),(0,o.jsx)("button",{className:"lumia-btn lumia-btn-sm",onClick:()=>l.openModal(s),type:"button",children:"Select"})]})]})}function fl(e){let{icon:n,label:t,onClick:r,accent:i=!1}=e;return(0,o.jsxs)("button",{className:D("lumia-tool-btn",i&&"lumia-tool-btn-accent"),onClick:r,type:"button",children:[n,(0,o.jsx)("span",{children:t})]})}function vl(e){let{code:n,description:t}=e;const[r,a]=(0,i.useState)(!1),s=(0,i.useCallback)(()=>{navigator.clipboard.writeText(n),a(!0),setTimeout(()=>a(!1),1500)},[n]);return(0,o.jsxs)("div",{className:D("lumia-macro",r&&"lumia-macro--copied"),onClick:s,title:"Click to copy",children:[(0,o.jsx)("code",{children:n}),(0,o.jsx)("span",{children:r?"Copied!":t})]})}const gl=function(){N();const e=E(),n=M(),t=j(),{packs:r,customPacks:a,allPacks:s}=T(),[l,u]=(0,i.useState)(null),c=(0,i.useCallback)(e=>{u(n=>n===e?null:e)},[]),d=s.length,m=(0,i.useMemo)(()=>s.reduce((e,n)=>{var t;return e+((null===(t=n.items)||void 0===t?void 0:t.length)||0)},0),[s]),p=(0,i.useCallback)(function(e){if("undefined"!=typeof LumiverseBridge){const i=LumiverseBridge.getCallbacks();if(i&&i[e]){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];i[e](...t)}}},[]),h=(0,i.useCallback)(e=>{var n;const t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!t)return;console.log("[SettingsPanel] File selected for upload:",t.name);const r=new FileReader;r.onload=e=>{try{const n=JSON.parse(e.target.result);if(console.log("[SettingsPanel] JSON parsed successfully, entries:",n.entries?Object.keys(n.entries).length:"no entries field"),"undefined"!=typeof LumiverseBridge){const e=LumiverseBridge.getCallbacks();console.log("[SettingsPanel] Available callbacks:",e?Object.keys(e).filter(n=>e[n]):"none"),e&&e.handleNewBook?(console.log("[SettingsPanel] Calling handleNewBook..."),e.handleNewBook(n,t.name,!1),e.refreshUIDisplay&&e.refreshUIDisplay(),console.log("[SettingsPanel] Import complete")):(console.error("[SettingsPanel] handleNewBook callback not registered"),"undefined"!=typeof toastr&&toastr.error("Import function not available. Please reload the page."))}else console.error("[SettingsPanel] LumiverseBridge not available"),"undefined"!=typeof toastr&&toastr.error("Bridge not available. Please reload the page.")}catch(e){console.error("[SettingsPanel] Failed to parse JSON:",e),"undefined"!=typeof toastr&&toastr.error("Failed to parse JSON: "+e.message)}},r.onerror=()=>{console.error("[SettingsPanel] Failed to read file"),"undefined"!=typeof toastr&&toastr.error("Failed to read file")},r.readAsText(t),e.target.value=""},[]),f=(0,i.useSyncExternalStore)(ul.subscribe,()=>{var e;return null===(e=ul.getState().showLumiverseDrawer)||void 0===e||e},()=>{var e;return null===(e=ul.getState().showLumiverseDrawer)||void 0===e||e}),v=(0,i.useCallback)(e=>{ul.setState({showLumiverseDrawer:e}),b()},[]);return(0,o.jsxs)("div",{className:"lumia-injector-settings",children:[(0,o.jsx)("div",{className:"lumia-drawer-toggle-container",children:(0,o.jsxs)("label",{className:"lumiverse-toggle-wrapper",children:[(0,o.jsxs)("div",{className:"lumiverse-toggle-text",children:[(0,o.jsx)("span",{className:"lumiverse-toggle-label",children:"Show Lumiverse Drawer"}),(0,o.jsx)("span",{className:"lumiverse-toggle-description",children:"Access quick settings from a slide-out panel"})]}),(0,o.jsxs)("div",{className:D("lumiverse-toggle",f&&"lumiverse-toggle--on"),children:[(0,o.jsx)("input",{type:"checkbox",className:"lumiverse-toggle-input",checked:f,onChange:e=>v(e.target.checked)}),(0,o.jsx)("span",{className:"lumiverse-toggle-slider"})]})]})}),(0,o.jsxs)(ml,{title:"World Book Source",icon:cl.book,children:[(0,o.jsx)("div",{className:"lumia-status-badge",children:d>0?"".concat(d," pack").concat(1!==d?"s":""," loaded (").concat(m," items)"):"No packs loaded"}),(0,o.jsxs)("div",{className:"lumia-input-row",children:[(0,o.jsx)("input",{type:"text",className:"lumia-input",placeholder:"Enter World Book URL (JSON)",id:"lumia-url-input-react"}),(0,o.jsx)("button",{className:"lumia-btn lumia-btn-primary",onClick:()=>p("fetchWorldBook"),type:"button",children:"Fetch"})]}),(0,o.jsxs)("div",{className:"lumia-source-actions",children:[(0,o.jsx)("div",{className:"lumia-divider-text",children:"or"}),(0,o.jsxs)("button",{className:"lumia-btn lumia-btn-secondary lumia-btn-full",onClick:()=>{var e;return null===(e=document.getElementById("lumia-file-input-react"))||void 0===e?void 0:e.click()},type:"button",children:[cl.upload,"Upload JSON File"]}),(0,o.jsx)("input",{type:"file",id:"lumia-file-input-react",accept:".json",style:{display:"none"},onChange:h}),(0,o.jsx)("div",{className:"lumia-divider-text",children:"or"}),(0,o.jsxs)("button",{className:"lumia-btn lumia-btn-primary lumia-btn-full",onClick:()=>p("showLucidCardsModal"),type:"button",children:[cl.box,"Browse Lucid Cards"]})]})]}),(0,o.jsx)(ml,{title:"Lumia Configuration",icon:cl.settings,children:(0,o.jsxs)("div",{className:"lumia-selector-group",children:[(0,o.jsx)(hl,{label:"Definition",hint:"Select One",selections:e.definition?[e.definition]:[],modalName:"definitions"}),(0,o.jsx)(hl,{label:"Behaviors",hint:"Select Multiple",selections:e.behaviors,dominant:e.dominantBehavior,modalName:"behaviors"}),(0,o.jsx)(hl,{label:"Personalities",hint:"Select Multiple",selections:e.personalities,dominant:e.dominantPersonality,modalName:"personalities"})]})}),(0,o.jsx)(ml,{title:"Loom Configuration",icon:cl.layers,children:(0,o.jsxs)("div",{className:"lumia-selector-group",children:[(0,o.jsx)(hl,{label:"Narrative Style",hint:"Select Multiple",selections:n.styles,modalName:"loomStyles"}),(0,o.jsx)(hl,{label:"Loom Utilities",hint:"Select Multiple",selections:n.utilities,modalName:"loomUtilities"}),(0,o.jsx)(hl,{label:"Retrofits",hint:"Select Multiple",selections:n.retrofits,modalName:"loomRetrofits"})]})}),(0,o.jsx)(ml,{title:"Tools",icon:cl.tools,children:(0,o.jsxs)("div",{className:"lumia-tools-row",children:[(0,o.jsx)(fl,{icon:cl.plus,label:"Create Lumia",onClick:()=>t.openModal("packSelector"),accent:!0}),(0,o.jsx)(fl,{icon:cl.dots,label:"OOC Settings",onClick:()=>p("showMiscFeaturesModal")}),(0,o.jsx)(fl,{icon:cl.lines,label:"Summarization",onClick:()=>p("showSummarizationModal")}),(0,o.jsx)(fl,{icon:cl.edit,label:"Prompt Settings",onClick:()=>p("showPromptSettingsModal")})]})}),(0,o.jsxs)(pl,{title:"Macro Reference",icon:cl.terminal,children:[(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Lumia Content"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{lumiaDef}}",description:"Physical Definition"}),(0,o.jsx)(vl,{code:"{{lumiaBehavior}}",description:"Behavior(s)"}),(0,o.jsx)(vl,{code:"{{lumiaPersonality}}",description:"Personality(s)"})]})]}),(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Loom Content"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{loomStyle}}",description:"Narrative Style"}),(0,o.jsx)(vl,{code:"{{loomUtils}}",description:"Loom Utilities"}),(0,o.jsx)(vl,{code:"{{loomRetrofits}}",description:"Retrofits"})]})]}),(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Random Lumia"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{randomLumia}}",description:"Random definition"}),(0,o.jsx)(vl,{code:"{{randomLumia.pers}}",description:"Random personality"}),(0,o.jsx)(vl,{code:"{{randomLumia.behav}}",description:"Random behavior"}),(0,o.jsx)(vl,{code:"{{randomLumia.name}}",description:"Random name"})]})]}),(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Tracking & OOC"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{lumiaMessageCount}}",description:"Message count"}),(0,o.jsx)(vl,{code:"{{lumiaOOCTrigger}}",description:"OOC trigger/countdown"})]})]}),(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Summarization"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{loomSummary}}",description:"Stored summary"}),(0,o.jsx)(vl,{code:"{{loomSummaryPrompt}}",description:"Summary directive"}),(0,o.jsx)(vl,{code:"/loom-summarize",description:"Manual trigger"})]})]}),(0,o.jsxs)("div",{className:"lumia-macro-group",children:[(0,o.jsx)("div",{className:"lumia-macro-group-title",children:"Sovereign Hand"}),(0,o.jsxs)("div",{className:"lumia-macro-list",children:[(0,o.jsx)(vl,{code:"{{loomSovHand}}",description:"Full Sovereign Hand prompt (with user message)"}),(0,o.jsx)(vl,{code:"{{loomSovHandActive}}",description:"Yes/No status indicator"}),(0,o.jsx)(vl,{code:"{{loomLastUserMessage}}",description:"Last user message (excluded from context)"})]})]})]}),a.length>0&&(0,o.jsx)(ml,{title:"Custom Packs",icon:cl.package,children:(0,o.jsx)("div",{className:"lumia-custom-packs",children:a.map(e=>{var n;const r=e.id||e.name,i=l===r,a=(null===(n=e.items)||void 0===n?void 0:n.filter(e=>e.lumiaDefName))||[];return(0,o.jsxs)(nl.div,{className:D("lumia-pack-item-container",i&&"lumia-pack-item-container--expanded"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,o.jsxs)("div",{className:"lumia-pack-item",children:[(0,o.jsx)("button",{className:"lumia-pack-expand-btn",onClick:()=>c(r),type:"button",title:i?"Collapse":"Expand to see Lumias",children:(0,o.jsx)("span",{className:D("lumia-pack-chevron",i&&"lumia-pack-chevron--expanded"),children:cl.chevronDown})}),(0,o.jsx)("span",{className:"lumia-pack-name",onClick:()=>c(r),style:{cursor:"pointer"},children:e.name}),(0,o.jsxs)("span",{className:"lumia-pack-count",children:[a.length," Lumia",1!==a.length?"s":""]}),(0,o.jsx)("button",{className:"lumia-btn lumia-btn-icon",onClick:()=>Z(e),title:"Export as World Book JSON",type:"button",children:cl.download}),(0,o.jsx)("button",{className:"lumia-btn lumia-btn-icon",onClick:()=>t.openModal("packEditor",{packId:r}),title:"Edit pack",type:"button",children:cl.edit})]}),(0,o.jsxs)(ll,{children:[i&&a.length>0&&(0,o.jsx)(nl.div,{className:"lumia-pack-items-list",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:a.map((n,r)=>(0,o.jsx)(dl,{item:n,packName:e.name,onEdit:(e,n)=>t.openModal("lumiaEditor",{packName:e,editingItem:n}),editIcon:cl.edit},n.lumiaDefName||r))}),i&&0===a.length&&(0,o.jsx)(nl.div,{className:"lumia-pack-items-empty",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:(0,o.jsx)("span",{children:"No Lumias in this pack yet"})})]})]},r)})})})]})};function xl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function bl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xl(Object(t),!0).forEach(function(n){yl(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function yl(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const kl={star:'<svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>',check:'<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>',trash:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',clear:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',chevron:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',edit:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',folder:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>',definition:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>',behavior:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>',personality:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10"></path><circle cx="12" cy="12" r="6"></circle></svg>'};function wl(e){let{name:n,className:t}=e;const r=kl[n];return r?(0,o.jsx)("span",{className:t,dangerouslySetInnerHTML:{__html:r}}):null}function Sl(e){let{item:n,packName:t,isSelected:r,isDominant:a,onSelect:s,onSetDominant:l,showDominant:u,isDefinition:c,animationIndex:d,isEditable:m,onEdit:p}=e;const[h,f]=(0,i.useState)(!1),[v,g]=(0,i.useState)(!1),x=n.lumiaDefName||"Unknown",b=n.lumia_img,{objectPosition:y}=O(b),k=Math.min(30*d,300);return(0,o.jsxs)("div",{className:D("lumia-card","lumia-card-appear",c&&"definition-card",r&&"selected"),style:{animationDelay:"".concat(k,"ms")},onClick:e=>{e.target.closest(".lumia-dominant-icon")||e.target.closest(".lumia-edit-icon")||s(n)},"data-pack":t,"data-item":x,children:[(0,o.jsxs)("div",{className:"lumia-card-image",children:[b&&!v?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:b,alt:x,loading:"lazy",className:h?"lumia-img-loaded":"",style:{objectPosition:y},onLoad:()=>f(!0),onError:()=>g(!0)}),!h&&(0,o.jsx)("div",{className:"lumia-img-spinner"})]}):(0,o.jsx)("div",{className:"lumia-card-placeholder",children:"?"}),m&&p&&(0,o.jsx)("div",{className:"lumia-edit-icon",onClick:e=>{e.stopPropagation(),p&&p(n)},title:"Edit this Lumia",children:(0,o.jsx)(wl,{name:"edit"})}),u&&(0,o.jsx)("div",{className:D("lumia-dominant-icon",a&&"dominant"),onClick:e=>{e.stopPropagation(),l(n)},title:a?"Remove as dominant":"Set as dominant trait",children:(0,o.jsx)(wl,{name:"star"})}),(0,o.jsx)("div",{className:"lumia-card-check",children:(0,o.jsx)(wl,{name:"check"})})]}),(0,o.jsx)("div",{className:"lumia-card-info",children:(0,o.jsx)("div",{className:"lumia-card-name",children:x})})]})}function jl(e){let{pack:n,items:t,isEditable:r,type:a,isSelected:s,isDominant:l,onSelect:u,onSetDominant:c,showDominant:d,onRemovePack:m,onEditItem:p}=e;const[h,f]=(0,i.useState)(!1),v=n.name||n.packName||"Unknown Pack";return(0,o.jsxs)("div",{className:D("lumia-modal-panel","lumia-collapsible","lumia-pack-section",h&&"collapsed"),children:[(0,o.jsxs)("div",{className:"lumia-modal-panel-header lumia-collapsible-trigger",onClick:e=>{e.target.closest(".lumia-remove-pack-btn")||f(!h)},children:[(0,o.jsx)("span",{className:"lumia-panel-collapse-icon",children:(0,o.jsx)(wl,{name:"chevron"})}),(0,o.jsx)("span",{className:"lumia-modal-panel-icon",children:(0,o.jsx)(wl,{name:"folder"})}),(0,o.jsx)("span",{className:"lumia-modal-panel-title",children:v}),r&&(0,o.jsx)("span",{className:"lumia-pack-badge-custom",children:"Custom"}),(0,o.jsxs)("span",{className:"lumia-modal-panel-count",children:[t.length," items"]}),(0,o.jsx)("button",{className:"lumia-icon-btn-sm lumia-remove-pack-btn",onClick:e=>{e.stopPropagation(),m(v)},title:"Remove Pack",children:(0,o.jsx)(wl,{name:"trash"})})]}),(0,o.jsx)("div",{className:"lumia-modal-panel-content lumia-modal-panel-content-cards lumia-collapsible-content",children:(0,o.jsx)("div",{className:"lumia-card-grid",children:t.map((e,n)=>(0,o.jsx)(Sl,{item:e,packName:v,isSelected:s(e,v),isDominant:l(e,v),onSelect:e=>u(e,v),onSetDominant:e=>c(e,v),showDominant:d,isDefinition:"definitions"===a,animationIndex:n,isEditable:r,onEdit:r?e=>p(e,v):void 0},e.lumiaDefName||e.id||n))})})]})}const Cl=function(e){let{type:n,multiSelect:t=!0,allowDominant:r=!1,onClose:a}=e;const{allPacks:s}=T(),l=E(),u=j(),c=function(e){switch(e){case"definitions":return{title:"Select Definition",subtitle:"Choose the physical form for your Lumia",isMulti:!1,dominantKey:null};case"behaviors":return{title:"Select Behaviors",subtitle:"Choose behavioral traits (tap star for dominant)",isMulti:!0,dominantKey:"dominantBehavior"};case"personalities":return{title:"Select Personalities",subtitle:"Choose personality traits (tap star for dominant)",isMulti:!0,dominantKey:"dominantPersonality"};default:return{title:"Select Items",subtitle:"",isMulti:!0,dominantKey:null}}}(n),d=function(e){switch(e){case"definitions":default:return"definition";case"behaviors":return"behavior";case"personalities":return"personality"}}(n),{selectedItems:m,dominantItem:p,toggleAction:h,setDominantAction:f,clearAction:v}=(0,i.useMemo)(()=>{switch(n){case"behaviors":return{selectedItems:l.behaviors||[],dominantItem:l.dominantBehavior,toggleAction:u.toggleBehavior,setDominantAction:u.setDominantBehavior,clearAction:()=>{u.setSelectedBehaviors([]),u.setDominantBehavior(null)}};case"personalities":return{selectedItems:l.personalities||[],dominantItem:l.dominantPersonality,toggleAction:u.togglePersonality,setDominantAction:u.setDominantPersonality,clearAction:()=>{u.setSelectedPersonalities([]),u.setDominantPersonality(null)}};case"definitions":return{selectedItems:l.definition?[l.definition]:[],dominantItem:null,toggleAction:e=>{const n=l.definition;n&&n.packName===e.packName&&n.itemName===e.itemName?u.setSelectedDefinition(null):u.setSelectedDefinition(e)},setDominantAction:null,clearAction:()=>u.setSelectedDefinition(null)};default:return{selectedItems:[],dominantItem:null,toggleAction:()=>{},setDominantAction:null,clearAction:()=>{}}}},[n,l,u]),g=(0,i.useMemo)(()=>s.map(e=>{const n=function(e){return(e.items||[]).filter(e=>!e.loomCategory&&!!e.lumiaDefName)}(e);return bl(bl({},e),{},{lumiaItems:n,isEditable:e.isCustom||e.isEditable||!1})}).filter(e=>e.lumiaItems.length>0),[s,n]),x=(e,n)=>{const t=e.lumiaDefName;return m.some(e=>e.packName===n&&e.itemName===t)},b=(e,n)=>{if(!p)return!1;const t=e.lumiaDefName;return p.packName===n&&p.itemName===t},y=(e,n)=>{const t={packName:n,itemName:e.lumiaDefName};h(t)},k=(e,n)=>{if(!f)return;const t={packName:n,itemName:e.lumiaDefName};x(e,n)||h(t),b(e,n)?f(null):f(t)},w=e=>{console.log("Remove pack:",e)},S=(e,n)=>{u.openModal("lumiaEditor",{packName:n,editingItem:e})};return(0,o.jsxs)("div",{className:"lumia-modal-selection-content",children:[(0,o.jsxs)("div",{className:"lumia-modal-header-inner",children:[(0,o.jsx)("div",{className:"lumia-modal-header-icon",children:(0,o.jsx)(wl,{name:d})}),(0,o.jsxs)("div",{className:"lumia-modal-header-text",children:[(0,o.jsx)("h3",{className:"lumia-modal-title",children:c.title}),(0,o.jsx)("p",{className:"lumia-modal-subtitle",children:c.subtitle})]}),(0,o.jsxs)("button",{className:"lumia-clear-btn",onClick:()=>{v()},title:"Clear all selections",children:[(0,o.jsx)(wl,{name:"clear"}),(0,o.jsx)("span",{children:"Clear"})]})]}),(0,o.jsx)("div",{className:"lumia-modal-content",children:0===g.length?(0,o.jsx)("div",{className:"lumia-modal-empty",children:"No Lumia Packs loaded. Add one in settings!"}):g.map(e=>(0,o.jsx)(jl,{pack:e,items:e.lumiaItems,isEditable:e.isEditable,type:n,isSelected:x,isDominant:b,onSelect:y,onSetDominant:k,showDominant:r&&c.isMulti,onRemovePack:w,onEditItem:S},e.id||e.name||e.packName))}),(0,o.jsxs)("div",{className:"lumia-modal-footer",children:[(0,o.jsx)("button",{className:"lumia-modal-btn lumia-modal-btn-secondary lumia-modal-close-btn",onClick:a,children:"Close"}),c.isMulti&&(0,o.jsx)("button",{className:"lumia-modal-btn lumia-modal-btn-primary lumia-modal-done",onClick:a,children:"Done"})]})]})};function Pl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Nl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pl(Object(t),!0).forEach(function(n){El(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function El(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const Ml={loomStyles:{category:"Narrative Style",packField:"loomStyles",storeField:"styles",toggleAction:"toggleLoomStyle",isMulti:!0},loomUtilities:{category:"Loom Utilities",packField:"loomUtils",storeField:"utilities",toggleAction:"toggleLoomUtility",isMulti:!0},loomRetrofits:{category:"Retrofits",packField:"loomRetrofits",storeField:"retrofits",toggleAction:"toggleLoomRetrofit",isMulti:!0}};function Tl(e){let{value:n,onChange:t,placeholder:r}=e;return(0,o.jsxs)("div",{className:"lumiverse-search",children:[(0,o.jsx)("span",{className:"lumiverse-search-icon",children:""}),(0,o.jsx)("input",{type:"text",className:"lumiverse-search-input",value:n,onChange:e=>t(e.target.value),placeholder:r}),n&&(0,o.jsx)("button",{className:"lumiverse-search-clear",onClick:()=>t(""),type:"button","aria-label":"Clear search",children:""})]})}function Ll(e){let{item:n,packName:t,isSelected:r,onToggle:i,isMulti:a}=e;const s=n.loomName||n.itemName||n.name||"Unknown";return(0,o.jsxs)("div",{className:D("lumiverse-loom-item",r&&"lumiverse-loom-item--selected"),onClick:()=>i(t,s),role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&i(t,s),children:[(0,o.jsx)("div",{className:"lumiverse-loom-item-content",children:(0,o.jsx)("span",{className:"lumiverse-loom-item-name",children:s})}),(0,o.jsx)("div",{className:"lumiverse-loom-item-toggle",children:a?(0,o.jsx)("div",{className:D("lumiverse-toggle-switch",r&&"checked"),children:(0,o.jsx)("div",{className:"lumiverse-toggle-track",children:(0,o.jsx)("div",{className:"lumiverse-toggle-thumb"})})}):(0,o.jsx)("span",{className:D("lumiverse-radio-dot",r&&"checked")})})]})}function Ol(e){let{pack:n,children:t,defaultOpen:r=!0}=e;const[a,s]=(0,i.useState)(r),l=i.Children.count(t),u=n.name||n.packName||"Unknown Pack";return 0===l?null:(0,o.jsxs)("div",{className:"lumiverse-pack-section",children:[(0,o.jsxs)("button",{className:"lumiverse-pack-header",onClick:()=>s(!a),type:"button",children:[(0,o.jsx)("span",{className:D("lumiverse-pack-chevron",a&&"rotated"),children:""}),(0,o.jsx)("span",{className:"lumiverse-pack-icon",children:""}),(0,o.jsx)("span",{className:"lumiverse-pack-name",children:u}),(0,o.jsxs)("span",{className:"lumiverse-pack-count",children:[l," items"]})]}),a&&(0,o.jsx)("div",{className:"lumiverse-pack-items",children:t})]})}const zl=function(e){let{type:n,onClose:t}=e;const[r,a]=(0,i.useState)(""),{allPacks:s}=T(),l=j(),u=M(),c=Ml[n];if(!c)return(0,o.jsxs)("div",{className:"lumiverse-error",children:["Unknown Loom type: ",n]});const{category:d,storeField:m,toggleAction:p,isMulti:h}=c,f=(0,i.useMemo)(()=>{const e=u[m];return e?Array.isArray(e)?e:[e]:[]},[u,m]),v=(0,i.useCallback)((e,n)=>f.some(t=>t.packName===e&&t.itemName===n),[f]),g=(0,i.useCallback)((e,n)=>{const t={packName:e,itemName:n};l[p]?(l[p](t),b()):console.error("[LoomSelectionModal] Unknown toggle action: ".concat(p))},[l,p]),x=(0,i.useCallback)(()=>{const e={styles:"setSelectedLoomStyles",utilities:"setSelectedLoomUtilities",retrofits:"setSelectedLoomRetrofits"}[m];l[e]&&(l[e]([]),b())},[l,m]),y=(0,i.useMemo)(()=>{const e=r.toLowerCase().trim();return s.map(n=>{const t=function(e,n){const t=[],{category:r,packField:i}=n;return e[i]&&Array.isArray(e[i])&&e[i].forEach(e=>{t.push(Nl(Nl({},e),{},{loomName:e.loomName||e.itemName||e.name}))}),e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{const n=e.loomCategory||e.category||e.type;n!==r&&n!==i||t.push(Nl(Nl({},e),{},{loomName:e.loomName||e.itemName||e.name}))}),t}(n,c),r=e?t.filter(n=>(n.loomName||n.itemName||n.name||"").toLowerCase().includes(e)):t;return Nl(Nl({},n),{},{loomItems:r})}).filter(e=>e.loomItems.length>0)},[s,c,r]),k=y.reduce((e,n)=>e+n.loomItems.length,0),w=f.length,S=e=>e.name||e.packName||"Unknown Pack";return(0,o.jsxs)("div",{className:"lumiverse-loom-selection-modal",children:[(0,o.jsxs)("div",{className:"lumiverse-selection-toolbar",children:[(0,o.jsx)(Tl,{value:r,onChange:a,placeholder:"Search ".concat(d,"...")}),(0,o.jsxs)("div",{className:"lumiverse-selection-actions",children:[(0,o.jsxs)("span",{className:"lumiverse-selection-count",children:[w," selected"]}),w>0&&(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--text",onClick:x,type:"button",children:"Clear"})]})]}),(0,o.jsx)("div",{className:"lumiverse-selection-content",children:0===k?(0,o.jsxs)("div",{className:"lumiverse-empty-state",children:[(0,o.jsx)("span",{className:"lumiverse-empty-icon",children:""}),(0,o.jsxs)("p",{children:['No "',d,'" items found in loaded packs.']}),r&&(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:()=>a(""),type:"button",children:"Clear search"})]}):y.map(e=>(0,o.jsx)(Ol,{pack:e,children:e.loomItems.map(n=>{const t=n.loomName||n.itemName||n.name,r=S(e);return(0,o.jsx)(Ll,{item:n,packName:r,isSelected:v(r,t),onToggle:g,isMulti:h},"".concat(r,"-").concat(t))})},e.id||S(e)))}),(0,o.jsx)("div",{className:"lumiverse-selection-footer",children:(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--primary",onClick:t,type:"button",children:"Done"})})]})},Dl=B("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Al=B("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Il=B("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Rl=B("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Fl=B("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);function _l(e){let{item:n,packName:t,onEdit:r}=e;const{objectPosition:i}=O(n.lumia_img);return(0,o.jsxs)("div",{className:"lumiverse-pack-selector-lumia-item",children:[n.lumia_img&&(0,o.jsx)("img",{src:n.lumia_img,alt:"",className:"lumiverse-pack-selector-lumia-avatar",style:{objectPosition:i},onError:e=>{e.target.style.display="none"}}),(0,o.jsx)("span",{className:"lumiverse-pack-selector-lumia-name",children:n.lumiaDefName}),(0,o.jsx)("button",{className:"lumiverse-pack-selector-lumia-edit",onClick:()=>r(t,n),title:"Edit this Lumia",type:"button",children:(0,o.jsx)(U,{size:14,strokeWidth:1.5})})]})}const Bl=function(e){let{onSelect:n,onClose:t}=e;const{customPacks:r,allPacks:a}=T(),s=j(),[l,u]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[m,p]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[v,g]=(0,i.useState)(""),[x,y]=(0,i.useState)(""),k=a.filter(e=>e.isCustom||!e.url),w=(0,i.useCallback)(e=>{u(n=>n===e.name?null:e.name)},[]),S=(0,i.useCallback)(e=>{s.openModal("lumiaEditor",{packName:e})},[s]),C=(0,i.useCallback)((e,n)=>{s.openModal("lumiaEditor",{packName:e,editingItem:n})},[s]),P=(0,i.useCallback)(()=>{const e=m.trim();if(!e)return void y("Pack name is required");if(a.some(n=>n.name===e))return void y('Pack "'.concat(e,'" already exists'));const n={id:"pack_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:e,author:h.trim()||"",coverUrl:v.trim()||"",url:"",isCustom:!0,items:[]};s.addCustomPack(n),b(),d(!1),p(""),f(""),g(""),y(""),u(e)},[m,h,v,a,s]),N=e=>e.items?e.items.filter(e=>e.lumiaDefName):[],E=e=>N(e).length;return(0,o.jsxs)("div",{className:"lumiverse-pack-selector-modal",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-selector-content",children:[(0,o.jsxs)("div",{className:"lumiverse-pack-selector-section",children:[(0,o.jsx)("h4",{className:"lumiverse-pack-selector-heading",children:"Select a Pack"}),0===k.length?(0,o.jsx)("div",{className:"lumiverse-pack-selector-empty",children:(0,o.jsx)("p",{children:"No custom packs yet. Create your first one below!"})}):(0,o.jsx)("div",{className:"lumiverse-pack-selector-list",children:k.map(e=>{const n=l===e.name,t=N(e);return(0,o.jsxs)("div",{className:D("lumiverse-pack-selector-item-wrapper",n&&"lumiverse-pack-selector-item-wrapper--expanded"),children:[(0,o.jsxs)("button",{className:"lumiverse-pack-selector-item",onClick:()=>w(e),type:"button",children:[(0,o.jsx)("div",{className:"lumiverse-pack-selector-item-icon",children:(0,o.jsx)(Dl,{size:20,strokeWidth:1.5})}),(0,o.jsxs)("div",{className:"lumiverse-pack-selector-item-info",children:[(0,o.jsx)("span",{className:"lumiverse-pack-selector-item-name",children:e.name}),(0,o.jsxs)("span",{className:"lumiverse-pack-selector-item-meta",children:[E(e)," Lumias",e.author&&"  by ".concat(e.author)]})]}),n?(0,o.jsx)(Al,{size:16,className:"lumiverse-pack-selector-item-arrow"}):(0,o.jsx)(Il,{size:16,className:"lumiverse-pack-selector-item-arrow"})]}),n&&(0,o.jsxs)("div",{className:"lumiverse-pack-selector-lumias",children:[(0,o.jsxs)("button",{className:"lumiverse-pack-selector-add-lumia",onClick:()=>S(e.name),type:"button",children:[(0,o.jsx)(Rl,{size:14,strokeWidth:2}),(0,o.jsx)("span",{children:"Add New Lumia"})]}),t.length>0?(0,o.jsx)("div",{className:"lumiverse-pack-selector-lumia-list",children:t.map((n,t)=>(0,o.jsx)(_l,{item:n,packName:e.name,onEdit:C},n.lumiaDefName||t))}):(0,o.jsx)("div",{className:"lumiverse-pack-selector-lumia-empty",children:"No Lumias yet. Add your first one!"})]})]},e.id||e.name)})})]}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-divider",children:(0,o.jsx)("span",{children:"or"})}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-section",children:c?(0,o.jsxs)("div",{className:"lumiverse-pack-selector-form",children:[(0,o.jsxs)("h4",{className:"lumiverse-pack-selector-heading",children:[(0,o.jsx)(Fl,{size:16,strokeWidth:1.5}),"Create New Pack"]}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-field",children:(0,o.jsx)("input",{type:"text",className:"lumiverse-input",placeholder:"Pack name (required)",value:m,onChange:e=>{p(e.target.value),y("")},autoFocus:!0})}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-field",children:(0,o.jsx)("input",{type:"text",className:"lumiverse-input",placeholder:"Author name (optional)",value:h,onChange:e=>f(e.target.value)})}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-field",children:(0,o.jsx)("input",{type:"text",className:"lumiverse-input",placeholder:"Cover image URL (optional)",value:v,onChange:e=>g(e.target.value)})}),x&&(0,o.jsx)("div",{className:"lumiverse-pack-selector-error",children:x}),(0,o.jsxs)("div",{className:"lumiverse-pack-selector-form-actions",children:[(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:()=>{d(!1),p(""),f(""),g(""),y("")},type:"button",children:"Cancel"}),(0,o.jsxs)("button",{className:"lumiverse-btn lumiverse-btn--primary",onClick:P,type:"button",children:[(0,o.jsx)(Fl,{size:14}),"Create & Continue"]})]})]}):(0,o.jsxs)("button",{className:"lumiverse-pack-selector-create-btn",onClick:()=>d(!0),type:"button",children:[(0,o.jsx)(Fl,{size:18,strokeWidth:1.5}),(0,o.jsx)("span",{children:"Create New Pack"})]})})]}),(0,o.jsx)("div",{className:"lumiverse-pack-selector-footer",children:(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:t,type:"button",children:"Cancel"})})]})},Vl=B("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ul=B("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Wl=B("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);function Hl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function $l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hl(Object(t),!0).forEach(function(n){ql(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ql(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Kl(e){let{label:n,required:t,hint:r,children:i,error:a}=e;return(0,o.jsxs)("div",{className:D("lumiverse-editor-field",a&&"lumiverse-editor-field--error"),children:[(0,o.jsxs)("label",{className:"lumiverse-editor-label",children:[n,t&&(0,o.jsx)("span",{className:"lumiverse-required",children:"*"})]}),i,r&&(0,o.jsx)("span",{className:"lumiverse-editor-hint",children:r}),a&&(0,o.jsx)("span",{className:"lumiverse-editor-error",children:a})]})}function Yl(e){let{Icon:n,title:t,children:r}=e;return(0,o.jsxs)("div",{className:"lumiverse-editor-section",children:[(0,o.jsxs)("div",{className:"lumiverse-editor-section-header",children:[(0,o.jsx)(n,{size:16,strokeWidth:1.5}),(0,o.jsx)("span",{children:t})]}),(0,o.jsx)("div",{className:"lumiverse-editor-section-content",children:r})]})}function Ql(e){let{url:n}=e;const[t,r]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),{objectPosition:l}=O(n);return(0,i.useEffect)(()=>{r(!1),s(!1)},[n]),!n||t?null:(0,o.jsxs)("div",{className:D("lumiverse-editor-avatar-preview",a&&"loaded"),children:[(0,o.jsx)("img",{src:n,alt:"Avatar preview",style:{objectPosition:l},onLoad:()=>s(!0),onError:()=>r(!0)}),!a&&(0,o.jsx)("div",{className:"lumiverse-editor-avatar-spinner"})]})}const Xl=function(e){let{packName:n,editingItem:t=null,onClose:r,onSaved:a}=e;const{allPacks:s}=T(),l=j(),u=null!==t,c=s.find(e=>e.name===n),[d,m]=(0,i.useState)((null==t?void 0:t.lumiaDefName)||""),[p,h]=(0,i.useState)((null==t?void 0:t.lumia_img)||""),[f,v]=(0,i.useState)((null==t?void 0:t.defAuthor)||""),[g,x]=(0,i.useState)((null==t?void 0:t.lumiaDef)||""),[y,k]=(0,i.useState)((null==t?void 0:t.lumia_personality)||""),[w,S]=(0,i.useState)((null==t?void 0:t.lumia_behavior)||""),[C,P]=(0,i.useState)({}),N=(0,i.useCallback)(()=>{const e={};if(d.trim()||(e.name="Lumia name is required"),c&&d.trim()){var n;(null===(n=c.items)||void 0===n?void 0:n.find(e=>e.lumiaDefName===d.trim()&&(!u||e.lumiaDefName!==(null==t?void 0:t.lumiaDefName))))&&(e.name='A Lumia named "'.concat(d.trim(),'" already exists in this pack'))}return P(e),0===Object.keys(e).length},[d,c,u,t]),E=(0,i.useCallback)(()=>{if(!N())return;const e={lumiaDefName:d.trim(),lumia_img:p.trim()||null,defAuthor:f.trim()||null,lumiaDef:g.trim()||null,lumia_personality:y.trim()||null,lumia_behavior:w.trim()||null};l.getPacks&&l.getPacks();if(c){const r=[...c.items||[]];if(u){const n=r.findIndex(e=>e.lumiaDefName===t.lumiaDefName);n>=0?r[n]=e:r.push(e)}else r.push(e);const i=$l($l({},c),{},{items:r});c.isCustom?l.updateCustomPack(c.id||c.name,i):l.updateCustomPack(c.name,$l($l({},i),{},{isCustom:!0})),b(),a&&a(e,n)}r()},[N,d,p,f,g,y,w,c,u,t,l,n,r,a]),M=(0,i.useCallback)(()=>{if(u&&t&&window.confirm('Are you sure you want to delete "'.concat(t.lumiaDefName,'"? This cannot be undone.'))){if(c){const e=(c.items||[]).filter(e=>e.lumiaDefName!==t.lumiaDefName),n=$l($l({},c),{},{items:e});c.isCustom?l.updateCustomPack(c.id||c.name,n):l.updateCustomPack(c.name,$l($l({},n),{},{isCustom:!0})),b()}r()}},[u,t,c,l,r]);return c?(0,o.jsxs)("div",{className:"lumiverse-editor-modal",children:[(0,o.jsxs)("div",{className:"lumiverse-editor-content",children:[(0,o.jsxs)(Yl,{Icon:Vl,title:"Basic Info",children:[(0,o.jsxs)(Kl,{label:"Lumia Name",required:!0,error:C.name,children:[(0,o.jsx)("input",{type:"text",className:"lumiverse-input",value:d,onChange:e=>{m(e.target.value),C.name&&P(e=>$l($l({},e),{},{name:null}))},placeholder:"e.g., Aria, Luna, Sage",autoFocus:!0}),(0,o.jsxs)("span",{className:"lumiverse-editor-hint",children:['Will be referenced as "Lumia (',d||"Name",')" in World Books']})]}),(0,o.jsxs)("div",{className:"lumiverse-editor-row",children:[(0,o.jsx)(Kl,{label:"Avatar URL",children:(0,o.jsx)("input",{type:"text",className:"lumiverse-input",value:p,onChange:e=>h(e.target.value),placeholder:"https://..."})}),(0,o.jsx)(Kl,{label:"Author",children:(0,o.jsx)("input",{type:"text",className:"lumiverse-input",value:f,onChange:e=>v(e.target.value),placeholder:"Your name"})})]}),(0,o.jsx)(Ql,{url:p})]}),(0,o.jsx)(Yl,{Icon:Vl,title:"Lumia Physicality",children:(0,o.jsx)(Kl,{label:"Physical Definition",hint:"Injected via {{lumiaDef}} macro",children:(0,o.jsx)("textarea",{className:"lumiverse-textarea",value:g,onChange:e=>x(e.target.value),placeholder:"Describe Lumia's physical appearance, form, and presence...",rows:5})})}),(0,o.jsx)(Yl,{Icon:Ul,title:"Lumia Personality",children:(0,o.jsx)(Kl,{label:"Personality Traits",hint:"Injected via {{lumiaPersonality}} macro",children:(0,o.jsx)("textarea",{className:"lumiverse-textarea",value:y,onChange:e=>k(e.target.value),placeholder:"Describe Lumia's personality, disposition, and inner nature...",rows:5})})}),(0,o.jsx)(Yl,{Icon:Wl,title:"Lumia Behavior Traits",children:(0,o.jsx)(Kl,{label:"Behavioral Patterns",hint:"Injected via {{lumiaBehavior}} macro",children:(0,o.jsx)("textarea",{className:"lumiverse-textarea",value:w,onChange:e=>S(e.target.value),placeholder:"Describe Lumia's behavioral patterns, habits, and tendencies...",rows:5})})})]}),(0,o.jsxs)("div",{className:"lumiverse-editor-footer",children:[u&&(0,o.jsxs)("button",{className:"lumiverse-btn lumiverse-btn--danger",onClick:M,type:"button",children:[(0,o.jsx)(W,{size:14}),"Delete"]}),(0,o.jsx)("div",{className:"lumiverse-editor-footer-spacer"}),(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:r,type:"button",children:"Cancel"}),(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--primary",onClick:E,type:"button",children:u?"Save Changes":"Create Lumia"})]})]}):(0,o.jsxs)("div",{className:"lumiverse-editor-modal lumiverse-editor-error",children:[(0,o.jsxs)("p",{children:['Pack "',n,'" not found.']}),(0,o.jsx)("button",{className:"lumiverse-btn lumiverse-btn--secondary",onClick:r,children:"Close"})]})};function Gl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Jl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Gl(Object(t),!0).forEach(function(n){Zl(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Zl(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function eu(e){let{children:n,onClose:t,modalType:r,size:a="medium",hasCustomHeader:s=!1}=e;const l=(0,i.useCallback)(e=>{"Escape"===e.key&&t()},[t]);(0,i.useEffect)(()=>(document.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",l),document.body.style.overflow=""}),[l]);const u=e=>{e.stopPropagation()},c=D("lumia-modal","selection"===r&&"lumia-modal-selection","settings"===r&&"lumia-modal-settings","editor"===r&&"lumia-modal-editor","pack-editor"===r&&"lumia-modal-pack-editor","pack-selector"===r&&"lumia-modal-pack-selector","lumia-editor"===r&&"lumia-modal-lumia-editor");return(0,o.jsx)("div",{className:"lumia-modal-backdrop",onClick:e=>{e.target===e.currentTarget&&t()},onMouseDown:u,onMouseUp:u,children:(0,o.jsx)("div",{className:c,role:"dialog","aria-modal":"true",onClick:u,children:n})})}const nu={behaviors:{component:Cl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"behaviors",multiSelect:!0,allowDominant:!0}},personalities:{component:Cl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"personalities",multiSelect:!0,allowDominant:!0}},definitions:{component:Cl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"definitions",multiSelect:!1,allowDominant:!1}},packEditor:{component:ee,modalType:"pack-editor",size:"large",hasCustomHeader:!0,props:{}},importPack:{component:()=>(0,o.jsx)("div",{className:"lumia-modal-empty",children:"Import Pack Modal (TODO)"}),modalType:"settings",size:"medium",hasCustomHeader:!1,props:{}},loomStyles:{component:zl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"loomStyles"}},loomUtilities:{component:zl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"loomUtilities"}},loomRetrofits:{component:zl,modalType:"selection",size:"large",hasCustomHeader:!0,props:{type:"loomRetrofits"}},packSelector:{component:Bl,modalType:"pack-selector",size:"medium",hasCustomHeader:!0,props:{}},lumiaEditor:{component:Xl,modalType:"lumia-editor",size:"large",hasCustomHeader:!0,props:{}}};const tu=function(){const e=L(),n=j();if(!e.activeModal)return null;const{name:t,props:r}=e.activeModal,i=nu[t];if(!i)return console.warn("[LumiverseUI] Unknown modal: ".concat(t)),null;const{component:a,modalType:s,size:l,hasCustomHeader:u,props:c}=i;return(0,o.jsx)(eu,{modalType:s,size:l,hasCustomHeader:u,onClose:n.closeModal,children:(0,o.jsx)(a,Jl(Jl(Jl({},c),r),{},{onClose:n.closeModal}))})};const ru=function(){N();const e=j(),n=L();return(0,o.jsxs)("div",{className:"lumiverse-app",children:[(0,o.jsx)(gl,{}),(0,o.jsx)(tu,{}),n.isLoading&&(0,o.jsx)("div",{className:"lumiverse-loading-overlay",children:(0,o.jsx)("div",{className:"lumiverse-spinner"})}),n.error&&(0,o.jsxs)("div",{className:"lumiverse-error-toast",onClick:e.clearError,children:[(0,o.jsx)("span",{children:n.error}),(0,o.jsx)("button",{className:"lumiverse-error-dismiss",children:"Dismiss"})]})]})},iu=B("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),au=B("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ou=B("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),su=B("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),lu=B("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function uu(e){let{isVisible:n,onClick:t}=e;return(0,o.jsxs)("button",{className:D("lumiverse-panel-toggle",n&&"lumiverse-panel-toggle--active"),onClick:t,title:n?"Hide Lumiverse Panel":"Show Lumiverse Panel",type:"button",children:[(0,o.jsx)("span",{className:"lumiverse-panel-toggle-icon",children:(0,o.jsx)(iu,{size:18,strokeWidth:2})}),(0,o.jsx)("span",{className:"lumiverse-panel-toggle-label",children:"Lumia"})]})}function cu(e){let{id:n,Icon:t,label:r,isActive:i,onClick:a}=e;return(0,o.jsxs)("button",{className:D("lumiverse-vp-tab",i&&"lumiverse-vp-tab--active"),onClick:()=>a(n),title:r,type:"button",children:[(0,o.jsx)("span",{className:"lumiverse-vp-tab-icon",children:(0,o.jsx)(t,{size:20,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-vp-tab-label",children:r})]})}function du(e){let{isCollapsed:n,onClick:t}=e;return(0,o.jsx)("button",{className:"lumiverse-vp-collapse-btn",onClick:t,title:n?"Expand panel":"Collapse panel",type:"button",children:(0,o.jsx)("span",{className:D("lumiverse-vp-collapse-icon",n&&"lumiverse-vp-collapse-icon--rotated"),children:(0,o.jsx)(Il,{size:18,strokeWidth:2})})})}function mu(e){let{title:n,Icon:t,onClose:r}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-header",children:[(0,o.jsx)("span",{className:"lumiverse-vp-header-icon",children:(0,o.jsx)(t,{size:18,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-vp-header-title",children:n}),(0,o.jsx)("button",{className:"lumiverse-vp-close-btn",onClick:r,title:"Close panel",type:"button",children:(0,o.jsx)(au,{size:16,strokeWidth:2})})]})}const pu=[{id:"profile",Icon:Vl,label:"Profile",title:"Character Lumia Profile"},{id:"browser",Icon:V,label:"Packs",title:"Pack Browser"},{id:"ooc",Icon:ou,label:"OOC",title:"OOC Settings"},{id:"prompt",Icon:su,label:"Prompt",title:"Prompt Settings"},{id:"summary",Icon:lu,label:"Summary",title:"Summary Editor"}];function hu(e){let{tab:n}=e;const t={profile:{Icon:Vl,title:"Character Lumia Profile",description:"View and manage Lumia traits for the current character"},browser:{Icon:V,title:"Pack Browser",description:"Browse and search through all loaded packs with previews"},ooc:{Icon:ou,title:"OOC Settings",description:"Configure out-of-character comment behavior and triggers"},prompt:{Icon:su,title:"Prompt Settings",description:"Configure prompt injection and formatting options"},summary:{Icon:lu,title:"Summary Editor",description:"View and edit the current conversation summary"}}[n]||{},{Icon:r}=t;return(0,o.jsxs)("div",{className:"lumiverse-vp-placeholder",children:[r&&(0,o.jsx)("span",{className:"lumiverse-vp-placeholder-icon",children:(0,o.jsx)(r,{size:32,strokeWidth:1.5})}),(0,o.jsx)("h3",{children:t.title}),(0,o.jsx)("p",{children:t.description}),(0,o.jsx)("span",{className:"lumiverse-vp-placeholder-badge",children:"Coming Soon"})]})}const fu=function(e){let{isVisible:n,onToggle:t,onClose:r,defaultTab:a="profile",ProfileContent:s,BrowserContent:l,OOCContent:u,PromptContent:c,SummaryContent:d}=e;const[m,p]=(0,i.useState)(a),[h,f]=(0,i.useState)(!1),v=(0,i.useCallback)(e=>{h&&f(!1),p(e)},[h]),g=(0,i.useCallback)(()=>{f(e=>!e)},[]),x=pu.find(e=>e.id===m);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"lumiverse-toggle-container",style:{position:"fixed",top:12,right:n?388:12,zIndex:9999,pointerEvents:"auto",transition:"right 0.25s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,o.jsx)(uu,{isVisible:n,onClick:t})}),(0,o.jsx)("div",{className:"lumiverse-viewport-wrapper",style:{position:"fixed",top:0,right:0,bottom:0,width:376,zIndex:9998,transform:"translateX(".concat(n?0:376,"px)"),transition:"transform 0.25s cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"none"},children:(0,o.jsxs)("div",{className:D("lumiverse-viewport-panel",h&&"lumiverse-viewport-panel--collapsed"),children:[(0,o.jsxs)("div",{className:"lumiverse-vp-tabs",children:[pu.map(e=>(0,o.jsx)(cu,{id:e.id,Icon:e.Icon,label:e.label,isActive:m===e.id,onClick:v},e.id)),(0,o.jsx)("div",{className:"lumiverse-vp-tabs-spacer"}),(0,o.jsx)(du,{isCollapsed:h,onClick:g})]}),(0,o.jsxs)("div",{className:"lumiverse-vp-main",style:{width:320,transform:h?"translateX(320px)":"translateX(0)",opacity:h?0:1,transition:"transform 0.2s ease, opacity 0.2s ease"},children:[(0,o.jsx)(mu,{title:(null==x?void 0:x.title)||"Panel",Icon:(null==x?void 0:x.Icon)||Vl,onClose:r}),(0,o.jsx)("div",{className:"lumiverse-vp-content",children:(0,o.jsx)("div",{className:"lumiverse-vp-tab-content",children:(()=>{switch(m){case"profile":return s?(0,o.jsx)(s,{}):(0,o.jsx)(hu,{tab:"profile"});case"browser":return l?(0,o.jsx)(l,{}):(0,o.jsx)(hu,{tab:"browser"});case"ooc":return u?(0,o.jsx)(u,{}):(0,o.jsx)(hu,{tab:"ooc"});case"prompt":return c?(0,o.jsx)(c,{}):(0,o.jsx)(hu,{tab:"prompt"});case"summary":return d?(0,o.jsx)(d,{}):(0,o.jsx)(hu,{tab:"summary"});default:return null}})()},m)})]})]})})]})},vu=B("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),gu=B("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),xu=B("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function bu(e){return(null==e?void 0:e.id)||(null==e?void 0:e.itemName)||(null==e?void 0:e.lumiaDefName)||null}function yu(e,n){if(!e||!n)return!1;const t=bu(e),r=bu(n);return t&&r&&t===r}const ku=(0,i.forwardRef)(function(e,n){let{trait:t,type:r,isDominant:i,onRemove:a}=e;const s={definition:{bg:"rgba(100, 200, 255, 0.15)",border:"rgba(100, 200, 255, 0.3)",Icon:lu},behavior:{bg:"rgba(255, 180, 100, 0.15)",border:"rgba(255, 180, 100, 0.3)",Icon:vu},personality:{bg:"rgba(200, 100, 255, 0.15)",border:"rgba(200, 100, 255, 0.3)",Icon:gu}},l=s[r]||s.definition,{Icon:u}=l;return(0,o.jsxs)(nl.div,{ref:n,className:D("lumiverse-trait-card",i&&"lumiverse-trait-card--dominant"),style:{background:l.bg,borderColor:l.border},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},layout:!0,children:[(0,o.jsx)("span",{className:"lumiverse-trait-icon",children:(0,o.jsx)(u,{size:16,strokeWidth:1.5})}),(0,o.jsxs)("div",{className:"lumiverse-trait-info",children:[(0,o.jsx)("span",{className:"lumiverse-trait-name",children:t.name||t.itemName||t.lumiaDefName||"Unknown"}),i&&(0,o.jsxs)("span",{className:"lumiverse-trait-dominant-badge",children:[(0,o.jsx)(xu,{size:12,strokeWidth:2})," Dominant"]})]}),a&&(0,o.jsx)("button",{className:"lumiverse-trait-remove",onClick:()=>a(t),title:"Remove trait",type:"button",children:(0,o.jsx)(au,{size:14,strokeWidth:2})})]})});function wu(e){let{Icon:n,title:t,count:r}=e;return(0,o.jsxs)("div",{className:"lumiverse-profile-section-header",children:[(0,o.jsx)("span",{className:"lumiverse-profile-section-icon",children:(0,o.jsx)(n,{size:16,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-profile-section-title",children:t}),void 0!==r&&(0,o.jsx)("span",{className:"lumiverse-profile-section-count",children:r})]})}function Su(e){let{message:n}=e;return(0,o.jsx)("div",{className:"lumiverse-profile-empty",children:(0,o.jsx)("span",{children:n})})}function ju(){const e=M(),{styles:n,utilities:t,retrofits:r}=e;return n.length>0||t.length>0||r.length>0?(0,o.jsxs)("div",{className:"lumiverse-profile-section",children:[(0,o.jsx)(wu,{Icon:iu,title:"Loom Configuration"}),(0,o.jsxs)("div",{className:"lumiverse-loom-summary",children:[n.length>0&&(0,o.jsxs)("div",{className:"lumiverse-loom-group",children:[(0,o.jsx)("span",{className:"lumiverse-loom-label",children:"Styles:"}),(0,o.jsx)("span",{className:"lumiverse-loom-items",children:n.map(e=>e.name||e.itemName||"Unknown").join(", ")})]}),t.length>0&&(0,o.jsxs)("div",{className:"lumiverse-loom-group",children:[(0,o.jsx)("span",{className:"lumiverse-loom-label",children:"Utilities:"}),(0,o.jsx)("span",{className:"lumiverse-loom-items",children:t.map(e=>e.name||e.itemName||"Unknown").join(", ")})]}),r.length>0&&(0,o.jsxs)("div",{className:"lumiverse-loom-group",children:[(0,o.jsx)("span",{className:"lumiverse-loom-label",children:"Retrofits:"}),(0,o.jsx)("span",{className:"lumiverse-loom-items",children:r.map(e=>e.name||e.itemName||"Unknown").join(", ")})]})]})]}):(0,o.jsxs)("div",{className:"lumiverse-profile-section",children:[(0,o.jsx)(wu,{Icon:iu,title:"Loom Configuration"}),(0,o.jsx)(Su,{message:"No Loom items selected"})]})}const Cu=function(){var e,n;const t=function(){if("undefined"!=typeof SillyTavern)try{const e=SillyTavern.getContext();if(null!=e&&e.characters&&void 0!==(null==e?void 0:e.characterId)){const n=e.characters[e.characterId];return{name:(null==n?void 0:n.name)||"Unknown",avatar:null!=n&&n.avatar?"/characters/".concat(encodeURIComponent(n.avatar)):null,description:(null==n?void 0:n.description)||""}}}catch(e){console.warn("[LumiverseUI] Could not get character:",e)}return{name:"No Character",avatar:null,description:""}}(),r=E(),{allPacks:a}=T(),s=(0,i.useMemo)(()=>{var e,n;return{behaviors:(null===(e=r.behaviors)||void 0===e?void 0:e.length)||0,personalities:(null===(n=r.personalities)||void 0===n?void 0:n.length)||0,hasDefinition:!!r.definition,totalPacks:a.length}},[r,a]);return(0,o.jsxs)("div",{className:"lumiverse-character-profile",children:[(0,o.jsxs)("div",{className:"lumiverse-profile-header",children:[(0,o.jsx)("div",{className:"lumiverse-profile-avatar",children:t.avatar?(0,o.jsx)("img",{src:t.avatar,alt:t.name}):(0,o.jsx)("span",{className:"lumiverse-profile-avatar-placeholder",children:(0,o.jsx)(Vl,{size:32,strokeWidth:1.5})})}),(0,o.jsxs)("div",{className:"lumiverse-profile-info",children:[(0,o.jsx)("h3",{className:"lumiverse-profile-name",children:t.name}),(0,o.jsxs)("div",{className:"lumiverse-profile-stats",children:[(0,o.jsxs)("span",{className:"lumiverse-stat",children:[(0,o.jsx)("span",{className:"lumiverse-stat-value",children:s.behaviors}),(0,o.jsx)("span",{className:"lumiverse-stat-label",children:"Behaviors"})]}),(0,o.jsxs)("span",{className:"lumiverse-stat",children:[(0,o.jsx)("span",{className:"lumiverse-stat-value",children:s.personalities}),(0,o.jsx)("span",{className:"lumiverse-stat-label",children:"Personalities"})]}),(0,o.jsxs)("span",{className:"lumiverse-stat",children:[(0,o.jsx)("span",{className:"lumiverse-stat-value",children:s.totalPacks}),(0,o.jsx)("span",{className:"lumiverse-stat-label",children:"Packs"})]})]})]})]}),(0,o.jsxs)("div",{className:"lumiverse-profile-section",children:[(0,o.jsx)(wu,{Icon:lu,title:"Definition",count:s.hasDefinition?1:0}),(0,o.jsx)(ll,{mode:"popLayout",children:r.definition?(0,o.jsx)(ku,{trait:r.definition,type:"definition"},bu(r.definition)||"def"):(0,o.jsx)(Su,{message:"No definition selected"})})]}),(0,o.jsxs)("div",{className:"lumiverse-profile-section",children:[(0,o.jsx)(wu,{Icon:vu,title:"Behaviors",count:s.behaviors}),(0,o.jsx)("div",{className:"lumiverse-traits-list",children:(0,o.jsx)(ll,{mode:"popLayout",children:(null===(e=r.behaviors)||void 0===e?void 0:e.length)>0?r.behaviors.map(e=>(0,o.jsx)(ku,{trait:e,type:"behavior",isDominant:yu(r.dominantBehavior,e)},bu(e))):(0,o.jsx)(Su,{message:"No behaviors selected"})})})]}),(0,o.jsxs)("div",{className:"lumiverse-profile-section",children:[(0,o.jsx)(wu,{Icon:gu,title:"Personalities",count:s.personalities}),(0,o.jsx)("div",{className:"lumiverse-traits-list",children:(0,o.jsx)(ll,{mode:"popLayout",children:(null===(n=r.personalities)||void 0===n?void 0:n.length)>0?r.personalities.map(e=>(0,o.jsx)(ku,{trait:e,type:"personality",isDominant:yu(r.dominantPersonality,e)},bu(e))):(0,o.jsx)(Su,{message:"No personalities selected"})})})]}),(0,o.jsx)(ju,{})]})};var Pu=t(961);function Nu(e,n,t){let r,i=t.initialDeps??[];function a(){var a,o,s,l;let u;t.key&&(null==(a=t.debug)?void 0:a.call(t))&&(u=Date.now());const c=e();if(!(c.length!==i.length||c.some((e,n)=>i[n]!==e)))return r;let d;if(i=c,t.key&&(null==(o=t.debug)?void 0:o.call(t))&&(d=Date.now()),r=n(...c),t.key&&(null==(s=t.debug)?void 0:s.call(t))){const e=Math.round(100*(Date.now()-u))/100,n=Math.round(100*(Date.now()-d))/100,r=n/16,i=(e,n)=>{for(e=String(e);e.length<n;)e=" "+e;return e};console.info(`%c ${i(n,5)} /${i(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,null==t?void 0:t.key)}return null==(l=null==t?void 0:t.onChange)||l.call(t,r),r}return a.updateDeps=e=>{i=e},a}function Eu(e,n){if(void 0===e)throw new Error("Unexpected undefined"+(n?`: ${n}`:""));return e}const Mu=(e,n,t)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,i),t)}},Tu=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Lu=e=>e,Ou=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let e=n;e<=t;e++)r.push(e);return r},zu=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const i=e=>{const{width:t,height:r}=e;n({width:Math.round(t),height:Math.round(r)})};if(i(Tu(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(n=>{const r=()=>{const e=n[0];if(null==e?void 0:e.borderBoxSize){const n=e.borderBoxSize[0];if(n)return void i({width:n.inlineSize,height:n.blockSize})}i(Tu(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},Du={passive:!0},Au="undefined"==typeof window||"onscrollend"in window,Iu=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let i=0;const a=e.options.useScrollendEvent&&Au?()=>{}:Mu(r,()=>{n(i,!1)},e.options.isScrollingResetDelay),o=r=>()=>{const{horizontal:o,isRtl:s}=e.options;i=o?t.scrollLeft*(s?-1:1):t.scrollTop,a(),n(i,r)},s=o(!0),l=o(!1);l(),t.addEventListener("scroll",s,Du);const u=e.options.useScrollendEvent&&Au;return u&&t.addEventListener("scrollend",l,Du),()=>{t.removeEventListener("scroll",s),u&&t.removeEventListener("scrollend",l)}},Ru=(e,n,t)=>{if(null==n?void 0:n.borderBoxSize){const e=n.borderBoxSize[0];if(e){return Math.round(e[t.options.horizontal?"inlineSize":"blockSize"])}}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Fu=(e,{adjustments:n=0,behavior:t},r)=>{var i,a;const o=e+n;null==(a=null==(i=r.scrollElement)?void 0:i.scrollTo)||a.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:t})};class _u{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const n=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const n=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()})}):null);return{disconnect:()=>{var t;null==(t=n())||t.disconnect(),e=null},observe:e=>{var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:e=>{var t;return null==(t=n())?void 0:t.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([n,t])=>{void 0===t&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Lu,rangeExtractor:Ou,onChange:()=>{},measureElement:Ru,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var n,t;null==(t=(n=this.options).onChange)||t.call(n,this,e)},this.maybeNotify=Nu(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n)return void this.maybeNotify();this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,n)=>{this.scrollAdjustments=0,this.scrollDirection=n?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=n,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,n)=>{const t=new Map,r=new Map;for(let i=n-1;i>=0;i--){const n=e[i];if(t.has(n.lane))continue;const a=r.get(n.lane);if(null==a||n.end>a.end?r.set(n.lane,n):n.end<a.end&&t.set(n.lane,!0),t.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((e,n)=>e.end===n.end?e.index-n.index:e.end-n.end)[0]:void 0},this.getMeasurementOptions=Nu(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,n,t,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:n,scrollMargin:t,getItemKey:r,enabled:i}),{key:!1}),this.getMeasurements=Nu(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:n,scrollMargin:t,getItemKey:r,enabled:i},a)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const o=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const s=this.measurementsCache.slice(0,o);for(let i=o;i<e;i++){const e=r(i),o=1===this.options.lanes?s[i-1]:this.getFurthestMeasurement(s,i),l=o?o.end+this.options.gap:n+t,u=a.get(e),c="number"==typeof u?u:this.options.estimateSize(i),d=l+c,m=o?o.lane:i%this.options.lanes;s[i]={index:i,start:l,size:c,end:d,key:e,lane:m}}return this.measurementsCache=s,s},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Nu(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,n,t,r)=>this.range=e.length>0&&n>0?function({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const i=e.length-1,a=n=>e[n].start;if(e.length<=r)return{startIndex:0,endIndex:i};let o=Bu(0,i,a,t),s=o;if(1===r)for(;s<i&&e[s].end<t+n;)s++;else if(r>1){const a=Array(r).fill(0);for(;s<i&&a.some(e=>e<t+n);){const n=e[s];a[n.lane]=n.end,s++}const l=Array(r).fill(t+n);for(;o>=0&&l.some(e=>e>=t);){const n=e[o];l[n.lane]=n.start,o--}o=Math.max(0,o-o%r),s=Math.min(i,s+(r-1-s%r))}return{startIndex:o,endIndex:s}}({measurements:e,outerSize:n,scrollOffset:t,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Nu(()=>{let e=null,n=null;const t=this.calculateRange();return t&&(e=t.startIndex,n=t.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,n]},(e,n,t,r,i)=>null===r||null===i?[]:e({startIndex:r,endIndex:i,overscan:n,count:t}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const n=this.options.indexAttribute,t=e.getAttribute(n);return t?parseInt(t,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(e,n)=>{const t=this.indexFromElement(e),r=this.measurementsCache[t];if(!r)return;const i=r.key,a=this.elementsCache.get(i);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(t,this.options.measureElement(e,n,this))},this.resizeItem=(e,n)=>{const t=this.measurementsCache[e];if(!t)return;const r=n-(this.itemSizeCache.get(t.key)??t.size);0!==r&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(t,r,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,n)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,n)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(n))})},this.getVirtualItems=Nu(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,n)=>{const t=[];for(let r=0,i=e.length;r<i;r++){const i=n[e[r]];t.push(i)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const n=this.getMeasurements();if(0!==n.length)return Eu(n[Bu(0,n.length-1,e=>Eu(n[e]).start,e)])},this.getOffsetForAlignment=(e,n,t=0)=>{const r=this.getSize(),i=this.getScrollOffset();"auto"===n&&(n=e>=i+r?"end":"start"),"center"===n?e+=(t-r)/2:"end"===n&&(e-=r);const a=this.getTotalSize()+this.options.scrollMargin-r;return Math.max(Math.min(a,e),0)},this.getOffsetForIndex=(e,n="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const t=this.measurementsCache[e];if(!t)return;const r=this.getSize(),i=this.getScrollOffset();if("auto"===n)if(t.end>=i+r-this.options.scrollPaddingEnd)n="end";else{if(!(t.start<=i+this.options.scrollPaddingStart))return[i,n];n="start"}const a="end"===n?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,n,t.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:n="start",behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:t})},this.scrollToIndex=(e,{align:n="auto",behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let r=0;const i=n=>{if(!this.targetWindow)return;const r=this.getOffsetForIndex(e,n);if(!r)return void console.warn("Failed to get offset for index:",e);const[i,o]=r;this._scrollToOffset(i,{adjustments:void 0,behavior:t}),this.targetWindow.requestAnimationFrame(()=>{const n=this.getScrollOffset(),t=this.getOffsetForIndex(e,o);var r,i;t?(r=t[0],i=n,Math.abs(r-i)<1.01||a(o)):console.warn("Failed to get offset for index:",e)})},a=n=>{this.targetWindow&&(r++,r<10?this.targetWindow.requestAnimationFrame(()=>i(n)):console.warn(`Failed to scroll to index ${e} after 10 attempts.`))};i(n)},this.scrollBy=(e,{behavior:n}={})=>{"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var e;const n=this.getMeasurements();let t;if(0===n.length)t=this.options.paddingStart;else if(1===this.options.lanes)t=(null==(e=n[n.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let r=n.length-1;for(;r>=0&&e.some(e=>null===e);){const t=n[r];null===e[t.lane]&&(e[t.lane]=t.end),r--}t=Math.max(...e.filter(e=>null!==e))}return Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:n,behavior:t})=>{this.options.scrollToFn(e,{behavior:t,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const Bu=(e,n,t,r)=>{for(;e<=n;){const i=(e+n)/2|0,a=t(i);if(a<r)e=i+1;else{if(!(a>r))return i;n=i-1}}return e>0?e-1:0};const Vu="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function Uu(e){const n=i.useReducer(()=>({}),{})[1],t={...e,onChange:(t,r)=>{var i;r?(0,Pu.flushSync)(n):n(),null==(i=e.onChange)||i.call(e,t,r)}},[r]=i.useState(()=>new _u(t));return r.setOptions(t),Vu(()=>r._didMount(),[]),Vu(()=>r._willUpdate()),r}const Wu=B("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);function Hu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function $u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hu(Object(t),!0).forEach(function(n){qu(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function qu(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ku(e){let{value:n,onChange:t,placeholder:r}=e;return(0,o.jsxs)("div",{className:"lumiverse-pack-search",children:[(0,o.jsx)("span",{className:"lumiverse-pack-search-icon",children:(0,o.jsx)(Wu,{size:16,strokeWidth:1.5})}),(0,o.jsx)("input",{type:"text",className:"lumiverse-pack-search-input",placeholder:r,value:n,onChange:e=>t(e.target.value)}),n&&(0,o.jsx)("button",{className:"lumiverse-pack-search-clear",onClick:()=>t(""),type:"button",children:(0,o.jsx)(au,{size:14,strokeWidth:2})})]})}function Yu(e){let{activeFilter:n,onFilterChange:t}=e;const r=[{id:"all",label:"All",Icon:V},{id:"definition",label:"Defs",Icon:lu},{id:"behavior",label:"Behaviors",Icon:vu},{id:"personality",label:"Personalities",Icon:gu}];return(0,o.jsx)("div",{className:"lumiverse-pack-filters",children:r.map(e=>{const{Icon:r}=e;return(0,o.jsxs)("button",{className:D("lumiverse-pack-filter",n===e.id&&"lumiverse-pack-filter--active"),onClick:()=>t(e.id),type:"button",children:[(0,o.jsx)("span",{className:"lumiverse-pack-filter-icon",children:(0,o.jsx)(r,{size:14,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-pack-filter-label",children:e.label})]},e.id)})})}function Qu(e){let{pack:n,isExpanded:t,onToggle:r,itemCount:i}=e;const a=n.name||n.packName||"Unknown Pack";return(0,o.jsxs)("button",{className:D("lumiverse-browser-pack-header",t&&"lumiverse-browser-pack-header--expanded"),onClick:r,type:"button",children:[n.packCover?(0,o.jsx)("img",{src:n.packCover,alt:a,className:"lumiverse-browser-pack-cover"}):(0,o.jsx)("div",{className:"lumiverse-browser-pack-cover-placeholder",children:n.isCustom?(0,o.jsx)(iu,{size:20,strokeWidth:1.5}):(0,o.jsx)(V,{size:20,strokeWidth:1.5})}),(0,o.jsxs)("div",{className:"lumiverse-browser-pack-info",children:[(0,o.jsx)("span",{className:"lumiverse-browser-pack-name",children:a}),(0,o.jsxs)("span",{className:"lumiverse-browser-pack-meta",children:[i," items",n.isCustom&&(0,o.jsx)("span",{className:"lumiverse-browser-pack-custom-badge",children:"Custom"})]})]}),(0,o.jsx)("span",{className:D("lumiverse-browser-pack-chevron",t&&"lumiverse-browser-pack-chevron--rotated"),children:(0,o.jsx)(Al,{size:16,strokeWidth:2})})]})}function Xu(e){let{item:n,type:t,onSelect:r}=e;const i={definition:{Icon:lu,color:"rgba(100, 200, 255, 0.15)",border:"rgba(100, 200, 255, 0.3)"},behavior:{Icon:vu,color:"rgba(255, 180, 100, 0.15)",border:"rgba(255, 180, 100, 0.3)"},personality:{Icon:gu,color:"rgba(200, 100, 255, 0.15)",border:"rgba(200, 100, 255, 0.3)"}},{objectPosition:a}=O(n.lumia_img),s=i[t]||i.definition,{Icon:l}=s,u=n.lumiaDefName||"Unknown",c="definition"===t&&n.lumiaDef?n.lumiaDef.slice(0,100):"behavior"===t&&n.lumia_behavior?n.lumia_behavior.slice(0,100):"personality"===t&&n.lumia_personality?n.lumia_personality.slice(0,100):"";return(0,o.jsxs)(nl.div,{className:"lumiverse-browser-item",style:{background:s.color,borderColor:s.border},onClick:()=>null==r?void 0:r(n,t),initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},children:[n.lumia_img&&(0,o.jsx)("img",{src:n.lumia_img,alt:u,className:"lumiverse-browser-item-image",style:{objectPosition:a}}),(0,o.jsxs)("div",{className:"lumiverse-browser-item-content",children:[(0,o.jsxs)("div",{className:"lumiverse-browser-item-header",children:[(0,o.jsx)("span",{className:"lumiverse-browser-item-icon",children:(0,o.jsx)(l,{size:14,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-browser-item-name",children:u})]}),c&&(0,o.jsx)("p",{className:"lumiverse-browser-item-desc",children:c})]})]})}function Gu(e){let{items:n,filter:t,onSelectItem:r}=e;const a=(0,i.useRef)(null),s=(0,i.useMemo)(()=>"all"===t?n:n.filter(e=>e.type===t),[n,t]),l=function(e){return Uu({observeElementRect:zu,observeElementOffset:Iu,scrollToFn:Fu,...e})}({count:s.length,getScrollElement:()=>a.current,estimateSize:()=>80,overscan:5});return 0===s.length?(0,o.jsx)("div",{className:"lumiverse-browser-empty-items",children:"No items match the current filter"}):(0,o.jsx)("div",{ref:a,className:"lumiverse-browser-items-container",style:{maxHeight:"300px",overflow:"auto"},children:(0,o.jsx)("div",{style:{height:"".concat(l.getTotalSize(),"px"),width:"100%",position:"relative"},children:l.getVirtualItems().map(e=>{const n=s[e.index];return(0,o.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)"),padding:"4px 0"},children:(0,o.jsx)(Xu,{item:n,type:n.type,onSelect:r})},e.key)})})})}function Ju(e){let{pack:n,filter:t,searchQuery:r,onSelectItem:a}=e;const[s,l]=(0,i.useState)(!1),u=n.name||n.packName||"Unknown Pack",c=(0,i.useMemo)(()=>{const e=n.items||[],t=[];return e.forEach((e,n)=>{if(e.loomCategory)return;if(!e.lumiaDefName)return;const r=!!e.lumiaDef,i=!!e.lumia_behavior,a=!!e.lumia_personality;r&&t.push($u($u({},e),{},{type:"definition",packName:u,id:"def-".concat(u,"-").concat(e.lumiaDefName,"-").concat(n)})),i&&t.push($u($u({},e),{},{type:"behavior",packName:u,id:"beh-".concat(u,"-").concat(e.lumiaDefName,"-").concat(n)})),a&&t.push($u($u({},e),{},{type:"personality",packName:u,id:"per-".concat(u,"-").concat(e.lumiaDefName,"-").concat(n)}))}),t},[n,u]),d=(0,i.useMemo)(()=>{let e=c;if("all"!==t&&(e=e.filter(e=>e.type===t)),r){const n=r.toLowerCase();e=e.filter(e=>{const t=(e.lumiaDefName||"").toLowerCase(),r=(e.lumiaDef||"").toLowerCase(),i=(e.lumia_behavior||"").toLowerCase(),a=(e.lumia_personality||"").toLowerCase();return t.includes(n)||r.includes(n)||i.includes(n)||a.includes(n)})}return e},[c,t,r]);return 0===d.length?null:(0,o.jsxs)("div",{className:"lumiverse-browser-pack",children:[(0,o.jsx)(Qu,{pack:n,isExpanded:s,onToggle:()=>l(!s),itemCount:d.length}),(0,o.jsx)(ll,{children:s&&(0,o.jsx)(nl.div,{className:"lumiverse-browser-pack-items",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:(0,o.jsx)(Gu,{items:d,filter:t,onSelectItem:a})})})]})}function Zu(e){let{packs:n,customPacks:t}=e;const r=(0,i.useMemo)(()=>{let e=0,r=0,i=0;return[...n,...t].forEach(n=>{(n.items||[]).forEach(n=>{n.loomCategory||n.lumiaDefName&&(n.lumiaDef&&e++,n.lumia_behavior&&r++,n.lumia_personality&&i++)})}),{definitions:e,behaviors:r,personalities:i,total:n.length+t.length}},[n,t]);return(0,o.jsxs)("div",{className:"lumiverse-browser-stats",children:[(0,o.jsxs)("div",{className:"lumiverse-browser-stat",children:[(0,o.jsx)("span",{className:"lumiverse-browser-stat-value",children:r.total}),(0,o.jsx)("span",{className:"lumiverse-browser-stat-label",children:"Packs"})]}),(0,o.jsxs)("div",{className:"lumiverse-browser-stat",children:[(0,o.jsx)("span",{className:"lumiverse-browser-stat-value",children:r.definitions}),(0,o.jsx)("span",{className:"lumiverse-browser-stat-label",children:"Defs"})]}),(0,o.jsxs)("div",{className:"lumiverse-browser-stat",children:[(0,o.jsx)("span",{className:"lumiverse-browser-stat-value",children:r.behaviors}),(0,o.jsx)("span",{className:"lumiverse-browser-stat-label",children:"Behaviors"})]}),(0,o.jsxs)("div",{className:"lumiverse-browser-stat",children:[(0,o.jsx)("span",{className:"lumiverse-browser-stat-value",children:r.personalities}),(0,o.jsx)("span",{className:"lumiverse-browser-stat-label",children:"Personalities"})]})]})}const ec=function(){const{packs:e,customPacks:n}=T(),t=j(),[r,a]=(0,i.useState)(""),[s,l]=(0,i.useState)("all"),u=(0,i.useMemo)(()=>[...e.map(e=>$u($u({},e),{},{isCustom:!1})),...n.map(e=>$u($u({},e),{},{isCustom:!0}))],[e,n]),c=(0,i.useCallback)((e,n)=>{console.log("[PackBrowser] Selected item:",e,n);const r={packName:e.packName,itemName:e.lumiaDefName};"definition"===n?t.setSelectedDefinition(r):"behavior"===n?t.toggleBehavior(r):"personality"===n&&t.togglePersonality(r)},[t]);return(0,o.jsxs)("div",{className:"lumiverse-pack-browser",children:[(0,o.jsx)(Zu,{packs:e,customPacks:n}),(0,o.jsx)(Ku,{value:r,onChange:a,placeholder:"Search packs and items..."}),(0,o.jsx)(Yu,{activeFilter:s,onFilterChange:l}),(0,o.jsx)("div",{className:"lumiverse-browser-packs",children:0===u.length?(0,o.jsxs)("div",{className:"lumiverse-browser-empty",children:[(0,o.jsx)("span",{className:"lumiverse-browser-empty-icon",children:(0,o.jsx)(V,{size:32,strokeWidth:1.5})}),(0,o.jsx)("p",{children:"No packs loaded"}),(0,o.jsx)("span",{className:"lumiverse-browser-empty-hint",children:"Add packs in the Settings panel"})]}):u.map((e,n)=>(0,o.jsx)(Ju,{pack:e,filter:s,searchQuery:r,onSelectItem:c},e.name||e.packName||"pack-".concat(n)))})]})},nc=B("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),tc=B("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),rc=B("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ic=B("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);function ac(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function oc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ac(Object(t),!0).forEach(function(n){sc(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ac(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function sc(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const lc=y;function uc(e){let{id:n,Icon:t,title:r,description:i,selected:a,onChange:s}=e;return(0,o.jsxs)("label",{className:D("lumiverse-vp-style-option",a&&"lumiverse-vp-style-option--selected"),children:[(0,o.jsx)("input",{type:"radio",name:"ooc-style",value:n,checked:a,onChange:()=>s(n)}),(0,o.jsx)("span",{className:"lumiverse-vp-style-option-icon",children:(0,o.jsx)(t,{size:20,strokeWidth:1.5})}),(0,o.jsxs)("div",{className:"lumiverse-vp-style-option-text",children:[(0,o.jsx)("span",{className:"lumiverse-vp-style-option-title",children:r}),(0,o.jsx)("span",{className:"lumiverse-vp-style-option-desc",children:i})]})]})}function cc(e){let{id:n,label:t,hint:r,value:i,onChange:a,placeholder:s,min:l=1}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-field",children:[(0,o.jsx)("label",{className:"lumiverse-vp-field-label",htmlFor:n,children:t}),(0,o.jsx)("input",{type:"number",id:n,className:"lumiverse-vp-field-input",value:i,onChange:e=>a(e.target.value),placeholder:s,min:l}),r&&(0,o.jsx)("span",{className:"lumiverse-vp-field-hint",children:r})]})}const dc=function(){j();const e=(0,i.useSyncExternalStore)(lc.subscribe,()=>lc.getState().lumiaOOCInterval,()=>lc.getState().lumiaOOCInterval),n=(0,i.useSyncExternalStore)(lc.subscribe,()=>lc.getState().lumiaOOCStyle||"social",()=>lc.getState().lumiaOOCStyle||"social"),t=(0,i.useCallback)(e=>{const n=e?parseInt(e,10):null;lc.setState({lumiaOOCInterval:n}),b()},[]),r=(0,i.useCallback)(e=>{lc.setState({lumiaOOCStyle:e}),b()},[]),a=[{id:"social",Icon:nc,title:"Social Card",description:"Full card with avatar & animations"},{id:"margin",Icon:lu,title:"Margin Note",description:"Minimal hanging tag style"},{id:"whisper",Icon:tc,title:"Whisper Bubble",description:"Soft ethereal thought bubble"}];return(0,o.jsxs)("div",{className:"lumiverse-vp-settings-panel",children:[(0,o.jsxs)("div",{className:"lumiverse-vp-settings-section",children:[(0,o.jsxs)("div",{className:"lumiverse-vp-settings-section-header",children:[(0,o.jsx)(rc,{size:16,strokeWidth:1.5}),(0,o.jsx)("span",{children:"Comment Trigger"})]}),(0,o.jsx)("p",{className:"lumiverse-vp-settings-desc",children:"Automatically inject OOC instructions at message intervals."}),(0,o.jsx)(cc,{id:"ooc-interval",label:"Message Interval",hint:"Triggers when message count is divisible by this number",value:(null==e?void 0:e.toString())||"",onChange:t,placeholder:"e.g., 10 (empty = disabled)"})]}),(0,o.jsxs)("div",{className:"lumiverse-vp-settings-section",children:[(0,o.jsxs)("div",{className:"lumiverse-vp-settings-section-header",children:[(0,o.jsx)(ic,{size:16,strokeWidth:1.5}),(0,o.jsx)("span",{children:"Display Style"})]}),(0,o.jsx)("p",{className:"lumiverse-vp-settings-desc",children:"Choose how OOC comments appear in chat."}),(0,o.jsx)("div",{className:"lumiverse-vp-style-options",children:a.map(e=>(0,o.jsx)(uc,oc(oc({},e),{},{selected:n===e.id,onChange:r}),e.id))})]})]})},mc=B("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),pc=B("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),hc=B("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);function fc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function vc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fc(Object(t),!0).forEach(function(n){gc(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fc(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function gc(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const xc=y;function bc(e){let{id:n,checked:t,onChange:r,label:i,hint:a}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-toggle-row",children:[(0,o.jsxs)("label",{className:"lumiverse-vp-toggle-label",htmlFor:n,children:[(0,o.jsx)("span",{className:"lumiverse-vp-toggle-text",children:i}),a&&(0,o.jsx)("span",{className:"lumiverse-vp-toggle-hint",children:a})]}),(0,o.jsxs)("div",{className:"lumiverse-vp-toggle-switch-wrapper",children:[(0,o.jsx)("input",{type:"checkbox",id:n,className:"lumiverse-vp-toggle-input",checked:t,onChange:e=>r(e.target.checked)}),(0,o.jsx)("label",{htmlFor:n,className:"lumiverse-vp-toggle-switch-label",children:(0,o.jsx)("div",{className:D("lumiverse-vp-toggle-track",t&&"lumiverse-vp-toggle-track--on"),children:(0,o.jsx)("div",{className:"lumiverse-vp-toggle-thumb"})})})]})]})}function yc(e){let{id:n,label:t,hint:r,value:i,onChange:a,min:s=0,max:l=100}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-field lumiverse-vp-field--inline",children:[(0,o.jsx)("label",{className:"lumiverse-vp-field-label",htmlFor:n,children:t}),(0,o.jsx)("input",{type:"number",id:n,className:"lumiverse-vp-field-input lumiverse-vp-field-input--small",value:i,onChange:e=>a(parseInt(e.target.value,10)||0),min:s,max:l}),r&&(0,o.jsx)("span",{className:"lumiverse-vp-field-hint",children:r})]})}function kc(e){let{Icon:n,title:t,status:r,children:a,defaultOpen:s=!1}=e;const[l,u]=(0,i.useState)(s);return(0,o.jsxs)("div",{className:D("lumiverse-vp-collapsible",l&&"lumiverse-vp-collapsible--open"),children:[(0,o.jsxs)("button",{className:"lumiverse-vp-collapsible-header",onClick:()=>u(!l),type:"button",children:[(0,o.jsx)("span",{className:D("lumiverse-vp-collapsible-chevron",l&&"lumiverse-vp-collapsible-chevron--open"),children:(0,o.jsx)(Al,{size:14,strokeWidth:2})}),(0,o.jsx)("span",{className:"lumiverse-vp-collapsible-icon",children:(0,o.jsx)(n,{size:16,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-vp-collapsible-title",children:t}),void 0!==r&&(0,o.jsx)("span",{className:D("lumiverse-vp-collapsible-status",r&&"lumiverse-vp-collapsible-status--active"),children:r?"Active":"Inactive"})]}),(0,o.jsx)(ll,{children:l&&(0,o.jsx)(nl.div,{className:"lumiverse-vp-collapsible-content",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:(0,o.jsx)("div",{className:"lumiverse-vp-collapsible-inner",children:a})})})]})}function wc(e){let{items:n,muted:t=!1}=e;return(0,o.jsxs)("div",{className:D("lumiverse-vp-info-box",t&&"lumiverse-vp-info-box--muted"),children:[(0,o.jsxs)("div",{className:"lumiverse-vp-info-box-header",children:[(0,o.jsx)(mc,{size:14,strokeWidth:2}),(0,o.jsx)("span",{children:"When enabled:"})]}),(0,o.jsx)("ul",{className:"lumiverse-vp-info-box-list",children:n.map((e,n)=>(0,o.jsx)("li",{children:e},n))})]})}function Sc(e){let{id:n,label:t,hint:r,enabled:i,onToggle:a,depthValue:s,onDepthChange:l,depthLabel:u,depthHint:c}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-filter-item",children:[(0,o.jsx)(bc,{id:n,checked:i,onChange:a,label:t,hint:r}),(0,o.jsx)(ll,{children:i&&void 0!==s&&(0,o.jsx)(nl.div,{className:"lumiverse-vp-filter-options",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},children:(0,o.jsx)(yc,{id:"".concat(n,"-depth"),label:u||"Keep in last N messages",hint:c,value:s,onChange:l})})})]})}const jc=function(){var e,n,t,r,a,s,l,u,c,d,m,p,h,f,v;const g=(0,i.useSyncExternalStore)(xc.subscribe,()=>xc.getState().sovereignHand||{enabled:!1},()=>xc.getState().sovereignHand||{enabled:!1}),x=(0,i.useSyncExternalStore)(xc.subscribe,()=>xc.getState().contextFilters||{},()=>xc.getState().contextFilters||{}),y=null!==(e=g.enabled)&&void 0!==e&&e,k=null!==(n=null===(t=x.htmlTags)||void 0===t?void 0:t.enabled)&&void 0!==n&&n,w=null!==(r=null===(a=x.htmlTags)||void 0===a?void 0:a.stripFonts)&&void 0!==r&&r,S=null!==(s=null===(l=x.htmlTags)||void 0===l?void 0:l.fontKeepDepth)&&void 0!==s?s:3,j=null!==(u=null===(c=x.detailsBlocks)||void 0===c?void 0:c.enabled)&&void 0!==u&&u,C=null!==(d=null===(m=x.detailsBlocks)||void 0===m?void 0:m.keepDepth)&&void 0!==d?d:3,P=null!==(p=null===(h=x.loomItems)||void 0===h?void 0:h.enabled)&&void 0!==p&&p,N=null!==(f=null===(v=x.loomItems)||void 0===v?void 0:v.keepDepth)&&void 0!==f?f:5,E=(0,i.useCallback)((e,n)=>{const t=xc.getState(),r=e.split(".");if("sovereignHand"===r[0])xc.setState({sovereignHand:vc(vc({},t.sovereignHand),{},{[r[1]]:n})});else if("contextFilters"===r[0]){var i;const e=r[1],a=r[2];xc.setState({contextFilters:vc(vc({},t.contextFilters),{},{[e]:vc(vc({},(null===(i=t.contextFilters)||void 0===i?void 0:i[e])||{}),{},{[a]:n})})})}b()},[]),M=k||j||P;return(0,o.jsxs)("div",{className:"lumiverse-vp-settings-panel",children:[(0,o.jsxs)(kc,{Icon:pc,title:"Sovereign Hand",status:y,defaultOpen:!0,children:[(0,o.jsx)("p",{className:"lumiverse-vp-settings-desc",children:"Enable Sovereign Hand integration to use advanced prompt manipulation features."}),(0,o.jsx)(bc,{id:"sovereign-hand-toggle",checked:y,onChange:e=>E("sovereignHand.enabled",e),label:"Use Sovereign Hand Features",hint:"Enables {{loomLastUserMessage}} macro and context exclusion"}),(0,o.jsx)(wc,{muted:!y,items:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("code",{children:"{{loomLastUserMessage}}"})," returns the last user message"]}),"The last user message is excluded from the outgoing prompt context","Use this to provide instructions with the user's input to specific prompt locations"]})]}),(0,o.jsxs)(kc,{Icon:hc,title:"Context Filters",status:M,children:[(0,o.jsx)("p",{className:"lumiverse-vp-settings-desc",children:"Filter out specific content from the chat context before sending to the AI."}),(0,o.jsx)(Sc,{id:"filter-html",label:"Strip HTML Tags",hint:"Removes formatting tags: <div>, <span>, <b>, <i>, etc.",enabled:k,onToggle:e=>E("contextFilters.htmlTags.enabled",e)}),(0,o.jsx)(ll,{children:k&&(0,o.jsx)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"lumiverse-vp-filter-sub",children:(0,o.jsx)(Sc,{id:"filter-fonts",label:"Also Strip Fonts",hint:"Remove <font> tags (used by some presets)",enabled:w,onToggle:e=>E("contextFilters.htmlTags.stripFonts",e),depthValue:S,onDepthChange:e=>E("contextFilters.htmlTags.fontKeepDepth",e),depthLabel:"Keep fonts in last N messages",depthHint:"Font tags in older messages will be stripped"})})}),(0,o.jsx)(Sc,{id:"filter-details",label:"Filter Details Blocks",hint:"Removes <details> blocks from older messages",enabled:j,onToggle:e=>E("contextFilters.detailsBlocks.enabled",e),depthValue:C,onDepthChange:e=>E("contextFilters.detailsBlocks.keepDepth",e),depthHint:"Messages beyond this depth will have <details> removed"}),(0,o.jsx)(Sc,{id:"filter-loom",label:"Filter Loom Tags",hint:"Removes Lucid Loom-related tags from older messages",enabled:P,onToggle:e=>E("contextFilters.loomItems.enabled",e),depthValue:N,onDepthChange:e=>E("contextFilters.loomItems.keepDepth",e),depthHint:"Loom tags in older messages will be stripped"})]})]})},Cc=B("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Pc=B("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Nc=B("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ec=B("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Mc=B("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),Tc=B("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Lc=B("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),Oc=B("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),zc=B("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Dc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ac(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dc(Object(t),!0).forEach(function(n){Ic(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dc(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ic(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const Rc=y,Fc="loom_summary",_c={openai:{name:"OpenAI",placeholder:"gpt-4o-mini"},anthropic:{name:"Anthropic",placeholder:"claude-3-haiku-20240307"},google:{name:"Google AI",placeholder:"gemini-1.5-flash"},openrouter:{name:"OpenRouter",placeholder:"openai/gpt-4o-mini"},custom:{name:"Custom",placeholder:"your-model-name"}};function Bc(e){let{Icon:n,title:t,children:r,defaultOpen:a=!1,status:s}=e;const[l,u]=(0,i.useState)(a);return(0,o.jsxs)("div",{className:D("lumiverse-vp-collapsible",l&&"lumiverse-vp-collapsible--open"),children:[(0,o.jsxs)("button",{className:"lumiverse-vp-collapsible-header",onClick:()=>u(!l),type:"button",children:[(0,o.jsx)("span",{className:D("lumiverse-vp-collapsible-chevron",l&&"lumiverse-vp-collapsible-chevron--open"),children:(0,o.jsx)(Al,{size:14,strokeWidth:2})}),(0,o.jsx)("span",{className:"lumiverse-vp-collapsible-icon",children:(0,o.jsx)(n,{size:16,strokeWidth:1.5})}),(0,o.jsx)("span",{className:"lumiverse-vp-collapsible-title",children:t}),void 0!==s&&(0,o.jsx)("span",{className:D("lumiverse-vp-collapsible-status",s&&"lumiverse-vp-collapsible-status--active"),children:s?"Active":"Off"})]}),(0,o.jsx)(ll,{children:l&&(0,o.jsx)(nl.div,{className:"lumiverse-vp-collapsible-content",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:(0,o.jsx)("div",{className:"lumiverse-vp-collapsible-inner",children:r})})})]})}function Vc(e){let{id:n,checked:t,onChange:r,label:i,hint:a}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-toggle-row",children:[(0,o.jsxs)("label",{className:"lumiverse-vp-toggle-label",htmlFor:n,children:[(0,o.jsx)("span",{className:"lumiverse-vp-toggle-text",children:i}),a&&(0,o.jsx)("span",{className:"lumiverse-vp-toggle-hint",children:a})]}),(0,o.jsxs)("div",{className:"lumiverse-vp-toggle-switch-wrapper",children:[(0,o.jsx)("input",{type:"checkbox",id:n,className:"lumiverse-vp-toggle-input",checked:t,onChange:e=>r(e.target.checked)}),(0,o.jsx)("label",{htmlFor:n,className:"lumiverse-vp-toggle-switch-label",children:(0,o.jsx)("div",{className:D("lumiverse-vp-toggle-track",t&&"lumiverse-vp-toggle-track--on"),children:(0,o.jsx)("div",{className:"lumiverse-vp-toggle-thumb"})})})]})]})}function Uc(e){let{name:n,value:t,checked:r,onChange:i,label:a}=e;return(0,o.jsxs)("label",{className:D("lumiverse-vp-radio-option",r&&"lumiverse-vp-radio-option--selected"),children:[(0,o.jsx)("input",{type:"radio",name:n,value:t,checked:r,onChange:()=>i(t)}),(0,o.jsx)("span",{className:"lumiverse-vp-radio-option-label",children:a})]})}function Wc(e){let{id:n,label:t,hint:r,value:i,onChange:a,min:s,max:l,step:u=1}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-field",children:[(0,o.jsx)("label",{className:"lumiverse-vp-field-label",htmlFor:n,children:t}),(0,o.jsx)("input",{type:"number",id:n,className:"lumiverse-vp-field-input lumiverse-vp-field-input--small",value:i,onChange:e=>a(parseFloat(e.target.value)||0),min:s,max:l,step:u}),r&&(0,o.jsx)("span",{className:"lumiverse-vp-field-hint",children:r})]})}function Hc(e){let{id:n,label:t,hint:r,value:i,onChange:a,placeholder:s,type:l="text"}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-field",children:[(0,o.jsx)("label",{className:"lumiverse-vp-field-label",htmlFor:n,children:t}),(0,o.jsx)("input",{type:l,id:n,className:"lumiverse-vp-field-input",value:i,onChange:e=>a(e.target.value),placeholder:s}),r&&(0,o.jsx)("span",{className:"lumiverse-vp-field-hint",children:r})]})}function $c(e){let{id:n,label:t,hint:r,value:i,onChange:a,options:s}=e;return(0,o.jsxs)("div",{className:"lumiverse-vp-field",children:[(0,o.jsx)("label",{className:"lumiverse-vp-field-label",htmlFor:n,children:t}),(0,o.jsx)("select",{id:n,className:"lumiverse-vp-field-select",value:i,onChange:e=>a(e.target.value),children:s.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(0,o.jsx)("span",{className:"lumiverse-vp-field-hint",children:r})]})}function qc(e){let{hasContent:n,hasChat:t}=e;return t?n?(0,o.jsxs)("div",{className:"lumiverse-vp-summary-status lumiverse-vp-summary-status--exists",children:[(0,o.jsx)(Pc,{size:16,strokeWidth:2}),(0,o.jsx)("span",{children:"Summary exists for this chat"})]}):(0,o.jsxs)("div",{className:"lumiverse-vp-summary-status lumiverse-vp-summary-status--empty",children:[(0,o.jsx)(Cc,{size:16,strokeWidth:2}),(0,o.jsx)("span",{children:"No summary yet"})]}):(0,o.jsxs)("div",{className:"lumiverse-vp-summary-status lumiverse-vp-summary-status--no-chat",children:[(0,o.jsx)(Cc,{size:16,strokeWidth:2}),(0,o.jsx)("span",{children:"No active chat"})]})}function Kc(e){let{Icon:n,label:t,onClick:r,disabled:i,variant:a="secondary",loading:s=!1,iconOnly:l=!1}=e;return(0,o.jsxs)(nl.button,{className:D("lumiverse-vp-action-btn","lumiverse-vp-action-btn--".concat(a),i&&"lumiverse-vp-action-btn--disabled",l&&"lumiverse-vp-action-btn--icon-only"),onClick:r,disabled:i||s,whileHover:i?{}:{scale:1.05},whileTap:i?{}:{scale:.95},type:"button",title:t,children:[s?(0,o.jsx)("span",{className:"lumiverse-vp-action-btn-spinner"}):(0,o.jsx)(n,{size:l?16:14,strokeWidth:2}),!l&&(0,o.jsx)("span",{children:t})]})}function Yc(){var e,n,t,r;const a=(0,i.useSyncExternalStore)(Rc.subscribe,()=>Rc.getState().summarization||{},()=>Rc.getState().summarization||{}),s=(0,i.useSyncExternalStore)(Rc.subscribe,()=>Rc.getState().messageTruncation||{enabled:!1,keepCount:50},()=>Rc.getState().messageTruncation||{enabled:!1,keepCount:50}),l=a.mode||"disabled",u=a.apiSource||"main",c=a.autoInterval||10,d=a.autoMessageContext||10,m=a.manualMessageContext||10,p=a.secondary||{},h=(0,i.useCallback)(e=>{const n=Rc.getState().summarization||{};Rc.setState({summarization:Ac(Ac({},n),e)}),b()},[]),f=(0,i.useCallback)(e=>{const n=Rc.getState().summarization||{},t=n.secondary||{};Rc.setState({summarization:Ac(Ac({},n),{},{secondary:Ac(Ac({},t),e)})}),b()},[]),v=(0,i.useCallback)(e=>{const n=Rc.getState().messageTruncation||{};Rc.setState({messageTruncation:Ac(Ac({},n),e)}),b()},[]),g=Object.entries(_c).map(e=>{let[n,t]=e;return{value:n,label:t.name}});return(0,o.jsxs)("div",{className:"lumiverse-vp-summary-config",children:[(0,o.jsxs)(Bc,{Icon:Nc,title:"Summarization Mode",status:"disabled"!==l,defaultOpen:!0,children:[(0,o.jsxs)("div",{className:"lumiverse-vp-radio-group",children:[(0,o.jsx)(Uc,{name:"sum-mode",value:"disabled",checked:"disabled"===l,onChange:e=>h({mode:e}),label:"Disabled"}),(0,o.jsx)(Uc,{name:"sum-mode",value:"auto",checked:"auto"===l,onChange:e=>h({mode:e}),label:"Automatic"}),(0,o.jsx)(Uc,{name:"sum-mode",value:"manual",checked:"manual"===l,onChange:e=>h({mode:e}),label:"Manual"})]}),(0,o.jsxs)("p",{className:"lumiverse-vp-settings-desc",children:["disabled"===l&&"Summarization is turned off.","auto"===l&&"Summaries are generated automatically at set intervals.","manual"===l&&"Use /loom-summarize command to generate summaries."]})]}),(0,o.jsx)(ll,{children:"auto"===l&&(0,o.jsx)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:(0,o.jsx)(Bc,{Icon:rc,title:"Auto Settings",defaultOpen:!0,children:(0,o.jsxs)("div",{className:"lumiverse-vp-field-row",children:[(0,o.jsx)(Wc,{id:"sum-interval",label:"Interval",hint:"Every N messages",value:c,onChange:e=>h({autoInterval:e}),min:1}),(0,o.jsx)(Wc,{id:"sum-auto-context",label:"Context",hint:"Messages to include",value:d,onChange:e=>h({autoMessageContext:e}),min:1,max:100})]})})})}),(0,o.jsx)(ll,{children:("manual"===l||"auto"===l)&&(0,o.jsx)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:(0,o.jsx)(Bc,{Icon:lu,title:"Manual Context",defaultOpen:"manual"===l,children:(0,o.jsx)(Wc,{id:"sum-manual-context",label:"Messages to include",hint:"When using /loom-summarize command",value:m,onChange:e=>h({manualMessageContext:e}),min:1,max:100})})})}),(0,o.jsx)(ll,{children:"disabled"!==l&&(0,o.jsx)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:(0,o.jsx)(Bc,{Icon:Ec,title:"API Source",defaultOpen:!1,children:(0,o.jsxs)("div",{className:"lumiverse-vp-radio-group lumiverse-vp-radio-group--wide",children:[(0,o.jsx)(Uc,{name:"sum-source",value:"main",checked:"main"===u,onChange:e=>h({apiSource:e}),label:"Main API"}),(0,o.jsx)(Uc,{name:"sum-source",value:"secondary",checked:"secondary"===u,onChange:e=>h({apiSource:e}),label:"Secondary LLM"})]})})})}),(0,o.jsx)(ll,{children:"disabled"!==l&&"secondary"===u&&(0,o.jsx)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:(0,o.jsxs)(Bc,{Icon:Mc,title:"Secondary LLM",defaultOpen:!0,children:[(0,o.jsx)($c,{id:"sum-provider",label:"Provider",value:p.provider||"openai",onChange:e=>f({provider:e}),options:g,hint:"custom"!==p.provider?"Uses API key from SillyTavern settings":void 0}),(0,o.jsx)(Hc,{id:"sum-model",label:"Model",value:p.model||"",onChange:e=>f({model:e}),placeholder:null===(e=_c[p.provider||"openai"])||void 0===e?void 0:e.placeholder}),(0,o.jsx)(ll,{children:"custom"===p.provider&&(0,o.jsxs)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,o.jsx)(Hc,{id:"sum-endpoint",label:"Endpoint URL",value:p.endpoint||"",onChange:e=>f({endpoint:e}),placeholder:"https://your-api.com/v1/chat/completions"}),(0,o.jsx)(Hc,{id:"sum-apikey",label:"API Key",type:"password",value:p.apiKey||"",onChange:e=>f({apiKey:e}),placeholder:"Your API key"})]})}),(0,o.jsxs)("div",{className:"lumiverse-vp-field-row lumiverse-vp-field-row--3",children:[(0,o.jsx)(Wc,{id:"sum-temp",label:"Temp",value:null!==(n=p.temperature)&&void 0!==n?n:.7,onChange:e=>f({temperature:e}),min:0,max:2,step:.1}),(0,o.jsx)(Wc,{id:"sum-topp",label:"Top-P",value:null!==(t=p.topP)&&void 0!==t?t:1,onChange:e=>f({topP:e}),min:0,max:1,step:.05}),(0,o.jsx)(Wc,{id:"sum-maxtokens",label:"Max Tokens",value:p.maxTokens||8192,onChange:e=>f({maxTokens:e}),min:100,max:128e3})]})]})})}),(0,o.jsxs)(Bc,{Icon:Tc,title:"Message Limit",status:s.enabled,children:[(0,o.jsx)(Vc,{id:"trunc-toggle",checked:s.enabled,onChange:e=>v({enabled:e}),label:"Limit Context Messages",hint:"Only send the last N messages to the AI"}),(0,o.jsx)(ll,{children:s.enabled&&(0,o.jsxs)(nl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,o.jsx)(Wc,{id:"trunc-count",label:"Messages to keep",hint:"Number of recent messages to include",value:null!==(r=s.keepCount)&&void 0!==r?r:50,onChange:e=>v({keepCount:e}),min:5,max:500}),(0,o.jsxs)("div",{className:"lumiverse-vp-warning-box",children:[(0,o.jsx)(Cc,{size:14,strokeWidth:2}),(0,o.jsx)("span",{children:"Older messages will be excluded. Consider using summarization to preserve memories."})]})]})})]})]})}function Qc(){const[e,n]=(0,i.useState)(""),[t,r]=(0,i.useState)(""),[a,s]=(0,i.useState)(!1),[l,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),m=(0,i.useRef)(null),p=e!==t,h=(e.trim().length,(0,i.useCallback)(()=>{try{if("undefined"!=typeof SillyTavern){const e=SillyTavern.getContext(),t=(null==e?void 0:e.chat)&&e.chat.length>0;if(s(t),t&&e.chatMetadata){const t=e.chatMetadata[Fc]||"";n(t),r(t)}else n(""),r("")}else s(!0),n(""),r("")}catch(e){console.warn("[SummaryEditor] Error loading summary:",e)}},[]));(0,i.useEffect)(()=>{h();const e=setInterval(h,5e3);return()=>clearInterval(e)},[h]);const f=(0,i.useCallback)(e=>{n(e.target.value)},[]),v=(0,i.useCallback)(()=>{try{if("undefined"!=typeof SillyTavern){var n;const t=SillyTavern.getContext();t.chatMetadata||(t.chatMetadata={});const i=e.trim();i?t.chatMetadata[Fc]=i:delete t.chatMetadata[Fc],null===(n=t.saveMetadata)||void 0===n||n.call(t),"undefined"!=typeof LumiverseBridge&&LumiverseBridge.updateSummaryButtonState&&LumiverseBridge.updateSummaryButtonState(),r(i),u(!0),setTimeout(()=>u(!1),1500)}}catch(e){console.error("[SummaryEditor] Error saving summary:",e)}},[e]),g=(0,i.useCallback)(()=>{if(confirm("Are you sure you want to clear the summary?")){n("");try{if("undefined"!=typeof SillyTavern){const n=SillyTavern.getContext();var e;if(n.chatMetadata)delete n.chatMetadata[Fc],null===(e=n.saveMetadata)||void 0===e||e.call(n),"undefined"!=typeof LumiverseBridge&&LumiverseBridge.updateSummaryButtonState&&LumiverseBridge.updateSummaryButtonState()}r("")}catch(e){console.error("[SummaryEditor] Error clearing summary:",e)}}},[]),x=(0,i.useCallback)(()=>{h()},[h]),b=(0,i.useCallback)(async()=>{if(a&&!c){d(!0);try{if("undefined"!=typeof LumiverseBridge&&LumiverseBridge.getCallbacks){const e=LumiverseBridge.getCallbacks();if(e.generateSummary){const t=await e.generateSummary();t&&n(t)}else console.warn("[SummaryEditor] generateSummary callback not available")}}catch(e){console.error("[SummaryEditor] Error generating summary:",e)}finally{d(!1)}}},[a,c]);return(0,o.jsxs)(Bc,{Icon:lu,title:"Summary Text",defaultOpen:!0,children:[(0,o.jsx)(qc,{hasContent:t.length>0,hasChat:a}),(0,o.jsx)("div",{className:"lumiverse-vp-summary-textarea-wrapper",children:(0,o.jsx)("textarea",{ref:m,className:"lumiverse-vp-summary-textarea",value:e,onChange:f,placeholder:"Write or paste your Loom summary here...\n\nUse the structured format:\n**Completed Objectives**\n- ...\n\n**Focused Objectives**\n- ...\n\n**Foreshadowing Beats**\n- ...\n\n**Character States**\n- ...\n\n**World State**\n- ...\n\n**Tone & Atmosphere**\n- ...\n\n**Threads to Weave**\n- ...",disabled:!a})}),(0,o.jsxs)("div",{className:"lumiverse-vp-summary-actions",children:[(0,o.jsx)(Kc,{Icon:Lc,label:c?"Generating...":"Generate",onClick:b,disabled:!a,loading:c,variant:"primary",iconOnly:!0}),(0,o.jsx)(Kc,{Icon:Oc,label:"Refresh",onClick:x,disabled:!a,iconOnly:!0}),(0,o.jsx)(Kc,{Icon:W,label:"Clear",onClick:g,disabled:!a||!t,variant:"danger",iconOnly:!0}),(0,o.jsx)(Kc,{Icon:l?Pc:zc,label:l?"Saved!":"Save",onClick:v,disabled:!a||!p,variant:"primary",iconOnly:!0})]}),(0,o.jsx)(ll,{children:p&&(0,o.jsx)(nl.div,{className:"lumiverse-vp-summary-unsaved",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},children:(0,o.jsx)("span",{children:"You have unsaved changes"})})})]})}const Xc=function(){return(0,o.jsxs)("div",{className:"lumiverse-vp-summary-editor",children:[(0,o.jsx)(Qc,{}),(0,o.jsx)(Yc,{})]})},Gc=y;const Jc=function(){const[e,n]=(0,i.useState)(!1),t=(0,i.useSyncExternalStore)(Gc.subscribe,()=>{var e;return null===(e=Gc.getState().showLumiverseDrawer)||void 0===e||e},()=>{var e;return null===(e=Gc.getState().showLumiverseDrawer)||void 0===e||e}),r=(0,i.useCallback)(()=>{n(e=>!e)},[]),a=(0,i.useCallback)(()=>{n(!1)},[]);return t?(0,o.jsx)(fu,{isVisible:e,onToggle:r,onClose:a,defaultTab:"profile",ProfileContent:Cu,BrowserContent:ec,OOCContent:dc,PromptContent:jc,SummaryContent:Xc}):null};var Zc=t(72),ed=t.n(Zc),nd=t(825),td=t.n(nd),rd=t(659),id=t.n(rd),ad=t(56),od=t.n(ad),sd=t(159),ld=t.n(sd),ud=t(113),cd=t.n(ud),dd=t(249),md={};md.styleTagTransform=cd(),md.setAttributes=od(),md.insert=id().bind(null,"head"),md.domAPI=td(),md.insertStyleElement=ld();ed()(dd.A,md);dd.A&&dd.A.locals&&dd.A.locals;function pd(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function hd(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pd(Object(t),!0).forEach(function(n){fd(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pd(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function fd(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const vd=new Map;let gd=null;function xd(e){const n=vd.get(e);n&&(n.root.unmount(),n.element.remove(),vd.delete(e),console.log("[LumiverseUI] Unmounted ".concat(e)))}const bd={mountSettingsPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lumiverse-settings-root",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n&&(gd=n,y.syncFromExtension(n)),document.getElementById(e))return console.warn("[LumiverseUI] Settings panel already mounted"),()=>xd(e);const t=document.getElementById("extensions_settings");if(!t)return console.error("[LumiverseUI] Could not find #extensions_settings container"),null;const r=document.createElement("div");r.id=e,t.appendChild(r);const s=a.createRoot(r);return s.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsx)(w,{initialSettings:gd,children:(0,o.jsx)(ru,{})})})),vd.set(e,{root:s,element:r}),console.log("[LumiverseUI] Settings panel mounted"),()=>xd(e)},mountViewportPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n="lumiverse-viewport-root",t=document.getElementById(n);t&&(t.remove(),vd.delete(n)),e&&y.syncFromExtension(e);const r=document.createElement("div");r.id=n,r.className="lumiverse-react-root lumiverse-viewport-container",r.style.position="fixed",r.style.top="0",r.style.right="0",r.style.bottom="0",r.style.left="auto",r.style.zIndex="9998",r.style.pointerEvents="none",document.body.appendChild(r);const s=a.createRoot(r);return s.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsx)(w,{initialSettings:e,children:(0,o.jsx)(Jc,{})})})),vd.set(n,{root:s,element:r}),console.log("[LumiverseUI] Viewport panel mounted with inline positioning"),()=>xd(n)},mountComponent:function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||"lumiverse-mount-".concat(Date.now());if(vd.has(r))return console.warn("[LumiverseUI] Component ".concat(r," already mounted")),()=>xd(r);const s=document.createElement("div");s.id=r,s.className="lumiverse-react-root",n.appendChild(s);const l=a.createRoot(s);return l.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsx)(w,{children:(0,o.jsx)(e,hd({},t))})})),vd.set(r,{root:l,element:s}),()=>xd(r)},unmount:xd,unmountAll:function(){for(const[e]of vd)xd(e)},syncSettings:function(e){if(e){var n,t,r,i,a,o;console.log("[LumiverseUI] syncSettings called with:",{packsCount:(null===(n=e.packs)||void 0===n?void 0:n.length)||0,customPacksCount:(null===(t=e.customPacks)||void 0===t?void 0:t.length)||0,firstPackItems:(null===(r=e.packs)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.items)||void 0===r?void 0:r.length)||0}),y.syncFromExtension(e);const s=y.getState();console.log("[LumiverseUI] After sync, store has:",{packsCount:(null===(i=s.packs)||void 0===i?void 0:i.length)||0,customPacksCount:(null===(a=s.customPacks)||void 0===a?void 0:a.length)||0,firstPackItems:(null===(o=s.packs)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.items)||void 0===o?void 0:o.length)||0})}else console.warn("[LumiverseUI] syncSettings called with null/undefined settings")},getState:function(){return y.exportForExtension()},subscribe:function(e){return y.subscribe(e)},getStore:function(){return y},getSTContext:function(){return"undefined"!=typeof SillyTavern?SillyTavern.getContext():(console.warn("[LumiverseUI] SillyTavern context not available"),null)}};console.log("[LumiverseUI] Bundle loaded, API available:",Object.keys(bd)),"undefined"!=typeof window&&(window.LumiverseUI=bd);const yd=bd;window.LumiverseUI=r.default})();